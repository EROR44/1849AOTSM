QIN_clamp_loyality_vars = {
	clamp_variable = {
		var = QIN_ichzu_supporters_loyality_num 
		min = 0
		max = 100
	}
	clamp_variable = {
		var = QIN_isin_supporters_loyality_num 
		min = 0
		max = 100
	}
	clamp_variable = {
		var = QIN_isuan_supporters_loyality_num 
		min = 0
		max = 100
	}
}

QIN_clamp_influence_vars = { #переделать на проверку суммы переменных - а+b+c <= 100
	clamp_variable = {
		var = QIN_ichzu_supporters_influemce_num 
		min = 0
		max = 100
	}
	clamp_variable = {
		var = QIN_isin_supporters_influemce_num 
		min = 0
		max = 100
	}
	clamp_variable = {
		var = QIN_isuan_supporters_influemce_num 
		min = 0
		max = 100
	}
}

#ICZHU_FRACTION_OPERATIONS

QIN_add_10_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_add_10_ichzu_supporters_loyality_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_5_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_add_5_ichzu_supporters_loyality_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_3_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_add_3_ichzu_supporters_loyality_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_1_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_add_1_ichzu_supporters_loyality_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_10_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_10_ichzu_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_5_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_5_ichzu_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_3_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_3_ichzu_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_1_ichzu_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_1_ichzu_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_10_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_add_10_ichzu_supporters_influemce_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_5_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_add_5_ichzu_supporters_influemce_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_3_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_add_3_ichzu_supporters_influemce_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_1_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_add_1_ichzu_supporters_influemce_tt
	add_to_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_10_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_10_ichzu_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_5_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_5_ichzu_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_3_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_3_ichzu_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_1_ichzu_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_1_ichzu_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_ichzu_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

#ISIN_FRACTION_OPERATIONS

QIN_add_10_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_add_10_isin_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_5_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_add_5_isin_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_3_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_add_3_isin_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_1_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_add_1_isin_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_10_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_10_isin_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_5_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_5_isin_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_3_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_3_isin_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_1_isin_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_1_isin_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_10_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_add_10_isin_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_5_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_add_5_isin_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_3_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_add_3_isin_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_1_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_add_1_isin_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_10_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_10_isin_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_5_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_5_isin_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_3_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_3_isin_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_1_isin_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_1_isin_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isin_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

#ISUAN_FRACTION_OPERATIONS

QIN_add_10_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_add_10_isuan_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_5_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_add_5_isuan_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_3_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_add_3_isuan_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_1_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_add_1_isuan_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_10_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_10_isuan_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_5_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_5_isuan_supporters_loyality_tt
	add_to_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_3_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_3_isuan_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_remove_1_isuan_supporters_loyality = {
	custom_effect_tooltip = QIN_remove_1_isuan_supporters_loyality_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_loyality_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_loyality_vars = yes
}

QIN_add_10_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_add_10_isuan_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_5_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_add_5_isuan_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_3_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_add_3_isuan_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_add_1_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_add_1_isuan_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_10_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_10_isuan_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 10
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_5_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_5_isuan_supporters_influemce_tt
	add_to_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 5
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_3_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_3_isuan_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 3
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_remove_1_isuan_supporters_influemce = {
	custom_effect_tooltip = QIN_remove_1_isuan_supporters_influemce_tt
	subtract_from_variable = {
		var = QIN_isuan_supporters_influemce_num
		value = 1
	}
	force_update_dynamic_modifier = yes
	QIN_clamp_influence_vars = yes
}

QIN_check_who_is_new_emperror = {
	if = {
		limit = {
			check_variable = { QIN_ichzu_supporters_influemce_num > QIN_isin_supporters_influemce_num }
			check_variable = { QIN_ichzu_supporters_influemce_num > QIN_isuan_supporters_influemce_num }
		}
		retire_character = QIN_Aisin_Gioro_Mianning
		promote_character = QIN_Aisin_Gioro_Ichu
	}
	else_if = {
		limit = {
			check_variable = { QIN_isin_supporters_influemce_num > QIN_ichzu_supporters_influemce_num }
			check_variable = { QIN_isin_supporters_influemce_num > QIN_isuan_supporters_influemce_num }
		}
		retire_character = QIN_Aisin_Gioro_Mianning
		promote_character = QIN_Aisin_Gioro_Isin
	}
	else_if = {
		limit = {
			check_variable = { QIN_isuan_supporters_influemce_num > QIN_ichzu_supporters_influemce_num }
			check_variable = { QIN_isuan_supporters_influemce_num > QIN_isin_supporters_influemce_num }
		}
		retire_character = QIN_Aisin_Gioro_Mianning
		promote_character = QIN_Aisin_Gioro_Isuan
	}
	else_if = {
		log = "[GetDateText]: [Root.GetName]: effect QIN_check_who_is_new_emperror ERROR"
	}
}