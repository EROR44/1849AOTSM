on_actions = {
	
	#Story Event
	
	on_startup = {
		effect = {
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = history.1
			}
			
			set_variable = { var = leaver_number value = 0 }
			
			RUS = { country_event = { id = pol.1 days = 2100 } }
			RUS = { country_event = { id = rusPol.6 days = 30 } }
			KAZ = { country_event = { id = kaz_t_pakt.1 days = 795 } }
			JAP = { country_event = { id = jap.1 days = 120 } }
			FRR = { country_event = { id = fren.11 days = 920 } }
			FRR = { country_event = { id = fren.12 days = 924 } }
			SOS = { country_event = { id = sos.1 days = 951 } }
			BYZ = { country_event = { id = script_event.3 days = 2 } }
			BYZ = { country_event = { id = script_event.7 days = 2 } }
			QIN = { country_event = { id = qin.1 days = 381 } }
			QIN = { country_event = { id = qin.2 days = 811 } }
			CBI = { country_event = { id = CBI.100 days = 254 } }
			723 = { owner = { country_event = { id = crush_event.1 days = 2212 } } }
			
			add_to_array = { global.railway_union_members = PRU }
			add_to_array = { global.railway_union_members = AUS }
			add_to_array = { global.railway_union_members = BAV }
			add_to_array = { global.railway_union_members = FRN }
			add_to_array = { global.railway_union_members = FRR }
			add_to_array = { global.railway_union_members = SLG }
			add_to_array = { global.railway_union_members = MCL }
			add_to_array = { global.railway_union_members = HAN }
			add_to_array = { global.railway_union_members = SAK }
			add_to_array = { global.railway_union_members = TYR }
			add_to_array = { global.railway_union_members = VUR }
			add_to_array = { global.railway_union_members = BAD }
			add_to_array = { global.railway_union_members = HOL }
			add_to_array = { global.railway_union_members = BEL }
			add_to_array = { global.railway_union_members = SWI }
			
			set_variable = { voteyes = 0 }
			set_variable = { novote = 0 }
			set_variable = { voteno = 0 }
			
			add_to_array = { global.german_union_members = PRU }
			add_to_array = { global.german_union_members = HOH }
			add_to_array = { global.german_union_members = AUS }
			add_to_array = { global.german_union_members = LIE }
			add_to_array = { global.german_union_members = FRN }
			add_to_array = { global.german_union_members = ELS }
			add_to_array = { global.german_union_members = BAV }
			add_to_array = { global.german_union_members = KOL }
			add_to_array = { global.german_union_members = SAK }
			add_to_array = { global.german_union_members = TYR }
			add_to_array = { global.german_union_members = MCS }
			add_to_array = { global.german_union_members = LBE }
			add_to_array = { global.german_union_members = HAM }
			add_to_array = { global.german_union_members = BRM }
			add_to_array = { global.german_union_members = WLD }
			add_to_array = { global.german_union_members = WEI }
			add_to_array = { global.german_union_members = MEI }
			add_to_array = { global.german_union_members = HES }
			add_to_array = { global.german_union_members = BAD }
			add_to_array = { global.german_union_members = MCL }
			add_to_array = { global.german_union_members = VUR }
			add_to_array = { global.german_union_members = OLD }
			add_to_array = { global.german_union_members = SLG }
			add_to_array = { global.german_union_members = HLS }
			add_to_array = { global.german_union_members = HAN }
			add_to_array = { global.german_union_members = LUX }
			add_to_array = { global.german_union_members = SWI }
			
			add_to_array = { global.german_union_leader = PRU }
			add_to_array = { global.german_union_leader = AUS }
			add_to_array = { global.german_union_leader = FRN }
			
			add_to_array = { global.german_union_for_pru = HOH }
			add_to_array = { global.german_union_for_pru = FRN }
			add_to_array = { global.german_union_for_pru = HES }
			add_to_array = { global.german_union_for_pru = KOL }
			add_to_array = { global.german_union_for_pru = MCL }
			
			add_to_array = { global.german_union_for_aus = BAV }
			add_to_array = { global.german_union_for_aus = SAK }
			add_to_array = { global.german_union_for_aus = TYR }
			
			add_to_array = { global.german_union_neutrality = LIE }
			add_to_array = { global.german_union_neutrality = ELS }
			add_to_array = { global.german_union_neutrality = MCS }
			add_to_array = { global.german_union_neutrality = LBE }
			add_to_array = { global.german_union_neutrality = HAM }
			add_to_array = { global.german_union_neutrality = BRM }
			add_to_array = { global.german_union_neutrality = WLD }
			add_to_array = { global.german_union_neutrality = WEI }
			add_to_array = { global.german_union_neutrality = MEI }
			add_to_array = { global.german_union_neutrality = BAD }
			add_to_array = { global.german_union_neutrality = VUR }
			add_to_array = { global.german_union_neutrality = OLD }
			add_to_array = { global.german_union_neutrality = SLG }
			add_to_array = { global.german_union_neutrality = HLS }
			add_to_array = { global.german_union_neutrality = HAN }
			add_to_array = { global.german_union_neutrality = LUX }
			add_to_array = { global.german_union_neutrality = SWI }
			
			set_variable = { global.help_aus_1_var = 0 }
			set_variable = { global.help_aus_2_var = 0 }
			set_variable = { global.help_aus_3_var = 0 }
			
			FRR = {
				if = {
					limit = { 
						NOT = { is_historical_focus_on = yes }
					}
					random_list = {
						35 = {
							set_country_flag = FRR_AI_REACTIONIST
						}
						5 = {
							set_country_flag = FRR_AI_AUTHORITARIAN_ALTERNATIVE
						}
						20 = {
							set_country_flag = FRR_AI_AUTHORITARIAN
						}
						30 = {
							set_country_flag = FRR_AI_SOCIALIST
						}
						10 = {
							set_country_flag = FRR_AI_DEMOCRATIC
						}
					}
				}
			}
			PRU = { 
				if = {
					limit = {
						has_game_rule = {
							rule = PRU_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						100 = { PRU = { set_country_flag = PRU_AI_RANDOM_HISTORICAL } }
					}
				}
			}
			BYZ = {
				if = {
					limit = {
						has_game_rule = {
							rule = BYZ_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						100 = { BYZ = { set_country_flag = BYZ_AI_RANDOM_HISTORICAL } }
					}
				}
			}
		}
	}
	
	on_daily = {
		effect = {
			if = {
				limit = {
					has_country_flag = railways_member_flag
					NOT = {
						is_in_array = {
							array = global.railway_union_members
							value = ROOT
						}
					}
				}
				add_to_array = { global.railway_union_members = ROOT }
			}
		}
	}
	
	on_weekly = {
		effect = {	

			if = {
				limit = {
					date > 1853.9.1
					RUS = {
						is_ai = yes
						has_idea = limited_conscription
					}
				}
				RUS = {
					swap_ideas = {
						remove_idea = limited_conscription
						add_idea = extensive_conscription
					}
				}
			}
			if = {
				limit = {
					FRR = {
						is_historical_focus_on = yes
						has_completed_focus = FRA_support_cbi
					}
				}
				FRR = {
					add_timed_idea = {
						idea = FRR_hist_attack_germany
						days = 40			
					}
				}
			}
			if = {
				limit = {
					tag = MON
					has_cosmetic_tag = MON_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				MON = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = MAN
					has_cosmetic_tag = MAN_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				MAN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SHN
					has_cosmetic_tag = SHN_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				SHN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SHA
					has_cosmetic_tag = SHA_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				SHA = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SIC
					has_cosmetic_tag = SIC_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				SIC = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = CHN
					has_cosmetic_tag = CHN_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				CHN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = CND
					has_cosmetic_tag = CND_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				CND = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = GNS
					has_cosmetic_tag = GNS_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				GNS = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SDZ
					has_cosmetic_tag = SDZ_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				SDZ = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = YUN
					has_cosmetic_tag = YUN_QIN_PUPPET	
					NOT = { is_puppet_of = QIN }
				}
				YUN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					RUS = {
						has_more_than_49_ic = yes
						has_idea = RUS_dependence_from_import
					}			
				}
				RUS = { remove_ideas = RUS_dependence_from_import }
			}
			if = { #временная мера
				limit = {
					QIN = {
						has_war_with = TPN
					}			
				}
				QIN ={	
					swap_ideas = { 
						remove_idea = large_country
						add_idea = potential_world_power
					}
				}
			}
		}
	}
	
	on_daily_BYZ = {
		effect = {	
			if = {
				limit = {
					BYZ = {
						has_country_flag = byz_rulling_demmer
					}
				}
				clear_variable = byz_demmer_faction_support
				add_to_variable = { byz_demmer_faction_support = byz_merchants_faction_support }
				add_to_variable = { byz_demmer_faction_support = byz_democrats_faction_support }
				clamp_variable = {
					var = byz_demmer_faction_support
					min = 0
					max = 200
				}
			}
			if = {
				limit = {
					BYZ = {
						has_country_flag = byz_rulling_impgov
					}
				}
				clear_variable = byz_impgov_faction_support
				add_to_variable = { byz_impgov_faction_support = byz_imperial_faction_support }
				add_to_variable = { byz_impgov_faction_support = byz_generals_faction_support }
				clamp_variable = {
					var = byz_impgov_faction_support
					min = 0
					max = 200
				}
			}
		}
	}
	
	on_capitulation = {
		effect = {
			#KAZ capitulation - RUS annex region
			if = {
				limit = {
					tag = KAZ
					RUS = { has_country_flag = RUS_invasion_in_kaz_flag }
				}
				RUS = {
					white_peace = {
						tag = KAZ
						message = KAZ_conquered
					}
					transfer_state = 402
					transfer_state = 404
					transfer_state = 405
					transfer_state = 586
					transfer_state = 587
					clr_country_flag = RUS_invasion_in_kaz_flag
					set_country_flag = RUS_invasion_in_kaz_flag_end
				}
				add_threat = 2
			}
			#HIV capitulation - RUS annex region
			if = {
				limit = {
					tag = HIV
					RUS = { has_country_flag = RUS_invasion_in_hiv_flag }
				}
				RUS = {
					white_peace = {
						tag = HIV
						message = HIV_conquered
					}
					transfer_state = 584
					transfer_state = 585
					clr_country_flag = RUS_invasion_in_hiv_flag
					set_country_flag = RUS_invasion_in_hiv_flag_end
				}
				add_threat = 2
			}
			#BUK capitulation - RUS annex region
			if = {
				limit = {
					tag = BUK
					RUS = { has_country_flag = RUS_invasion_in_buk_flag }
				}
				RUS = {
					white_peace = {
						tag = BUK
						message = BUK_conquered
					}
					transfer_state = 732
					transfer_state = 742
					clr_country_flag = RUS_invasion_in_buk_flag
					set_country_flag = RUS_invasion_in_buk_flag_end
				}
				add_threat = 2
			}
			#SOS capitulation - reformist uprising finished
			if = {
				limit = {
					tag = SOS
					has_global_flag = somali_civil_war 
				}
				SOR = {
					white_peace = {
						tag = SOS
						message = SOS_lose
					}
					remove_ideas = SOR_civil_war
					drop_cosmetic_tag = yes
					transfer_state = 559
					transfer_state = 830
					transfer_state = 910
					transfer_state = 912
				}
				SOS = {
					remove_ideas = SOS_civil_war
					remove_state_core = 268
					remove_state_core = 269
					remove_state_core = 559
					remove_state_core = 830
					remove_state_core = 831
					remove_state_core = 909
					remove_state_core = 910
					remove_state_core = 911
					remove_state_core = 912
				}
				
				add_threat = 2
				clr_global_flag = somali_civil_war		
				set_global_flag = somali_civil_war_end
				news_event = { id = news.136 hours = 24 }
			}
			#SOR capitulation - reformist uprising failed
			if = {
				limit = {
					tag = SOR
					has_global_flag = somali_civil_war 
				}
				SOS = {
					white_peace = {
						tag = SOR
						message = SOR_lose
					}
					remove_ideas = SOS_civil_war
					transfer_state = 268
					transfer_state = 269
					transfer_state = 831
					transfer_state = 909
					transfer_state = 911
				}
				SOR = {
					remove_ideas = SOR_civil_war
					remove_state_core = 268
					remove_state_core = 269
					remove_state_core = 559
					remove_state_core = 830
					remove_state_core = 831
					remove_state_core = 909
					remove_state_core = 910
					remove_state_core = 911
					remove_state_core = 912
				}
				
				add_threat = 2
				clr_global_flag = somali_civil_war		
				set_global_flag = somali_civil_war_end
				news_event = { id = news.137 hours = 24 }
			}
			#TPN capitulation - taypin uprising failed
			if = {
				limit = {
					tag = TPN
					has_global_flag = taypin_uprising_started 
				}				
				QIN = { 
					white_peace = {
						tag = TPN
						message = TPN_lose
					}					
					transfer_state = 591
					transfer_state = 592
					transfer_state = 593
					transfer_state = 596
					transfer_state = 600
					transfer_state = 602
					transfer_state = 606
					transfer_state = 748
					transfer_state = 749
					remove_ideas = QIN_stagnation_of_empire_1 #временная мера, потом вырезать
					remove_ideas = QIN_tpn_uprising 
				}
				TPN = {
					remove_state_core = 325
					remove_state_core = 524
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 597
					remove_state_core = 598
					remove_state_core = 599
					remove_state_core = 600
					remove_state_core = 602
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 606
					remove_state_core = 607
					remove_state_core = 613
					remove_state_core = 614
					remove_state_core = 620
					remove_state_core = 728
					remove_state_core = 743
					remove_state_core = 744
					remove_state_core = 747
					remove_state_core = 748
					remove_state_core = 749
					remove_state_core = 750
					remove_state_core = 751
				}
				if = {
					limit = {
						country_exists = MAN
						MAN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = MAN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SDZ
						SDZ = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SDZ
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SIC
						SIC = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SIC
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = YUN
						YUN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = YUN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = GNS
						GNS = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = GNS
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SHA
						SHA = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SHA
							transfer_troops = no
						}
					}
				}	
				if = {
					limit = {
						country_exists = CHN
						CHN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = CHN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SHN
						SHN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SHN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = CND
						CND = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = CND
							transfer_troops = no
						}
					}
				}
				
				YUN = {
					remove_state_core = 325
					remove_state_core = 747
				}
				MAN = {
					remove_state_core = 328
					remove_state_core = 714
					remove_state_core = 715
					remove_state_core = 716
					remove_state_core = 717
					remove_state_core = 761
					if = {
						limit = {
							408 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 408
						}
					}
					if = {
						limit = {
							409 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 409
						}
					}
					if = {
						limit = {
							560 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 560
						}
					}
				}
				
				SIC = {
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 748
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
				}
				GNS = {
					remove_state_core = 326
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 599
					remove_state_core = 728
					remove_state_core = 729
				}
				SHA = {
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 598
					remove_state_core = 600
					remove_state_core = 606
					remove_state_core = 613
					remove_state_core = 728
					remove_state_core = 749
				}
				CND = {
					remove_state_core = 602
					remove_state_core = 620
					remove_state_core = 750
				}
				SHN = {
					remove_state_core = 607
					remove_state_core = 615
					remove_state_core = 621
					remove_state_core = 622
					remove_state_core = 715
					remove_state_core = 744
				}
				CHN = {
					remove_state_core = 283
					remove_state_core = 604
					remove_state_core = 616
					remove_state_core = 755
					remove_state_core = 756
					remove_state_core = 759
				}
				SDZ = {
					remove_state_core = 287
					remove_state_core = 617
					remove_state_core = 618
					remove_state_core = 619
					remove_state_core = 759
					remove_state_core = 760
				}
				
				if = {
					limit = {
						329 = { is_owned_and_controlled_by = QIN }
						330 = { is_owned_and_controlled_by = QIN }
						612 = { is_owned_and_controlled_by = QIN }
					}
					MON = {
						remove_state_core = 329
						remove_state_core = 330
						remove_state_core = 612
					}
				}
				
				add_threat = 5
				clr_global_flag = taypin_uprising_started
				set_global_flag = taypin_uprising_failed
				news_event = { id = news.147 hours = 24 }
			}
			#QIN capitulation - taypin uprising finished
			if = {
				limit = {
					tag = QIN
					has_global_flag = taypin_uprising_started 
				}				
				TPN = { 
					white_peace = {
						tag = QIN
						message = QIN_lose
					}
				}
				every_country = {
					limit = {
						has_war_with = TPN
						has_country_flag = QIN_war_with_taypin
					}	
					white_peace = TPN
					clr_country_flag = QIN_war_with_taypin
				}
				
				TPN = {
					set_cosmetic_tag = TPN_TRUE_GOVERMENT
					transfer_state = 325
					transfer_state = 326
					transfer_state = 594
					transfer_state = 595
					transfer_state = 597
					transfer_state = 598
					transfer_state = 599
					transfer_state = 602
					transfer_state = 603
					transfer_state = 605
					transfer_state = 607
					transfer_state = 613
					transfer_state = 614
					transfer_state = 620
					transfer_state = 729
					transfer_state = 743
					transfer_state = 744
					transfer_state = 747
					transfer_state = 750
					transfer_state = 751
					transfer_state = 752
					transfer_state = 753
					remove_ideas = TPN_taypin_uprising
				}				
				if = {
					limit = {
						OR = {
							GNS = {
								owns_state = 728 
							}
							QIN = {
								owns_state = 728 
							}
						}
					}
					TPN = {
						transfer_state = 728
					}
				}
				if = {
					limit = {
						QIN = {
							owns_state = 524 
						}
					}
					TPN = {
						transfer_state = 524
					}
				}
				if = {
					limit = {
						TPN = {
							NOT = { owns_state = 596 }
						}	
					}
					TPN = {
						transfer_state = 596
					}
				}

				QIN = {
					set_cosmetic_tag = QIN_LOSE_TPN
					remove_state_core = 325
					remove_state_core = 326
					remove_state_core = 524
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 597
					remove_state_core = 598
					remove_state_core = 599
					remove_state_core = 600
					remove_state_core = 602
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 606
					remove_state_core = 607
					remove_state_core = 613
					remove_state_core = 614
					remove_state_core = 620
					remove_state_core = 728
					remove_state_core = 729
					remove_state_core = 743
					remove_state_core = 744
					remove_state_core = 747
					remove_state_core = 748
					remove_state_core = 749
					remove_state_core = 750
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
					remove_state_core = 826	
					remove_ideas = QIN_stagnation_of_empire_1 #временная мера, потом вырезать
					remove_ideas = QIN_tpn_uprising 
				}
				if = {
					limit = {
						QIN = { has_idea = potential_world_power }
					}
					QIN = { 
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				
				YUN = {
					remove_state_core = 325
					remove_state_core = 747
				}
				MAN = {
					remove_state_core = 328
					remove_state_core = 714
					remove_state_core = 715
					remove_state_core = 716
					remove_state_core = 717
					remove_state_core = 761
					if = {
						limit = {
							408 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 408
						}
					}
					if = {
						limit = {
							409 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 409
						}
					}
					if = {
						limit = {
							560 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 560
						}
					}
				}
				SIC = {
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 748
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
				}
				GNS = {
					remove_state_core = 326
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 599
					remove_state_core = 728
					remove_state_core = 729
				}
				SHA = {
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 598
					remove_state_core = 600
					remove_state_core = 606
					remove_state_core = 613
					remove_state_core = 728
					remove_state_core = 749
				}
				CND = {
					remove_state_core = 602
					remove_state_core = 620
					remove_state_core = 750
				}
				SHN = {
					remove_state_core = 607
					remove_state_core = 744
				}
				
				if = {
					limit = {
						MAN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						annex_country = {
							target = MAN
							transfer_troops = yes
						}
					}
				}
				QIN = {
					set_capital = { state = 716 }
				}
				if = {
					limit = {
						MON = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = MON
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						SDZ = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = SDZ
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						SHN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = SHN
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						CHN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = CHN
							autonomy_state = autonomy_free
						}
					}
				}
				
				if = {
					limit = {
						MON = {
							NOT = { exists = yes }
						}
						329 = { is_owned_and_controlled_by = QIN }
						330 = { is_owned_and_controlled_by = QIN }
						612 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = MON
					}
				}
				if = {
					limit = {
						SDZ = {
							NOT = { exists = yes }
						}
						287 = { is_owned_and_controlled_by = QIN }
						617 = { is_owned_and_controlled_by = QIN }
						618 = { is_owned_and_controlled_by = QIN }
						619 = { is_owned_and_controlled_by = QIN }
						759 = { is_owned_and_controlled_by = QIN }
						760 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = SDZ
					}
				}
				if = {
					limit = {
						CHN = {
							NOT = { exists = yes }
						}
						283 = { is_owned_and_controlled_by = QIN }
						604 = { is_owned_and_controlled_by = QIN }
						616 = { is_owned_and_controlled_by = QIN }
						754 = { is_owned_and_controlled_by = QIN }
						755 = { is_owned_and_controlled_by = QIN }
						756 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = CHN
					}
				}
				if = {
					limit = {
						SHN = {
							NOT = { exists = yes }
						}
						615 = { is_owned_and_controlled_by = QIN }
						621 = { is_owned_and_controlled_by = QIN }
						622 = { is_owned_and_controlled_by = QIN }
						746 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = SHN
					}
				}
				
				if = {
					limit = {
						MON = {
							has_idea = little_country
						}
					}
					MON = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						SDZ = {
							has_idea = little_country
						}
					}
					SDZ = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						SHN = {
							has_idea = little_country
						}
					}
					SHN = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						CHN = {
							has_idea = little_country
						}
					}
					CHN = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				
				add_threat = 5
				clr_global_flag = taypin_uprising_started
				set_global_flag = taypin_uprising_finished
				news_event = { id = news.146 hours = 24 }
			}
			#ALG capitulation
			if = {
				limit = {
					tag = ALG
					FRR = { has_country_flag = FRR_invasion_in_algeria }
				}				
				FRR = { 
					white_peace = {
						tag = ALG
						message = French_win_ALG
					}
					clr_country_flag = FRR_invasion_in_algeria
					set_country_flag = FRR_invasion_in_algeria_end 
				}
				FRR = {
					transfer_state = 459
					transfer_state = 460
					transfer_state = 513
					transfer_state = 514
					transfer_state = 809
#					annex_country = {
#						target = ALG
#						transfer_troops = no
#					}
				}
				add_named_threat = { 
					threat = 5 
					name = FRR_algerian_invasion
				}
				news_event = { id = news.42 hours = 24 }
			}		
			if = {#French annexation Tunisia
				limit = {
					tag = TUN
					FRR = { has_country_flag = FRR_tunisian_company }
				}				
				FRR = { 
					white_peace = {
						tag = TUN
						message = French_win_TUN
					}
					clr_country_flag = FRR_tunisian_company
					set_country_flag = FRR_tunisian_company_end 
				}
				FRR = {
					annex_country = {
						target = TUN
						transfer_troops = no
					}
				}
			}
			#MAV capitulation
			if = {
				limit = {
					tag = MAV
					FRR = { has_country_flag = FRR_mauvritanian_company }
				}				
				FRR = {
					white_peace = {
						tag = MAV
						message = French_win_MAV
					}
					clr_country_flag = FRR_mauvritanian_company
					set_country_flag = FRR_mauvritanian_company_end 
				}
				FRR = {
					annex_country = {
						target = MAV
						transfer_troops = no
					}
				}
			}
			#CRE capitulation
			if = {
				limit = {
					tag = CRE
					CRE = {
						has_war_with = VIN
					}
					VIN = {
						has_country_flag = VIN_vs_CRE
					}
				}
				VIN = {
					white_peace = {
						tag = CRE
						message = VIN_win_CRE
					}
				}
				VIN = {
					transfer_state = 466
					transfer_state = 682
				}
				VIN = {
					clr_country_flag = VIN_vs_CRE
				}
			}
			#TUK capitulation
			if = {
				limit = {
					tag = TUK
					OR = {
						TUK = {
							has_war_with = JAP
						}
						TUK = {
							has_war_with = JAS
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						JAP = {
							controls_state = 282
						}
					}
					JAP = {
						white_peace = {
							tag = TUK
							message = JAP_win_TUK
						}
					}
					TUK = {
						transfer_navy = {
							target = JAP
						}
					}
					JAP = {
						annex_country = {
							target = TUK
							transfer_troops = no
						}
					}
					TUK = {
						remove_state_core = 282
						remove_state_core = 638
						remove_state_core = 648
					}
				}
				if = {
					limit = {
						JAS = {
							controls_state = 282
						}
					}
					JAS = {
						white_peace = {
							tag = TUK
							message = JAS_win_TUK
						}
					}
					TUK = {
						transfer_navy = {
							target = JAS
						}
					}
					JAS = {
						annex_country = {
							target = TUK
							transfer_troops = no
						}
					}
					TUK = {
						remove_state_core = 282
						remove_state_core = 638
						remove_state_core = 648
					}
				}
			}
			#JAP capitulation
			if = {
				limit = {
					tag = JAP
					OR = {
						JAP = {
							has_war_with = TUK
						}
						JAP = {
							has_war_with = JAS
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						TUK = {
							controls_state = 531
						}
					}
					TUK = {
						white_peace = {
							tag = JAP
							message = TUK_win_JAP
						}
					}
					JAP = {
						transfer_navy = {
							target = TUK
						}
					}
					TUK = {
						annex_country = {
							target = JAP
							transfer_troops = no
						}
					}
					JAP = {
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 535
						remove_state_core = 645
						remove_state_core = 646
					}
				}
				if = {
					limit = {
						JAS = {
							controls_state = 531
						}
					}
					JAS = {
						white_peace = {
							tag = JAP
							message = JAS_win_JAP
						}
					}
					JAP = {
						transfer_navy = {
							target = JAS
						}
					}
					JAS = {
						annex_country = {
							target = JAP
							transfer_troops = no
						}
					}
					JAP = {
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 535
						remove_state_core = 645
						remove_state_core = 646
					}
				}
			}
			#JAS capitulation
			if = {
				limit = {
					tag = JAS
					OR = {
						JAS = {
							has_war_with = TUK
						}
						JAS = {
							has_war_with = JAP
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						TUK = {
							controls_state = 533
						}
					}
					TUK = {
						white_peace = {
							tag = JAS
							message = TUK_win_JAS
						}
					}
					JAS = {
						transfer_navy = {
							target = TUK
						}
					}
					TUK = {
						annex_country = {
							target = JAS
							transfer_troops = no
						}
					}
					JAS = {
						remove_state_core = 282
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 533
						remove_state_core = 534
						remove_state_core = 535
						remove_state_core = 536
						remove_state_core = 537
						remove_state_core = 555
						remove_state_core = 638
						remove_state_core = 645
						remove_state_core = 646
						remove_state_core = 648
						remove_state_core = 655
					}
				}
				if = {
					limit = {
						JAP = {
							controls_state = 533
						}
					}
					JAP = {
						white_peace = {
							tag = JAS
							message = JAP_win_JAS
						}
					}
					JAS = {
						transfer_navy = {
							target = JAP
						}
					}
					JAP = {
						annex_country = {
							target = JAS
							transfer_troops = no
						}
					}
					JAS = {
						remove_state_core = 282
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 533
						remove_state_core = 534
						remove_state_core = 535
						remove_state_core = 536
						remove_state_core = 537
						remove_state_core = 555
						remove_state_core = 638
						remove_state_core = 645
						remove_state_core = 646
						remove_state_core = 648
						remove_state_core = 655
					}
				}
			}
			#GLA capitulation
			if = {
				limit = {
					tag = GLA
					OR = {
						AND = {
							GLA = {
								has_country_flag = revenge_for_hungary_gla
							}
							has_global_flag = russian_capitulation
						}
						GLA = {
							is_in_faction_with = RUS
						}
					}
				}
				PRU = {
					white_peace = {
						tag = GLA
						message = PRU_win_GLA
					}
				}
				if = {
					limit = {
						GLA = {
							has_country_flag = revenge_for_hungary_gla
						}
					}
					GLA = {
						clr_country_flag = revenge_for_hungary_gla
					}
				}
				if = {
					limit = {
						GLA = {
							has_idea = russian_help
						}
					}
					GLA = {
						remove_ideas = russian_help
					}
				}
				PRU = {
					transfer_state = 80
					transfer_state = 89
					transfer_state = 91
				}
				HUN = {
					transfer_state = 71
					transfer_state = 73
				}
				PLH = {
					transfer_state = 88
					add_state_core = 88
				}
			}
			#VLH capitulation
			if = {
				limit = {
					tag = VLH
					OR = {
						AND = {
							VLH = {
								has_country_flag = revenge_for_hungary_vlh
							}
							has_global_flag = russian_capitulation
						}
						VLH = {
							is_in_faction_with = RUS
						}
					}
				}
				PRU = {
					white_peace = {
						tag = VLH
						message = PRU_win_VLH
					}
				}
				if = {
					limit = {
						VLH = {
							has_country_flag = revenge_for_hungary_vlh
						}
					}
					VLH = {
						clr_country_flag = revenge_for_hungary_vlh
					}
				}
				if = {
					limit = {
						VLH = {
							has_idea = russian_help
						}
					}
					VLH = {
						remove_ideas = russian_help
					}
				}
				PRU = {
					transfer_state = 78
					if = {
						limit = {
							NOT = {
								BYZ = {
									is_in_faction_with = PRU
								}
							}
						}
						transfer_state = 766
					}
				}
				HUN = {
					transfer_state = 76
					transfer_state = 82
					transfer_state = 83
					transfer_state = 84
				}
				BYZ = {
					set_autonomy = {
						target = VLH
						autonomy_state = autonomy_aotsm_province
						end_wars = yes
						end_civil_wars = yes
					}
				}
				VLH = {
					set_cosmetic_tag = BYZ_ROM
				}
				VLH = {
					set_country_flag = VLHBYZ
				}
				if = {
					limit = {
						BYZ = {
							is_in_faction_with = PRU
						}
					}
					BCH = {
						transfer_state = 766
						add_state_core = 766
					}
				}
			}
			#KOR capitulation
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			#PHI capitulation
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			#VIE capitulation
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			#KHM capitulation
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			#RAT capitulation
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = JAP
									is_subject_of = JAP
								}
							}
						}
					}
					JAP = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = JAS
									is_subject_of = JAS
								}
							}
						}
					}
					JAS = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = TUK
									is_subject_of = TUK
								}
							}
						}
					}
					TUK = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			#IND capitulation
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				JAP = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				JAS = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				TUK = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			#FRK capitulation
			if = {
				limit = {
					tag = FRK
					NIS = {
						has_country_flag = nis_vs_frk
					}
					FRK = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = FRK
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_frk
				}
			}
			#CNK capitulation
			if = {
				limit = {
					tag = CNK
					NIS = {
						has_country_flag = nis_vs_cnk
					}
					CNK = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = CNK
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_cnk
				}
			}
			#AID capitulation
			if = {
				limit = {
					tag = AID
					NIS = {
						has_country_flag = nis_vs_aid
					}
					AID = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = AID
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_aid
				}
			}
			#UTA capitulation
			if = {
				limit = {
					tag = UTA
					NIS = {
						has_country_flag = nis_vs_uta
					}
					UTA = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = UTA
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_uta
				}
			}
			#NAV capitulation
			if = {
				limit = {
					tag = NAV
					NIS = {
						has_country_flag = nis_vs_nav
					}
					NAV = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = NAV
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_nav
				}
			}
			#FRR capitulation 
			if = {
				limit = {
					tag = FRR
					has_global_flag = firts_world_war
					FRR = {
						has_war_with = PRU
					}
				}
				if = {
					limit = {
						country_exists  = JAP
					}
					JAP = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						country_exists  = JAS
					}
					JAS = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						country_exists  = TUK
					}
					TUK = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						FRR = {
							has_war_with = PRU
						}
					}
					PRU = {
						if = {
							limit = {
								FRR = {
									owns_state = 641
								}
							}
							transfer_state = 641
						}
					}
					PRU = {
						transfer_state = 862
					}
					FRA = {
						transfer_state = 15
						add_state_core = 15
						transfer_state = 16
						add_state_core = 16
						transfer_state = 17
						add_state_core = 17
						transfer_state = 18
						add_state_core = 18
						transfer_state = 24
						add_state_core = 24
						transfer_state = 27
						add_state_core = 27
						transfer_state = 29
						add_state_core = 29
						transfer_state = 30
						add_state_core = 30
						transfer_state = 785
						add_state_core = 785
						add_state_core = 861
					}
					BRE = {
						transfer_state = 14
					}
					PRU = {
						add_to_faction = FRA
						add_to_faction = BRE
					}
					if = {
						limit = {
							HOL = {
								is_in_faction_with = PRU
							}
						}
						HOL = {
							transfer_state = 861
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 861
							}
						}
						FRA = {
							transfer_state = 861
						}
					}
					FRR = {
						remove_state_claim = 28
						remove_state_core = 28
						remove_state_claim = 828
						remove_state_core = 828
						remove_state_core = 862
					}
				}
				if = {
					limit = {
						FRR = {
							has_war_with = BYZ
						}
					}
					BYZ = {
						transfer_state = 713
						transfer_state = 832
						transfer_state = 833
					}
					if = {
						limit = {
							OR = {
								SAR = {
									is_subject_of = BYZ
								}
								SAR = {
									is_in_faction_with = PRU
								}
							}
						}
						SAR = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					if = {
						limit = {
							OR = {
								PAP = {
									is_subject_of = BYZ
								}
								PAP = {
									is_in_faction_with = PRU
								}
							}
						}
						PAP = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					if = {
						limit = {
							OR = {
								SYC = {
									is_subject_of = BYZ
								}
								SYC = {
									is_in_faction_with = PRU
								}
							}
						}
						SYC = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					GAL = {
						transfer_state = 19
						add_state_core = 19
						transfer_state = 20
						add_state_core = 20
						transfer_state = 22
						add_state_core = 22
						transfer_state = 23
						add_state_core = 23
						transfer_state = 25
						add_state_core = 25
						transfer_state = 26
						add_state_core = 26
						transfer_state = 31
						add_state_core = 31
						transfer_state = 33
						add_state_core = 33
						transfer_state = 806
						add_state_core = 806
					}
					BYZ = {
						set_autonomy = {
							target = GAL
							autonomy_state = autonomy_aotsm_province
							end_wars = no
							end_civil_wars = no
						}
					}
					GAL = {
						set_politics = { ruling_party = authoritarian elections_allowed = no }
						set_popularities = {
							democratic = 3
							socialism = 27
							reactionist = 29
							authoritarian = 41
						}
					}
					GAL = {
						set_cosmetic_tag = BYZ_GAL
						set_country_flag = GALBYZ
					}
					BYZ = {
						if = {
							limit = {
								FRR = {
									owns_state = 1
								}
								NOT = {
									SAR = {
										is_in_faction_with = PRU
									}
								}
							}
							SAR = {
								transfer_state = 1
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 1
								}
							}
							transfer_state = 1
						}
						if = {
							limit = {
								FRR = {
									owns_state = 21
								}
							}
							GAL = {
								transfer_state = 21
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 32
								}
							}
							GAL = {
								transfer_state = 32
							}
						}
					}
					FRR = {
						remove_state_core = 1
						remove_state_core = 21
						remove_state_core = 32
					}
					if = {
						limit = {
							OR = {
								FRR = {
									owns_state = 543
								}
								MAD = {
									is_subject_of = FRR
								}
							}
						}
						ZUL = {
							transfer_state = 543
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 706
							}
						}
						ZUL = {
							transfer_state = 706
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 707
							}
						}
						ZUL = {
							transfer_state = 707
						}
					}
					if = {
						limit = {
							OR = {
								FRR = {
									owns_state = 708
								}
								MAD = {
									is_subject_of = FRR
								}
							}
						}
						ZUL = {
							transfer_state = 708
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 845
							}
						}
						ZUL = {
							transfer_state = 845
						}
					}
					if = {
						limit = {
							OR = {
								NWA = {
									owns_state = 458
								}
								FRR = {
									owns_state = 458
								}
							}
						}
						CPT = {
							transfer_state = 458
						}
					}
					if = {
						limit = {
							OR = {
								NWA = {
									owns_state = 665
								}
								FRR = {
									owns_state = 665
								}
							}
						}
						CPT = {
							transfer_state = 665
						}
					}
				}
				if = {
					limit = {
						NWA = {
							owns_state = 459
						}
					}
					FRR = {
						transfer_state = 459
						add_state_core = 459
						set_capital = {
							state = 459
						}
						set_province_name = {
							id = 1145
							name = ALGER_name
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 459
						}
					}
					FRR = {
						add_state_core = 459
						set_capital = {
							state = 459
						}
						set_province_name = {
							id = 1145
							name = ALGER_name
						}
					}
				}
				#if not PRU
				if = {
					limit = {
						FRR = {
							owns_state = 14
						}
					}
					GAL = {
						transfer_state = 14
						add_state_core = 14
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 15
						}
					}
					GAL = {
						transfer_state = 15
						add_state_core = 15
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 16
						}
					}
					GAL = {
						transfer_state = 16
						add_state_core = 16
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 17
						}
					}
					GAL = {
						transfer_state = 17
						add_state_core = 17
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 18
						}
					}
					GAL = {
						transfer_state = 18
						add_state_core = 18
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 24
						}
					}
					GAL = {
						transfer_state = 24
						add_state_core = 24
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 27
						}
					}
					GAL = {
						transfer_state = 27
						add_state_core = 27
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 29
						}
					}
					GAL = {
						transfer_state = 29
						add_state_core = 29
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 30
						}
					}
					GAL = {
						transfer_state = 30
						add_state_core = 30
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 785
						}
					}
					GAL = {
						transfer_state = 785
						add_state_core = 785
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 861
						}
					}
					GAL = {
						transfer_state = 861
						add_state_core = 861
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 862
						}
					}
					GAL = {
						transfer_state = 862
						add_state_core = 862
					}
				}
				#If not BYZ
				if = {
					limit = {
						FRR = {
							owns_state = 1
						}
					}
					FRA = {
						transfer_state = 1
						add_state_core = 1
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 19
						}
					}
					FRA = {
						transfer_state = 19
						add_state_core = 19
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 20
						}
					}
					FRA = {
						transfer_state = 20
						add_state_core = 20
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 21
						}
					}
					FRA = {
						transfer_state = 21
						add_state_core = 21
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 22
						}
					}
					FRA = {
						transfer_state = 22
						add_state_core = 22
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 23
						}
					}
					FRA = {
						transfer_state = 23
						add_state_core = 23
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 25
						}
					}
					FRA = {
						transfer_state = 25
						add_state_core = 25
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 26
						}
					}
					FRA = {
						transfer_state = 26
						add_state_core = 26
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 31
						}
					}
					FRA = {
						transfer_state = 31
						add_state_core = 31
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 32
						}
					}
					FRA = {
						transfer_state = 32
						add_state_core = 32
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 33
						}
					}
					FRA = {
						transfer_state = 33
						add_state_core = 33
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 806
						}
					}
					FRA = {
						transfer_state = 806
						add_state_core = 806
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 832
						}
					}
					if = {
						limit = {
							country_exists = SOS
						}
						SOS = {
							transfer_state = 832
						}	
					}
					if = {
						limit = {
							country_exists = SOR
						}
						SOR = {
							transfer_state = 832
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 833
						}
					}
					if = {
						limit = {
							country_exists = SOS
						}
						SOS = {
							transfer_state = 833
						}	
					}
					if = {
						limit = {
							country_exists = SOR
						}
						SOR = {
							transfer_state = 833
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 706
						}
					}
					MAD = {
						transfer_state = 706
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 707
						}
					}
					MAD = {
						transfer_state = 707
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 713
						}
					}
					MAD = {
						transfer_state = 713
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 845
						}
					}
					MAD = {
						transfer_state = 845
					}
				}
				FRR = {
					add_state_core = 460
					add_state_core = 513
					if = {
						limit = {
							country_exists = NWA
						}
						NWA = {
							transfer_navy = {
								target = FRR
							}
						}
						annex_country = {
							target = NWA
							transfer_troops = yes
						}
					}
				}
				if = {
					limit = {
						FRA = {
							has_idea = world_power
						}
					}
					FRA = {
						swap_ideas = {
							remove_idea = world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						FRA = {
							has_idea = potential_world_power
						}
					}
					FRA = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						country_exists = BRE
					}
					FRR = {
						transfer_units_fraction= {
							target = BRE
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.10
							air_ratio = 0.0
						}
					}
					BRE = {
						load_oob = "BRE_army"
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRR = {
						transfer_units_fraction= {
							target = FRA
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.40
							air_ratio = 0.0
						}
					}
					FRA = {
						load_oob = "FRA_army"
					}
				}
				if = {
					limit = {
						country_exists = GAL
					}
					FRR = {
						transfer_units_fraction= {
							target = GAL
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.40
							air_ratio = 0.0
						}
					}
					GAL = {
						load_oob = "GAL_army"
					}
				}
				BRE = {
					inherit_technology = FRR
				}
				FRA = {
					inherit_technology = FRR
				}
				GAL = {
					inherit_technology = FRR
				}
				FRR = {
					leave_faction = yes
				}
				every_country = {
					limit = {
						has_war_with = FRR
					}
					white_peace = FRR
				}
				set_global_flag = france_capitulation
				news_event = news.79
			}
			#CBI capitulation
			if = {
				limit = {
					tag = CBI
					has_global_flag = firts_world_war
					CBI = {
						has_war_with = PRU
					}
					NOT = {
						has_global_flag = cbi_capitulation
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = NEN
						}
					}
					NEN = {
						transfer_state = 261
						transfer_state = 357
						transfer_state = 358
						transfer_state = 359
						transfer_state = 360
						transfer_state = 361
						transfer_state = 362
						transfer_state = 363
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = BAS
						}
					}
					BAS = {
						transfer_state = 284
						transfer_state = 285
						transfer_state = 517
						transfer_state = 518
						transfer_state = 521
						transfer_state = 523
						transfer_state = 634
						transfer_state = 635
						transfer_state = 723
						transfer_state = 868
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = IND
						}
					}
					IND = {
						transfer_state = 711
					}
				}
				if = {
					limit = {
						MAT = {
							is_puppet_of = PRU
						}
						CBI = {
							has_war_with = PRU
						}
					}
					MAT = {
						transfer_state = 826
						add_state_core = 826
						transfer_state = 841
						add_state_core = 841
						transfer_state = 842
						add_state_core = 842
						transfer_state = 843
						add_state_core = 843
						transfer_state = 844
						add_state_core = 844
					}
				}
				if = {
					limit = {
						NOT = {
							MAT = {
								is_puppet_of = PRU
							}
						}
						CBI = {
							has_war_with = PRU
						}
					}
					PRU = {
						transfer_state = 826
						transfer_state = 841
						transfer_state = 842
						transfer_state = 843
						transfer_state = 844
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = PRU
						}
					}
					CBI = {
						set_autonomy = {
							target = IRE
							autonomy_state = autonomy_free
							end_wars = no
							end_civil_wars = no
						}
					}
					IRE = {
						leave_faction = yes
						remove_ideas = CBI_free_irland
					}
					if = {
						limit = {
							NOT = {
								country_exists = IRE
							}
						}
						if = {
							limit = {
								113 = {
									owner = {
										OR = {
											tag = CBI
											is_subject_of = CBI
											is_in_faction_with = CBI
										}
									}
								}
							}
							IRE = {
								transfer_state = 113
								add_state_core = 113
							}
							CBI = {
								remove_state_core = 113
							}
						}
						if = {
							limit = {
								119 = {
									owner = {
										OR = {
											tag = CBI
											is_subject_of = CBI
											is_in_faction_with = CBI
										}
									}
								}
							}
							IRE = {
								transfer_state = 119
								add_state_core = 119
							}
							CBI = {
								remove_state_core = 119
							}
						}
						if = {
							limit = {
								134 = {
									owner = {
										OR = {
											tag = CBI
											is_subject_of = CBI
											is_in_faction_with = CBI
										}
									}
								}
							}
							IRE = {
								transfer_state = 134
								add_state_core = 134
							}
							CBI = {
								remove_state_core = 134
							}
						}
						if = {
							limit = {
								135 = {
									owner = {
										OR = {
											tag = CBI
											is_subject_of = CBI
											is_in_faction_with = CBI
										}
									}
								}
							}
							IRE = {
								transfer_state = 135
								add_state_core = 135
							}
							CBI = {
								remove_state_core = 135
							}
						}
					}
					if = {
						limit = {
							NOT = {
								IRE = {
									controls_state = 119
								}
							}
						}
						IRE = {
							transfer_state = 119
							add_state_core = 119
						}
						CBI = {
							remove_state_core = 119
						}
					}
					every_country = {
						limit = {
							has_war_with = IRE
						}
						white_peace = IRE
					}
					PRU = {
						add_to_faction = IRE
					}
					CBI = {
						remove_state_core = 113
						remove_state_core = 119
						remove_state_core = 134
						remove_state_core = 135
					}
					PRU = {
						transfer_state = 299
						transfer_state = 696
						transfer_state = 703
						transfer_state = 704
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = BYZ
						}
					}
					BYZ = {
						transfer_state = 123
						transfer_state = 709
						transfer_state = 710
					}
					CBI = {
						remove_state_core = 123
					}
					ZUL = {
						transfer_state = 681
					}
					RIT = {
						annex_country = {
							target = OIC
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = SCA
						}
						NOT = {
							VIN = {
								has_country_flag = vin_new_land
							}
						}
					}
					VIN = { 
						transfer_state = 276 
						transfer_state = 464
						transfer_state = 465
						transfer_state = 468
					}
					VIN = {
						set_country_flag = vin_new_land
					}
				}
				CBI = {
					set_autonomy = {
						target = NEN
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				NEN = {
					leave_faction = yes
				}
				NEN = {
					every_country = {
						limit = {
							has_war_with = NEN
						}
						white_peace = NEN
					}
					transfer_state = 696
				}
				if = {
					limit = {
						NOT = {
							OR = {
								AND = {
									CBI = {
										has_war_with = JAP
									}
									country_exists = JAP
								}
								AND = {
									CBI = {
										has_war_with = JAS
									}
									country_exists = JAS
								}
								AND = {
									CBI = {
										has_war_with = TUK
									}
									country_exists = TUK
								}
							}
						}
					}
					CBI = {
						set_autonomy = {
							target = BAS
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BAS = {
						every_country = {
							limit = {
								has_war_with = BAS
							}
							white_peace = BAS
						}
					}
					BAS = {
						leave_faction = yes
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = JAP
						}
						country_exists  = JAP
					}
					JAP = {
						transfer_state = 630
						transfer_state = 632
						transfer_state = 633
						transfer_state = 634
						transfer_state = 635
						transfer_state = 643
						transfer_state = 726
						transfer_state = 727
						set_autonomy = {
							target = BAS
							autonomy_state = autonomy_occupationzone
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = JAS
						}
						country_exists  = JAS
					}
					JAS = {
						transfer_state = 630
						transfer_state = 632
						transfer_state = 633
						transfer_state = 634
						transfer_state = 635
						transfer_state = 643
						transfer_state = 726
						transfer_state = 727
						set_autonomy = {
							target = BAS
							autonomy_state = autonomy_occupationzone
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						CBI = {
							has_war_with = TUK
						}
						country_exists  = TUK
					}
					TUK = {
						transfer_state = 630
						transfer_state = 632
						transfer_state = 633
						transfer_state = 634
						transfer_state = 635
						transfer_state = 643
						transfer_state = 726
						transfer_state = 727
						set_autonomy = {
							target = BAS
							autonomy_state = autonomy_occupationzone
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = prt_capitulation
						}
					}
					PRT = {
						set_faction_leader = yes
					}
				}
				CBI = {
					transfer_units_fraction= {
						target = PRU
						size = 0.0
						stockpile_ratio = 0.0
						army_ratio = 0.0
						navy_ratio = 0.85
						air_ratio = 0.0
					}
				}
				MEN = {
					transfer_state = 866
				}
				CBI = {
					transfer_units_fraction= {
						target = MEN
						size = 0.0
						stockpile_ratio = 0.0
						army_ratio = 0.90
						navy_ratio = 0.0
						air_ratio = 0.0
					}
					annex_country = {
						target = MEN
						transfer_troops = no
					}
				}
				CBI = {
					annex_country = {
						target = BRI
						transfer_troops = no
					}
				}
				CBI = {
					annex_country = {
						target = WAL
						transfer_troops = no
					}
				}
				CBI = {
					annex_country = {
						target = SCO
						transfer_troops = no
					}
				}
				CBI = {
					add_manpower = -1000000
				}
				if = {
					limit = {
						CBI = {
							has_idea = scraping_the_barrel
						}
					}
					swap_ideas = {
						remove_idea = scraping_the_barrel
						add_idea = disarmed_nation
					}
				}
				if = {
					limit = {
						CBI = {
							has_idea = all_adults_serve
						}
					}
					swap_ideas = {
						remove_idea = all_adults_serve
						add_idea = disarmed_nation
					}
				}
				if = {
					limit = {
						CBI = {
							has_idea = service_by_requirement
						}
					}
					swap_ideas = {
						remove_idea = service_by_requirement
						add_idea = disarmed_nation
					}
				}
				if = {
					limit = {
						CBI = {
							has_idea = extensive_conscription
						}
					}
					swap_ideas = {
						remove_idea = extensive_conscription
						add_idea = disarmed_nation
					}
				}
				if = {
					limit = {
						CBI = {
							has_idea = limited_conscription
						}
					}
					swap_ideas = {
						remove_idea = limited_conscription
						add_idea = disarmed_nation
					}
				}
				if = {
					limit = {
						CBI = {
							has_idea = volunteer_only
						}
					}
					swap_ideas = {
						remove_idea = volunteer_only
						add_idea = disarmed_nation
					}
				}
				CBI = {
					add_war_support = -2.00
				}
				CBI = {
					leave_faction = yes
				}
				CBI = {
					every_country = {
						limit = {
							has_war_with = CBI
						}
						white_peace = CBI
					}
				}
				set_global_flag = cbi_capitulation
				news_event = news.77
			}
			#PRT capitulation
			if = {
				limit = {
					tag = PRT
					has_global_flag = firts_world_war
					OR = {
						PRT = {
							has_war_with = PRU
						}
						PRT = {
							has_war_with = BYZ
						}
					}
					NOT = {
						has_global_flag = prt_capitulation
					}
				}
				if = {
					limit = {
						MAT = {
							is_puppet_of = PRU
						}
						PRT = {
							has_war_with = PRU
						}
					}
					MAT = {
						transfer_state = 540
						add_state_core = 540
						transfer_state = 796
						add_state_core = 796
						transfer_state = 825
						add_state_core = 825
						transfer_state = 839
						add_state_core = 839
						transfer_state = 847
						add_state_core = 847
					}
				}
				if = {
					limit = {
						NOT = {
							MAT = {
								is_puppet_of = PRU
							}
						}
						PRT = {
							has_war_with = PRU
						}
					}
					PRU = {
						transfer_state = 540
						transfer_state = 796
						transfer_state = 825
						transfer_state = 839
						transfer_state = 847
					}
				}
				if = {
					limit = {
						PRT = {
							has_war_with = PRU
						}
					}
					PRU = {
						transfer_state = 691
						transfer_state = 694
						transfer_state = 702
					}
				}
				if = {
					limit = {
						PRT = {
							has_war_with = BYZ
						}
					}
					BYZ = {
						if = {
							limit = {
								FRR = {
									owns_state = 712
								}
							}
							transfer_state = 712
						}
					}
					ZUL = {
						transfer_state = 846
						transfer_state = 850
					}
				}
				if = {
					limit = {
						PRT = {
							has_war_with = IND
						}
					}
					IND = {
						transfer_state = 712
						transfer_state = 721
					}
				}
				if = {
					limit = {
						OR = {
							PRT = {
								has_war_with = JAP
							}
							PRT = {
								has_war_with = JAS
							}
							PRT = {
								has_war_with = TUK
							}
						}
					}
					if = {
						limit = {
							PRT = {
								has_war_with = JAP
							}
						}
						JAP = {
							transfer_state = 270
							transfer_state = 629
							transfer_state = 630
							transfer_state = 631
							transfer_state = 636
							transfer_state = 649
							transfer_state = 725
							transfer_state = 734
							transfer_state = 737
							set_autonomy = {
								target = PAS
								autonomy_state = autonomy_occupationzone
								end_wars = yes
								end_civil_wars = yes
							}
						}
						NIS = {
							annex_country = {
								target = SON
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							PRT = {
								has_war_with = JAS
							}
						}
						JAS = {
							transfer_state = 270
							transfer_state = 629
							transfer_state = 630
							transfer_state = 631
							transfer_state = 636
							transfer_state = 649
							transfer_state = 725
							transfer_state = 734
							transfer_state = 737
							set_autonomy = {
								target = PAS
								autonomy_state = autonomy_occupationzone
								end_wars = yes
								end_civil_wars = yes
							}
						}
						NIS = {
							annex_country = {
								target = SON
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							PRT = {
								has_war_with = TUK
							}
						}
						TUK = {
							transfer_state = 270
							transfer_state = 629
							transfer_state = 630
							transfer_state = 631
							transfer_state = 636
							transfer_state = 649
							transfer_state = 725
							transfer_state = 734
							transfer_state = 737
							set_autonomy = {
								target = PAS
								autonomy_state = autonomy_occupationzone
								end_wars = yes
								end_civil_wars = yes
							}
						}
						NIS = {
							annex_country = {
								target = SON
								transfer_troops = no
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							OR = {
								PRT = {
									has_war_with = JAP
								}
								PRT = {
									has_war_with = JAS
								}
								PRT = {
									has_war_with = TUK
								}
							}
						}
					}
					PRT = {
						set_autonomy = {
							target = PAS
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
					every_country = {
						limit = {
							has_war_with = PAS
						}
						white_peace = PAS
					}
					PAS = {
						leave_faction = yes
					}
				}
				PRT = {
					leave_faction = yes
				}
				PRT = {
					every_country = {
						limit = {
							has_war_with = PRT
						}
						white_peace = PRT
					}
				}
				set_global_flag = prt_capitulation
				news_event = news.78
			}
			if = {
				limit = {
					tag = RUS
					has_global_flag = firts_world_war
					OR = {
						RUS = {
							has_war_with = PRU
						}
						RUS = {
							has_war_with = BYZ
						}
					}
					NOT = {
						has_global_flag = russian_capitulation
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = POL
						}
					}
					PLH = {
						if = {
							limit = {
								RUS = {
									owns_state = 10
								}
							}
							transfer_state = 10
							RUS = {
								remove_state_core = 10
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 87
								}
							}
							transfer_state = 87
							RUS = {
								remove_state_core = 87
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 90
								}
							}
							transfer_state = 90
							RUS = {
								remove_state_core = 90
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 92
								}
							}
							transfer_state = 92
							RUS = {
								remove_state_core = 92
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 97
								}
							}
							transfer_state = 97
							RUS = {
								remove_state_core = 97
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 98
								}
							}
							transfer_state = 98
							RUS = {
								remove_state_core = 98
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 853
								}
							}
							transfer_state = 853
							RUS = {
								remove_state_core = 853
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = BLT
						}
					}
					BLT = {
						add_state_core = 915
						transfer_state = 11
						transfer_state = 12
						transfer_state = 13
						transfer_state = 189
						transfer_state = 190
						transfer_state = 191
						transfer_state = 784
						transfer_state = 915
					}
					EST = {
						add_state_core = 13
						add_state_core = 191
					}
					LAT = {
						add_state_core = 12
						add_state_core = 190
						add_state_core = 915
					}
					LIT = {
						add_state_core = 11
						add_state_core = 189
						add_state_core = 784
					}
					hidden_effect = {
						PRU = {
							set_autonomy = {
								target = BLT
								autonomy_state = autonomy_integrated_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						BLT = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							set_popularities = {
								democratic = 34
								socialism = 0
								reactionist = 33
								authoritarian = 33
							}
						}
						BLT = {
							load_oob = BLT_army
						}
						BLT = {
							inherit_technology = PRU
						}
						EST = {
							inherit_technology = RUS
						}
						LIT = {
							inherit_technology = RUS
						}
						LAT = {
							inherit_technology = RUS
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = WRT
						}
					}
					WRT = {
						transfer_state = 94
						add_state_core = 94
						transfer_state = 95
						add_state_core = 95
						transfer_state = 96
						add_state_core = 96
						transfer_state = 194
						add_state_core = 194
						transfer_state = 204
						add_state_core = 204
						transfer_state = 206
						add_state_core = 206
						transfer_state = 207
						add_state_core = 207
						transfer_state = 224
						add_state_core = 224
						transfer_state = 241
						add_state_core = 241
						transfer_state = 243
						add_state_core = 243
						transfer_state = 823
						add_state_core = 823
					}
					hidden_effect = {
						PRU = {
							set_autonomy = {
								target = WRT
								autonomy_state = autonomy_dominion
								end_wars = yes
								end_civil_wars = yes
							}
						}
						WRT = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							set_popularities = {
								democratic = 63
								socialism = 7
								reactionist = 24
								authoritarian = 6
							}
						}
						WRT = {
							load_oob = WRT_army
						}
						WRT = {
							inherit_technology = PRU
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = UKR
						}
					}
					UKR = {
						transfer_state = 93
						add_state_core = 93
						add_state_core = 137
						transfer_state = 192
						add_state_core = 192
						transfer_state = 193
						add_state_core = 193
						add_state_core = 196
						transfer_state = 197
						add_state_core = 197
						transfer_state = 198
						add_state_core = 198
						transfer_state = 199
						add_state_core = 199
						add_state_core = 200
						transfer_state = 201
						add_state_core = 201
						transfer_state = 202
						add_state_core = 202
						transfer_state = 203
						add_state_core = 203
						transfer_state = 220
						add_state_core = 220
						transfer_state = 221
						add_state_core = 221
						transfer_state = 225
						add_state_core = 225
						transfer_state = 226
						add_state_core = 226
						add_state_core = 227
						transfer_state = 228
						add_state_core = 228
						transfer_state = 240
						add_state_core = 240
						transfer_state = 259
						add_state_core = 259
						transfer_state = 859
						add_state_core = 859
						transfer_state = 885
						add_state_core = 885
						transfer_state = 886
						add_state_core = 886
					}
					hidden_effect = {
						PRU = {
							add_to_faction = UKR
						}
						UKR = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 6
								socialism = 1
								reactionist = 84
								authoritarian = 9
							}
						}
						UKR = {
							load_oob = UKR_army
						}
						UKR = {
							inherit_technology = PRU
						}
					}
				}
				if = {
					limit = {
						OR = {
							BYZ = {
								is_in_faction_with = PRU
							}
							BYZ = {
								has_war_with = RUS
							}
						}
					}
					BCH = {
						transfer_state = 137
						add_state_core = 137
						transfer_state = 196
						add_state_core = 196
						transfer_state = 200
						add_state_core = 200
						transfer_state = 218
						add_state_core = 218
						transfer_state = 227
						add_state_core = 227
						transfer_state = 234
						add_state_core = 234
					}
					hidden_effect = {
						BYZ = {
							set_autonomy = {
								target = BCH
								autonomy_state = autonomy_aotsm_province
								end_wars = yes
								end_civil_wars = yes
							}
						}
						BCH = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 3
								socialism = 1
								reactionist = 77
								authoritarian = 19
							}
						}
						BCH = {
							load_oob = BCH_army
						}
						BCH = {
							inherit_technology = BYZ
						}
					}
					KUK = {
						transfer_state = 217
						add_state_core = 217
						transfer_state = 235
						add_state_core = 235
						transfer_state = 236
						add_state_core = 236
						transfer_state = 237
						add_state_core = 237
						transfer_state = 238
						add_state_core = 238
						transfer_state = 245
						add_state_core = 245
						transfer_state = 858
						add_state_core = 858
					}
					hidden_effect = {
						BYZ = {
							set_autonomy = {
								target = KUK
								autonomy_state = autonomy_aotsm_protectorat
								end_wars = yes
								end_civil_wars = yes
							}
						}
						KUK = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 18
								socialism = 1
								reactionist = 62
								authoritarian = 19
							}
						}
						KUK = {
							load_oob = KUK_army
						}
						KUK = {
							inherit_technology = BYZ
						}
					}
				}
				RUS = {
					remove_state_core = 10
					remove_state_core = 11
					remove_state_core = 12
					remove_state_core = 13
					remove_state_core = 87
					remove_state_core = 90
					remove_state_core = 92
					remove_state_core = 93
					remove_state_core = 94
					remove_state_core = 95
					remove_state_core = 96
					remove_state_core = 97
					remove_state_core = 98
					remove_state_core = 137
					remove_state_core = 189
					remove_state_core = 190
					remove_state_core = 191
					remove_state_core = 192
					remove_state_core = 193
					remove_state_core = 194
					remove_state_core = 196
					remove_state_core = 197
					remove_state_core = 198
					remove_state_core = 199
					remove_state_core = 200
					remove_state_core = 201
					remove_state_core = 202
					remove_state_core = 203
					remove_state_core = 204
					remove_state_core = 206
					remove_state_core = 207
					remove_state_core = 217
					remove_state_core = 218
					remove_state_core = 221
					remove_state_core = 225
					remove_state_core = 226
					remove_state_core = 227
					remove_state_core = 228
					remove_state_core = 234
					remove_state_core = 235
					remove_state_core = 236
					remove_state_core = 237
					remove_state_core = 238
					remove_state_core = 241
					remove_state_core = 245
					remove_state_core = 259
					remove_state_core = 784
					remove_state_core = 823
					remove_state_core = 858
					remove_state_core = 885
					remove_state_core = 886
					remove_state_core = 915
				}
				if = {
					limit = {
						AND = {
							SCA = {
								has_country_flag = SCA_VS_RUS_2
							}
							SCA = {
								is_in_faction_with = PRU
							}
							SCA = {
								has_war_with = RUS
							}	
						}
					}
					SCA = {
						transfer_state = 111
						transfer_state = 145
						transfer_state = 146
						transfer_state = 147
						transfer_state = 149
						transfer_state = 150
						transfer_state = 213
						transfer_state = 215
						transfer_state = 216
						transfer_state = 722
					}
					RUS = {
						remove_state_core = 213
						remove_state_core = 215
						remove_state_core = 216
						remove_state_core = 722
					}
				}	
				RUS = {
					leave_faction = yes
				}		
				every_country = {
					limit = {
						has_war_with = RUS
					}
					white_peace = RUS
				}
				hidden_effect = {
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_1
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_1
						}
					}
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_2
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_2
						}
					}
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_3
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_3
						}
					}
				}
				set_global_flag = russian_capitulation
				news_event = news.76
			}
			#Sar capitulation
			if = {
				limit = {
					tag = SAR
					SAR = {
						has_country_flag = TCR
					}
					SAR = {
						has_war_with = BYZ
					}
					SAR = {
						has_country_flag = war_with_byz
					}
				}
				BYZ = {
					set_autonomy = {
						target = SAR				
						autonomy_state = autonomy_aotsm_province
						end_wars = yes
						end_civil_wars = yes
					}
				}
				SAR = {
					load_focus_tree = generic_focus
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_1
						}
					}
					SAR = {
						remove_ideas = italy_economy_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_2
						}
					}
					SAR = {
						remove_ideas = italy_economy_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_3
						}
					}
					SAR = {
						remove_ideas = italy_economy_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_4
						}
					}
					SAR = {
						remove_ideas = italy_economy_4
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_1
						}
					}
					SAR = {
						remove_ideas = italy_political_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_2
						}
					}
					SAR = {
						remove_ideas = italy_political_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_3
						}
					}
					SAR = {
						remove_ideas = italy_political_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_4
						}
					}
					SAR = {
						remove_ideas = italy_political_4
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_1
						}
					}
					SAR = {
						remove_ideas = italy_army_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2
						}
					}
					SAR = {
						remove_ideas = italy_army_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2_n
						}
					}
					SAR = {
						remove_ideas = italy_army_2_n
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2_o
						}
					}
					SAR = {
						remove_ideas = italy_army_2_o
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_3_n
						}
					}
					SAR = {
						remove_ideas = italy_army_3_n
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_3_o
						}
					}
					SAR = {
						remove_ideas = italy_army_3_o
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_democratic_1
						}
					}
					SAR = {
						remove_ideas = italy_democratic_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_neutrality
						}
					}
					SAR = {
						remove_ideas = italy_neutrality
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_rea
						}
					}
					SAR = {
						remove_ideas = italy_political_rea
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_1
						}
					}
					SAR = {
						remove_ideas = italy_legionism_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_2
						}
					}
					SAR = {
						remove_ideas = italy_legionism_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_3
						}
					}
					SAR = {
						remove_ideas = italy_legionism_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = potential_world_power
						}
					}
					SAR = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				SAR = {
					set_cosmetic_tag = ITABYZ
				}
				SAR = {
					set_country_flag = SARBYZ
				}
				SAR = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 7
						socialism = 3
						reactionist = 33
						authoritarian = 57
					}
					retire_character = SAR_Viterio_Emannuele_II
					promote_character = SAR_Nikolaos_Petmazas
				}
			}
			#BUL capitulation
			if = {
				limit = {
					tag = BUL
					BUL = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_BUL
					}
				}
				BYZ = {
					white_peace = {
						tag = BUL
						message = BYZ_win_BUL
					}
				}
				BYZ = { 
					transfer_state = 48
					transfer_state = 106
					transfer_state = 211
					transfer_state = 212
					transfer_state = 801
					transfer_state = 803
				}
				BUL = {
					set_nationality = {
						target_country = VLH
						character = BUL_Alexandr_Battenberg
					}
				}
				VLH = {
					promote_character = {
						character = BUL_Alexandr_Battenberg
						ideology = monarchist
					}
					add_trait = {
						 character = BUL_Alexandr_Battenberg
						 ideology = monarchist
						 trait = hate_byzantium
					}
				}
				VLH = {
					transfer_state = 46
					transfer_state = 77
					transfer_state = 81
				}
				BYZ = { clr_country_flag = BYZ_vs_BUL }
				BYZ = { set_country_flag = BYZ_vs_BUL_win }
				BUL = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#ALB capitulation
			if = {
				limit = {
					tag = ALB
					ALB = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag =  BYZ_vs_ALB
					}
				}
				BYZ = {
					white_peace = {
						tag = ALB
						message = BYZ_win_ALB
					}
				}
				BYZ = { 
					transfer_state = 44
				}
				BYZ = { clr_country_flag = BYZ_vs_ALB }
				BYZ = { set_country_flag = BYZ_vs_ALB_win }
				ALB = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#SER capitulation
			if = {
				limit = {
					tag = SER
					SER = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_SER
					}
				}
				BYZ = {
					white_peace = {
						tag = SER
						message = BYZ_win_SER
					}
				}
				BYZ = { 
					transfer_state = 105
					transfer_state = 107
					transfer_state = 108
					transfer_state = 802
				}
				BYZ = { clr_country_flag = BYZ_vs_SER }
				BYZ = { set_country_flag = BYZ_vs_SER_win }
				SER = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#BOS capitulation
			if = {
				limit = {
					tag = BOS
					BOS = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_BOS
					}
				}
				BYZ = {
					white_peace = {
						tag = BOS
						message = BYZ_win_BOS
					}
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_imperia_politic
						}
					}
					BYZ = { 
						transfer_state = 104
						transfer_state = 804
					}
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_democratic_politic
						}
					}
					DAL = {
						transfer_state = 104
						transfer_state = 804
					}
					BYZ = {
						set_autonomy = {
							target = DAL
							autonomy_state = autonomy_aotsm_province
							end_wars = no
							end_civil_wars = no
						}
					}
					DAL ={
						set_cosmetic_tag = BYZ_DAL
					}
					DAL = {
						inherit_technology = BYZ
					}
				}
				BYZ = { clr_country_flag = BYZ_vs_BOS }
				BYZ = { set_country_flag = BYZ_vs_BOS_win }
				BOS = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#HOL capitulation
			if = {
				limit = {
					tag = HOL
					HOL = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = P_V_H
					}
				}
				PRU = {
					transfer_state = 308
					transfer_state = 539
					transfer_state = 660
					transfer_state = 695
				}
				PRU = {
					white_peace = {
						tag = HOL
						message = PRU_win_HOL
					}
				}
				HOL = { puppet = IND }
				PRU = {
					clr_country_flag = P_V_H
					add_to_faction = HOL
					add_to_faction = IND
				}
				set_global_flag = hol_was_in_faction_with_pru
			}
			#BEL capitulation
			if = {
				limit = {
					tag = BEL
					BEL = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = P_V_B
					}
				}
				HOL = {
					transfer_state = 6
				}
				BEL = { set_cosmetic_tag = BELVAL }
				PRU = { puppet = BEL }
				BEL = { 
					remove_state_core = 8
					remove_state_core = 863
				}
				PRU = { 
					add_state_core = 8
					transfer_state = 8
					add_state_core = 863
					transfer_state = 863
				}
				BEL = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 20
						socialism = 4
						reactionist = 23
						authoritarian = 53
					}
					retire_character = BEL_Leopold_I
					add_country_leader_role = {
						character = BEL_Edwin_von_Manteuffel
						promote_leader = yes
						country_leader = {
							ideology = monarchist
							expire = "1900.1.1.1"
							traits = { walduke }
						}
					}
					swap_ideas = {
						remove_idea = medium_country
						add_idea = little_country
					}
				}
			}
			#PAR capitulation 
			if = {
				limit = {
					tag = PAR
					OR = {
						PAR = {
							has_war_with = PER
						}
						PAR = {
							has_war_with = IRA
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PER = {
							controls_province = 2065
						}
					}
					PER = {
						annex_country = {
							target = PAR
							transfer_troops = no
						}
					}
					PAR = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = IRA
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.47
				}
				if = {
					limit = {
						IRA = {
							controls_province = 2065
						}
					}
					IRA = {
						annex_country = {
							target = PAR
							transfer_troops = no
						}
					}
					PAR = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.46
				}
			}
			#PER capitulation
			if = {
				limit = {
					tag = PER
					OR = {
						PER = {
							has_war_with = PAR
						}
						PER = {
							has_war_with = IRA
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PAR = {
							controls_province = 10837
						}
					}
					PAR = {
						annex_country = {
							target = PER
							transfer_troops = no
						}
					}
					PER = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = IRA
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
				if = {
					limit = {
						IRA = {
							controls_province = 10837
						}
					}
					IRA = {
						annex_country = {
							target = PER
							transfer_troops = no
						}
					}
					PER = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
			}
			#IRA capitulation 
			if = {
				limit = {
					tag = IRA
					OR = {
						IRA = {
							has_war_with = PAR
						}
						IRA = {
							has_war_with = PER
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PAR = {
							controls_province = 12832
						}
					}
					PAR = {
						annex_country = {
							target = IRA
							transfer_troops = no
						}
					}
					IRA = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = IRA
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
				if = {
					limit = {
						PER = {
							controls_province = 12832
						}
					}
					PER = {
						annex_country = {
							target = IRA
							transfer_troops = no
						}
					}
					IRA = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = IRA
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.47
				}
			}
			#SEL capitulation
			if = {
				limit = {
					tag = SEL
					RUS = {
						has_war_with = SEL
					}
					NOT = {
						has_global_flag = SEL_capitulation
					}
				}
				RUS = {
					white_peace = {
						tag = SEL
						message = RUS_win_SEL
					}
				}
				RUS = {
					annex_country = {
						target = SEL
						transfer_troops = no
					}
				}
				set_global_flag = SEL_capitulation
			}
		#Afganistan company
			#AFG capitulation
			if = {
				limit = {
					tag = AFG
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = AFG_capitulation_ac
					}
				}
				RIT = {
					transfer_state = 410
					add_state_core = 410
					transfer_state = 444
					add_state_core = 444
				}
				if = {
					limit = {
						AFG = {
							owns_state = 443
						}
					}
					RIT = {
						transfer_state = 443
						add_state_core = 443
					}
				}
				if = {
					limit = {
						AFG = {
							owns_state = 837
						}
					}
					RIT = {
						transfer_state = 837
						add_state_core = 837
					}
				}
				if = {
					limit = {
						country_exists = PNJ
					}
					PNJ = {
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
					}
					RIT = {
						puppet = PNJ
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PNJ
						}
						has_global_flag = PNJ_capitulation_ac
					}
					RIT = {
						transfer_state = 440
						add_state_core = 440
						transfer_state = 441
						add_state_core = 441
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
						transfer_state = 787
						add_state_core = 787
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PNJ
						}
						NOT = {
							has_global_flag = PNJ_capitulation_ac
						}
					}
					RIT = {
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
						if = {
							limit = {
								AFG = {
									owns_state = 440
								}
							}
							transfer_state = 440
							add_state_core = 440
						}
						if = {
							limit = {
								AFG = {
									owns_state = 441
								}
							}
							transfer_state = 441
							add_state_core = 441
						}
						if = {
							limit = {
								AFG = {
									owns_state = 787
								}
							}
							transfer_state = 787
							add_state_core = 787
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						RIT = {
							has_war_with = AFG
						}
					}
					RIT = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_RIT
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						PAR = {
							has_war_with = AFG
						}
					}
					PAR = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_PAR
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						PNJ = {
							has_war_with = AFG
						}
					}
					PNJ = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_PNJ
				}
				PAR = {
					annex_country = {
						target = AFG
						transfer_troops = no
					}
				}
				RIT = {
					remove_ideas = afganistan_company
				}
				PNJ = {
					remove_ideas = afganistan_company
				}
				PAR = {
					remove_ideas = afganistan_company
				}
				clr_global_flag = afganistan_company_global_flag
				set_global_flag = AFG_capitulation_ac
				news_event = news.91
			}
			#RIT capitulation
			if = {
				limit = {
					tag = RIT
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = RIT_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = RIT
						message = RIT_lose_company
					}
				}
				RIT = {
					remove_ideas = afganistan_company
				}
				AFG = {
					transfer_state = 443
					transfer_state = 837
				}
				set_global_flag = RIT_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
			#PNJ capitulation
			if = {
				limit = {
					tag = PNJ
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = PNJ_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = PNJ
						message = PNJ_lose_company
					}
				}
				PNJ = {
					remove_ideas = afganistan_company
				}
				AFG = {
					annex_country = {
						target = PNJ
						transfer_troops = no
					}
					add_state_core = 440
					add_state_core = 441
					add_state_core = 787
				}
				set_global_flag = PNJ_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
			#PAR capitulation
			if = {
				limit = {
					tag = PAR
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = PAR_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = PAR
						message = PAR_lose_company
					}
				}
				PAR = {
					remove_ideas = afganistan_company
				}
				AFG = {
					transfer_state = 412
					add_state_core = 412
					transfer_state = 414
					add_state_core = 414
					transfer_state = 852
					add_state_core = 852
				}
				BYZ = {
					set_autonomy = {
						target = PAR
						autonomy_state = autonomy_aotsm_protectorat
						end_wars = yes
						end_civil_wars = yes
					}
				}
				PAR = {
					set_politics = {
						ruling_party = authoritarian
						elections_allowed = no
						last_election = "1848.1.1"
						election_frequency = 48
					}
					set_popularities = {
						democratic = 1
						authoritarian = 93
						reactionist = 5
						socialism = 1
					}
				}
				set_global_flag = PAR_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
		#Mittleafrika company
			#CON capitulation
			if = {
				limit = {
					tag = CON
					CON = {
						has_country_flag = CON_vs_MAT
					}
					CON = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = CON
						transfer_troops = no
					}
				}
				CON = {
					clr_country_flag = CON_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#LUB capitulation
			if = {
				limit = {
					tag = LUB
					LUB = {
						has_country_flag = LUB_vs_MAT
					}
					LUB = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = LUB
						transfer_troops = no
					}
				}
				LUB = {
					clr_country_flag = LUB_vs_MAT
				}
				MAT = {
					add_state_core = 295
				}
			}
			#FKU capitulation
			if = {
				limit = {
					tag = FKU
					FKU = {
						has_country_flag = FKU_vs_MAT
					}
					FKU = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = FKU
						transfer_troops = no
					}
				}
				FKU = {
					clr_country_flag = FKU_vs_MAT
				}
				MAT = {
					add_state_core = 538
					add_state_core = 718
				}
			}
			#BAN capitulation
			if = {
				limit = {
					tag = BAN
					BAN = {
						has_country_flag = BAN_vs_MAT
					}
					BAN = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BAN
						transfer_troops = no
					}
				}
				BAN = {
					clr_country_flag = BAN_vs_MAT
				}
				MAT = {
					add_state_core = 773
				}
			}
			#KIT capitulation
			if = {
				limit = {
					tag = KIT
					KIT = {
						has_country_flag = KIT_vs_MAT
					}
					KIT = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = KIT
						transfer_troops = no
					}
				}
				KIT = {
					clr_country_flag = KIT_vs_MAT
				}
				MAT = {
					add_state_core = 548
				}
			}
			#BUG capitulation
			if = {
				limit = {
					tag = BUG
					BUG = {
						has_country_flag = BUG_vs_MAT
					}
					BUG = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BUG
						transfer_troops = no
					}
				}
				BUG = {
					clr_country_flag = BUG_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#BUR capitulation
			if = {
				limit = {
					tag = BUR
					BUR = {
						has_country_flag = BUR_vs_MAT
					}
					BUR = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BUR
						transfer_troops = no
					}
				}
				BUR = {
					clr_country_flag = BUR_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#SKZ capitulation
			if = {
				limit = {
					tag = SKZ
					PAR = {
						has_country_flag = PAR_vs_SKZ
					}
					SKZ = {
						has_war_with = PAR
					}
				}
				PAR = {
					white_peace = {
						tag = SKZ
						message = PAR_succes_SKZ
					}
				}
				PAR = {
					annex_country = {
						target = SKZ
						transfer_troops = no
					}
				}
				PAR = {
					clr_country_flag = PAR_vs_SKZ
				}
			}
			#SWI capitulation
			if = {
				limit = {
					tag = SWI
					SWI = {
						has_country_flag = SWI_end_of_neutrality
					}
					SWI = {
						has_war_with = PRU
					}
				}
				PRU = {
					transfer_state = 151
					add_state_core = 151
				}
				FRA = {
					transfer_state = 3
					add_state_core = 3
				}
				if = {
					limit = {
						country_exists = SAR
					}
					SAR = {
						transfer_state = 884
						add_state_core = 884
					}
				}
				else = {
					BYZ = {
						transfer_state = 884
						add_state_core = 884
					}
				}
			}
			#CBI capitulation
			if = {
				limit = {
					tag = CBI
					CBI = {
						has_country_flag = CBI_vs_SCA
					}
					CBI = {
						has_war_with = SCA
					}
					CBI = {
						is_in_faction_with = COR
					}
				}
				SCA = {
					create_faction = THE_NEW_ORDER
					transfer_state = 120
					transfer_state = 121
					transfer_state = 131
					transfer_state = 133
					transfer_state = 136
					transfer_state = 864
					add_state_core = 864
					transfer_state = 865
					add_state_core = 865
					transfer_state = 866
					add_state_core = 866
					white_peace = {
						tag = CBI
					}
				}
				news_event = {
					id = news.33
					days = 1
				}
				if = {
					limit = {
						country_exists = COR
					}
					COR = { 
						change_tag_from = CBI 
					}
					CBI = {
						transfer_navy = {
							target = COR
						}
					}
					COR = {
						leave_faction = yes
						annex_country = {
							target = CBI
							transfer_troops = yes
						}
						if = {
							limit = {
								NOT = {
									has_global_flag = leypoldit_bombing
								}
							}
							set_capital = {
								state = 126 
								remember_old_capital = no
							}
						}
						if = {
							limit = {
								has_global_flag = leypoldit_bombing
							}
							set_capital = {
								state = 127 
								remember_old_capital = no
							}
						}
						add_state_core = 122
						add_state_core = 125
						add_state_core = 126
						add_state_core = 127
						add_state_core = 128
						add_state_core = 129
						add_state_core = 130
						add_state_core = 338
						swap_ideas = {
							remove_idea = little_country
							add_idea = large_country
						}
					}
					CBI = {
						remove_state_core = 120
						remove_state_core = 121
						remove_state_core = 122
						remove_state_core = 125
						remove_state_core = 126
						remove_state_core = 127
						remove_state_core = 128
						remove_state_core = 129
						remove_state_core = 130
						remove_state_core = 131
						remove_state_core = 132
						remove_state_core = 133
						remove_state_core = 136
						remove_state_core = 338
						remove_state_core = 864
						remove_state_core = 865
						remove_state_core = 866
					}
					if = {
						limit = {
							NOT = {
								has_global_flag = leypoldit_bombing
							}
						}
						126 = {
							set_province_name = {
								id = 6103
								name = LONDINIUM
							}
						}
					}
					if = {
						limit = {
							has_global_flag = leypoldit_bombing
						}
						set_capital = {
							state = 127 
							remember_old_capital = no
						}
						127 = {
							set_province_name = {
								id = 3501
								name = NEW_LONDINIUM
							}
						}
					}
					BYZ = {
						add_to_faction = COR
					}
					COR = {
						set_cosmetic_tag = CORENG
					}
				}
				CBI = {
					clr_country_flag = CBI_vs_SCA
				}
			}	
			#SCA capitulation
			if = {
				limit = {
					tag = SCA
					has_global_flag = firts_world_war
					OR = {
						SCA = {
							has_war_with = RUS
						}
						SCA = {
							has_war_with = CBI
						}
					}
					NOT = {
						has_global_flag = sca_capitulation
					}
				}
				if = {
					limit = {
						SCA = {
							has_war_with = RUS
						}
					}
					RUS = {
						transfer_state = 124
						transfer_state = 148
					}
				}
				if = {
					limit = {
						SCA = {
							has_war_with = CBI
						}
					}
					CBI = {
						transfer_state = 100
						transfer_state = 101
						transfer_state = 337
					}
					if = {
						limit = {
							country_exists = VIN
						}
						CBI = {
							set_autonomy = {
								target = VIN
								autonomy_state = autonomy_colony
								end_wars = yes
								end_civil_wars = yes
							}
						}
						if = {
							limit = {
								NOT = {
									VIN = {
										owns_state = 276
									}
								}
							}
							VIN = {
								transfer_state = 276
							}
						}
						if = {
							limit = {
								NOT = {
									VIN = {
										owns_state = 464
									}
								}
							}
							VIN = {
								transfer_state = 464
							}
						}
						if = {
							limit = {
								NOT = {
									VIN = {
										owns_state = 465
									}
								}
							}
							VIN = {
								transfer_state = 465
							}
						}
						if = {
							limit = {
								NOT = {
									VIN = {
										owns_state = 468
									}
								}
							}
							VIN = {
								transfer_state = 468
							}
						}
						VIN = {
							set_cosmetic_tag = VIN_CAN
						}
					}
					SWE = {
						transfer_state = 38
						transfer_state = 138
						transfer_state = 139
						transfer_state = 140
						transfer_state = 666
					}
					SWE = { change_tag_from = SCA }
					NOR = {
						transfer_state = 110
						transfer_state = 142
						transfer_state = 143
						transfer_state = 144
					}
					DEN = {
						transfer_state = 37
						transfer_state = 99
					}
					SCA = {
						remove_state_core = 37
						remove_state_core = 38
						remove_state_core = 99
						remove_state_core = 100
						remove_state_core = 101
						remove_state_core = 110
						remove_state_core = 111
						remove_state_core = 124
						remove_state_core = 138
						remove_state_core = 139
						remove_state_core = 140
						remove_state_core = 141
						remove_state_core = 142
						remove_state_core = 143
						remove_state_core = 144
						remove_state_core = 146
						remove_state_core = 147
						remove_state_core = 148
						remove_state_core = 149
						remove_state_core = 213
						remove_state_core = 215
						remove_state_core = 216
						remove_state_core = 337
						remove_state_core = 666
						remove_state_core = 722
					}
					SCA = {
						remove_state_claim = 13
						remove_state_claim = 191
					}
					SCA = {
						transfer_units_fraction= {
							target = SWE
							size = 0.00
							stockpile_ratio = 0.00
							army_ratio = 0.50
							navy_ratio = 0.50
							air_ratio = 0.00
						}
					}
					SCA = {
						transfer_units_fraction= {
							target = NOR
							size = 0.00
							stockpile_ratio = 0.00
							army_ratio = 0.75
							navy_ratio = 0.75
							air_ratio = 0.00
						}
					}
					SCA = {
						transfer_units_fraction= {
							target = DEN
							size = 0.00
							stockpile_ratio = 0.00
							army_ratio = 1.00
							navy_ratio = 1.00
							air_ratio = 0.00
						}
					}
					SWE = {
						inherit_technology = SCA
					}
					NOR = {
						inherit_technology = SCA
					}
					DEN = {
						inherit_technology = SCA
					}
					SWE = {
						transfer_state = 141
					}
					if = {
						limit = {
							SCA = {
								owns_state = 100
							}
						}
						DEN = {
							transfer_state = 100
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 101
							}
						}
						DEN = {
							transfer_state = 101
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 337
							}
						}
						DEN = {
							transfer_state = 337
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 124
							}
						}
						SWE = {
							transfer_state = 124
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 111
							}
						}
						FIN = {
							transfer_state = 111
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 146
							}
						}
						FIN = {
							transfer_state = 146
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 147
							}
						}
						FIN = {
							transfer_state = 147
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 149
							}
						}
						FIN = {
							transfer_state = 149
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 150
							}
						}
						FIN = {
							transfer_state = 150
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 213
							}
						}
						FIN = {
							transfer_state = 213
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 215
							}
						}
						FIN = {
							transfer_state = 215
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 216
							}
						}
						FIN = {
							transfer_state = 216
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 722
							}
						}
						FIN = {
							transfer_state = 722
						}
					}
					if = {
						limit = {
							SCA = {
								owns_state = 148
							}
						}
						if = {
							limit = {
								NOT = {
									country_exists = FIN
								}
							}
							RUS = {
								transfer_state = 148
							}
						}
						if = {
							limit = {
								country_exists = FIN
							}
							FIN = {
								transfer_state = 148
							}
						}
					}
					if = {
						limit = {
							NOT = {
								FIN = {
									owns_state = 111
								}
							}
						}
						RUS = {
							annex_country = {
								target = FIN
								transfer_troops = no
							}
						}
					}
				SCA = {
					leave_faction = yes
				}
				every_country = {
					limit = {
						has_war_with = SCA
					}
					white_peace = SCA
				}
				set_global_flag = sca_capitulation
				news_event = news.97
				}
			}
			#PRU capitulation
			if = {
				limit = {
					tag = PRU
					has_global_flag = firts_world_war
					OR = {
						PRU = {
							has_war_with = RUS
						}
						PRU = {
							has_war_with = CBI
						}
						PRU = {
							has_war_with = FRR
						}
					}
					NOT = {
						has_global_flag = pru_capitulation
					}
				}
				if = {
					limit = {
						PRU = {
							has_war_with = RUS
						}
					}
					RUS = {
						transfer_state = 188
					}
					RUS = {
						annex_country = {
							target = PLH
							transfer_troops = no
						}
					}
					PRR = {
						transfer_state = 5
						add_state_core = 5
						transfer_state = 85
						add_state_core = 85
						add_state_core = 188
						transfer_state = 763
						add_state_core = 763
					}
					PRU = {
						transfer_units_fraction= {
							target = PRR
							size = 0.00
							stockpile_ratio = 0.10
							army_ratio = 0.10
							navy_ratio = 0.10
							air_ratio = 0.10
						}
					}
					PRR = {
						inherit_technology = PRU
					}
					RUS = {
						set_autonomy = {
							target = PRR
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					PRR = {
						set_politics = { ruling_party = authoritarian elections_allowed = no }
						set_popularities = {
							democratic = 6
							socialism = 14
							reactionist = 29
							authoritarian = 51
						}
					}
					BOH = {
						transfer_state = 9
						transfer_state = 69
						transfer_state = 72
						transfer_state = 74
						transfer_state = 75
						transfer_state = 810
					}
					RUS = {
						set_autonomy = {
							target = BOH
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					if = {
						limit = {
							RUS = {
								has_war_with = HUN
							}
						}
						RUS = {
							set_autonomy = {
								target = SLA
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						RUS = {
							set_autonomy = {
								target = GLA
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						SLA = {
							transfer_state = 70
							transfer_state = 71
							transfer_state = 73
							transfer_state = 664
						}
						GLA = {
							transfer_state = 80
							transfer_state = 88
							transfer_state = 89
							transfer_state = 91
						}
						PRU = {
							transfer_units_fraction= {
								target = SLA
								size = 0.00
								stockpile_ratio = 0.10
								army_ratio = 0.05
								navy_ratio = 0.00
								air_ratio = 0.00
							}
						}
						SLA = {
							inherit_technology = RUS
						}
						GLA = {
							inherit_technology = RUS
						}
					}
					BOH = {
						inherit_technology = RUS
					}
					PRU = {
						transfer_units_fraction= {
							target = BOH
							size = 0.00
							stockpile_ratio = 0.10
							army_ratio = 0.05
							navy_ratio = 0.00
							air_ratio = 0.00
						}
					}
				}
				if = {
					limit = {
						PRU = {
							has_war_with = FRR
						}
					}
					FRR = {
						transfer_state = 28
						add_state_core = 28
						transfer_state = 828
						add_state_core = 828
					}
					REU = {
						transfer_state = 8
						add_state_core = 8
						transfer_state = 42
						add_state_core = 42
						transfer_state = 51
						add_state_core = 51
						transfer_state = 894
						add_state_core = 894
					}
					FRR = {
						set_autonomy = {
							target = REU
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BEL = {
						transfer_state = 6
						add_state_core = 6
						transfer_state = 34
						add_state_core = 863
						transfer_state = 863
						add_state_core = 863
					}
					FRR = {
						set_autonomy = {
							target = BEL
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BEL = {
						drop_cosmetic_tag = yes
						if = {
							limit = {
								BEL = {
									has_government = socialism
								}
							}
							BEL = {
								kill_country_leader = yes
							}
						}
					}
				}
				if = {
					limit = {
						PRU = {
							has_war_with = CBI
						}
					}
					PRT = {
						transfer_state = 308
						transfer_state = 695
					}
					CBI = {
						set_autonomy = {
							target = HOL
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					CBI = {
						set_autonomy = {
							target = IND
							autonomy_state = autonomy_colony
							end_wars = yes
							end_civil_wars = yes
						}
					}
					MAT = {
						set_cosmetic_tag = MAT_MAN
					}
					PRU = {
						set_autonomy = {
							target = MAT
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
					CBI = {
						add_to_faction = MAT
					}
					MAT = {
						transfer_state = 540
						transfer_state = 769
						transfer_state = 825
						transfer_state = 825
					}
				}
				AUS = {
					transfer_state = 4
					add_state_core = 4
					transfer_state = 39
					add_state_core = 39
					transfer_state = 152
					add_state_core = 152
					transfer_state = 153
					add_state_core = 153
					transfer_state = 887
					add_state_core = 887
					drop_cosmetic_tag = yes
				}
				PRU = {
					set_autonomy = {
						target = AUS
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 28
						}
					}
					FRA = {
						transfer_state = 28
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 828
						}
					}
					FRA = {
						transfer_state = 828
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 862
						}
					}
					FRA = {
						transfer_state = 862
					}
				}
				if = {
					limit = {
						HOL = {
							owns_state = 861
						}
					}
					FRA = {
						transfer_state = 861
					}
				}
				if = {
					limit = {
						BEL = {
							is_subject_of = PRU
						}
					}
					BEL = {
						drop_cosmetic_tag = yes
						kill_country_leader = yes
						transfer_state = 6
						transfer_state = 863
					}
					PRU = {
						set_autonomy = {
							target = BEL
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 308
						}
					}
					KUB = {
						transfer_state = 308
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 691
						}
					}
					KUB = {
						transfer_state = 691
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 694
						}
					}
					KUB = {
						transfer_state = 694
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 695
						}
					}
					KUB = {
						transfer_state = 695
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 299
						}
					}
					MAT = {
						transfer_state = 299
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 702
						}
					}
					SEN = {
						transfer_state = 702
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 703
						}
					}
					MAT = {
						transfer_state = 703
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 704
						}
					}
					MAT = {
						transfer_state = 704
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 720
						}
					}
					MAT = {
						transfer_state = 720
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 841
						}
					}
					SEN = {
						transfer_state = 841
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 847
						}
					}
					SEN = {
						transfer_state = 847
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 839
						}
					}
					GWI = {
						transfer_state = 839
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 843
						}
					}
					AKA = {
						transfer_state = 843
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 844
						}
					}
					AKA = {
						transfer_state = 844
					}
				}
				if = {
					limit = {
						MAT = {
							owns_state = 842
						}
					}
					SOK = {
						transfer_state = 842
					}
				}
				if = {
					limit = {
						PRU = {
							owns_state = 151
						}
					}
					SWI = {
						transfer_state = 151
					}
				}
				if = {
					limit = {
						BLT = {
							is_subject_of = PRU
						}
					}
					PRU = {
						set_autonomy = {
							target = BLT
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						WRT = {
							is_subject_of = PRU
						}
					}
					PRU = {
						set_autonomy = {
							target = WRT
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						MAT = {
							is_subject_of = PRU
						}
					}
					PRU = {
						set_autonomy = {
							target = MAT
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						BOH = {
							is_subject_of = PRU
						}
					}
					PRU = {
						set_autonomy = {
							target = BOH
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BOH = {
						drop_cosmetic_tag = yes
						transfer_state = 69
						transfer_state = 810
					}
				}
				if = {
					limit = {
						AUS = {
							is_subject_of = PRU
						}
					}
					PRU = {
						set_autonomy = {
							target = AUS
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
					AUS = {
						drop_cosmetic_tag = yes
						transfer_state = 887
						add_state_core = 887
					}
				}
				BYZ = {
					leave_faction = yes
					create_faction = PURPLE_DAWN
					add_to_faction = HUN
				}
				every_country = {
					limit = {
						has_war_with = PRU
					}
					white_peace = PRU
				}
				PRU = {
					dismantle_faction = yes
				}
				set_global_flag = pru_capitulation
				news_event = news.80
				PRU = {
					country_event = {
						id = postwar.1
						days = 14
					}
					set_politics = { ruling_party = reactionist elections_allowed = no }
					set_popularities = {
						democratic = 20
						socialism = 0
						reactionist = 51
						authoritarian = 29
					}
					set_cosmetic_tag = PRU_LOSE
				}
				PRU = {
					load_focus_tree = lose_germany_focus
				}
				SGE = {
					load_focus_tree = rev_germany_focus
				}
				PRR = {
					load_focus_tree = prussian_lose_focus
				}
				PRU = {
					if = {
						limit = {
							has_idea = monarchy
						}
						PRU = {
							swap_ideas = {
								remove_idea = monarchy
								add_idea = republic
							}
						}
					}
				}
				PRU = {
					if = {
						limit = {
							has_idea = constitutional_monarchy_fg
						}
						PRU = {
							swap_ideas = {
								remove_idea = constitutional_monarchy_fg
								add_idea = republic
							}
						}
					}
				}
				PRU = {
					if = {
						limit = {
							has_idea = parliament_monarchy
						}
						PRU = {
							swap_ideas = {
								remove_idea = parliament_monarchy
								add_idea = republic
							}
						}
					}
				}
				PRU = {
					if = {
						limit = {
							has_idea = dictature_fg
						}
						PRU = {
							swap_ideas = {
								remove_idea = dictature_fg
								add_idea = republic
							}
						}
					}
				}
				if = {
					limit = {
						PRU = {
							has_idea = world_power
						}
					}
					PRU = {
						swap_ideas = {
							remove_idea = world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						PRU = {
							has_idea = potential_world_power
						}
					}
					PRU = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
			}
			#BYZ capitulation
			if = {
				limit = {
					tag = BYZ
					has_global_flag = firts_world_war
					OR = {
						BYZ = {
							has_war_with = RUS
						}
						BYZ = {
							has_war_with = CBI
						}
						BYZ = {
							has_war_with = FRR
						}
					}
					NOT = {
						has_global_flag = byz_capitulation
					}
				}
				if = {
					limit = {
						SAR = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						annex_country = {
							target = SAR
							transfer_troops = no
						}
						set_capital = {
							state = 2
							remember_old_capital = yes
						}
					}
				}
				if = {
					limit = {
						BYZ = {
							has_war_with = RUS
						}
					}
					RUS = {
						transfer_state = 229
						transfer_state = 230
						transfer_state = 231
						transfer_state = 232
						transfer_state = 233
					}
					RUS = {
						if = {
							limit = {
								BYZ = {
									owns_state = 48
								}
							}
							RUS = {
								transfer_state = 48
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 77
								}
							}
							RUS = {
								transfer_state = 77
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 106
								}
							}
							RUS = {
								transfer_state = 106
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 211
								}
							}
							RUS = {
								transfer_state = 211
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 212
								}
							}
							RUS = {
								transfer_state = 212
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 801
								}
							}
							RUS = {
								transfer_state = 801
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 803
								}
							}
							RUS = {
								transfer_state = 803
							}
						}
					}
					ALB = {
						transfer_state = 44
						transfer_state = 805
					}
					RUS = {
						set_autonomy = {
							target = ALB
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					SER = {
						if = {
							limit = {
								BYZ = {
									owns_state = 105
								}
							}
							SER = {
								transfer_state = 105
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 107
								}
							}
							SER = {
								transfer_state = 107
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 108
								}
							}
							SER = {
								transfer_state = 108
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 802
								}
							}
							SER = {
								transfer_state = 802
							}
						}
						transfer_state = 764
					}
					RUS = {
						set_autonomy = {
							target = SER
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					CRO = {
						transfer_state = 45
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 103
									}
									DAL = {
										owns_state = 103
									}
								}
							}
							CRO = {
								transfer_state = 103
							}
						}
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 109
									}
									DAL = {
										owns_state = 109
									}
								}
							}
							CRO = {
								transfer_state = 109
							}
						}
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 163
									}
									DAL = {
										owns_state = 163
									}
								}
							}
							CRO = {
								transfer_state = 163
							}
						}
					}
					RUS = {
						set_autonomy = {
							target = CRO
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BOS = {
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 104
									}
									DAL = {
										owns_state = 104
									}
								}
							}
							BOS = {
								transfer_state = 104
							}
						}
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 804
									}
									DAL = {
										owns_state = 804
									}
								}
							}
							BOS = {
								transfer_state = 804
							}
						}
					}
					RUS = {
						set_autonomy = {
							target = BOS
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					SLO = {
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 102
									}
									DAL = {
										owns_state = 102
									}
								}
							}
							SLO = {
								transfer_state = 102
							}
						}
						if = {
							limit = {
								OR = {
									BYZ = {
										owns_state = 736
									}
									DAL = {
										owns_state = 736
									}
								}
							}
							SLO = {
								transfer_state = 736
							}
						}
					}
					RUS = {
						set_autonomy = {
							target = SLO
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					if = {
						limit = {
							RUS = {
								has_war_with = HUN
							}
						}
						RUS = {
							set_autonomy = {
								target = HUN
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						RUS = {
							set_autonomy = {
								target = VLH
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						VLH = {
							transfer_state = 46
							transfer_state = 76
							transfer_state = 79
							transfer_state = 81
							transfer_state = 82
							transfer_state = 83
							transfer_state = 84
						}
					}
					RUS = {
						transfer_state = 78
						transfer_state = 766
					}
					RUS = {
						transfer_state = 797
						transfer_state = 871
					}
					GRE = {
						transfer_state = 47
						add_state_core = 47
						transfer_state = 164
						add_state_core = 164
						transfer_state = 182
						add_state_core = 182
						transfer_state = 183
						add_state_core = 183
						transfer_state = 184
						add_state_core = 184
						transfer_state = 185
						add_state_core = 185
						transfer_state = 186
						add_state_core = 186
						transfer_state = 187
						add_state_core = 187
						transfer_state = 341
						add_state_core = 341
						transfer_state = 731
						add_state_core = 731
						transfer_state = 817
						add_state_core = 817
					}
					RUS = {
						set_autonomy = {
							target = GRE
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					TUR = {
						transfer_state = 49
						add_state_core = 49
						transfer_state = 339
						add_state_core = 339
						transfer_state = 340
						add_state_core = 340
						transfer_state = 342
						add_state_core = 342
						transfer_state = 343
						add_state_core = 343
						transfer_state = 344
						add_state_core = 344
						transfer_state = 345
						add_state_core = 345
						transfer_state = 346
						add_state_core = 346
						transfer_state = 347
						add_state_core = 347
						transfer_state = 348
						add_state_core = 348
						transfer_state = 349
						add_state_core = 349
						transfer_state = 353
						add_state_core = 353
						transfer_state = 354
						add_state_core = 354
						transfer_state = 355
						add_state_core = 355
						transfer_state = 356
						add_state_core = 356
						transfer_state = 798
						add_state_core = 798
						transfer_state = 800
						add_state_core = 800
						transfer_state = 913
						add_state_core = 913
					}
					RUS = {
						set_autonomy = {
							target = TUR
							autonomy_state = autonomy_puppet
							end_wars = yes
							end_civil_wars = yes
						}
					}
					BYZ = {
						transfer_units_fraction= {
							target = TUR
							size = 0.00
							stockpile_ratio = 0.10
							army_ratio = 0.40
							navy_ratio = 0.25
							air_ratio = 0.25
						}
					}
					BYZ = {
						transfer_units_fraction= {
							target = GRE
							size = 0.00
							stockpile_ratio = 0.10
							army_ratio = 0.25
							navy_ratio = 0.50
							air_ratio = 0.50
						}
					}
				}
				if = {
					limit = {
						has_war_with = CBI
					}
					CBI = {
						annex_country = {
							target = ZUL
							transfer_troops = no
						}
					}
					OIC = {
						annex_country = {
							target = RIT
							transfer_troops = no
						}
					}
					CBI = {
						if = {
							limit = {
								BYZ = {
									owns_state = 118
								}
							}
							CBI = {
								transfer_state = 118
							}
						}
						if = {
							limit = {
								BYZ = {
									owns_state = 869
								}
							}
							CBI = {
								transfer_state = 869
							}
						}
					}
				}
				if = {
					limit = {
						BYZ = {
							has_war_with = FRR
						}
					}
					FRR = {
						transfer_state = 838
					}
					if = {
						limit = {
							OR = {
								SAR = {
									is_subject_of = BYZ
								}
								BYZ = {
									owns_state = 735
								}
							}
						}
						FRR = {
							transfer_state = 735
						}
					}
				}
				BYZ = {
					set_autonomy = {
						target = SYR
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				SYR = {
					transfer_state = 799
				}
				BYZ = {
					set_autonomy = {
						target = KUR
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BYZ = {
					set_autonomy = {
						target = CPT
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				CPT = {
					transfer_state = 816
				}
				BYZ = {
					set_autonomy = {
						target = RIT
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BYZ = {
					set_autonomy = {
						target = ZUL
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				HAL = {
					transfer_state = 656
					transfer_state = 675
					transfer_state = 836
					transfer_state = 873
					transfer_state = 874
				}
				if = {
					limit = {
						country_exists = PER
					}
					PER = {
						transfer_state = 872
						transfer_state = 876
					}
				}
				if = {
					limit = {
						country_exists = IRA
					}
					IRA = {
						transfer_state = 872
						transfer_state = 876
					}
				}
				if = {
					limit = {
						country_exists = PAR
					}
					PAR = {
						transfer_state = 872
						transfer_state = 876
					}
				}
				if = {
					limit = {
						country_exists = SOS
					}
					SOS = {
						transfer_state = 875
					}
				}
				if = {
					limit = {
						country_exists = SOR
					}
					SOR = {
						transfer_state = 875
					}
				}
				if = {
					limit = {
						country_exists = SOS
						BYZ = {
							owns_state = 832
						}
					}
					SOS = {
						transfer_state = 832
					}
				}
				if = {
					limit = {
						country_exists = SOR
						BYZ = {
							owns_state = 832
						}
					}
					SOR = {
						transfer_state = 832
					}
				}
				if = {
					limit = {
						country_exists = SOS
						BYZ = {
							owns_state = 833
						}
					}
					SOS = {
						transfer_state = 833
					}
				}
				if = {
					limit = {
						BYZ = {
							owns_state = 709
						}
					}
					RIT = {
						transfer_state = 709
					}
				}
				if = {
					limit = {
						BYZ = {
							owns_state = 710
						}
					}
					RIT = {
						transfer_state = 710
					}
				}
				if = {
					limit = {
						BYZ = {
							owns_state = 713
						}
					}
					RIT = {
						transfer_state = 713
					}
				}
				if = {
					limit = {
						country_exists = SOR
						BYZ = {
							owns_state = 833
						}
					}
					SOR = {
						transfer_state = 833
					}
				}
				if = {
					limit = {
						KUK = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						set_autonomy = {
							target = KUK
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						BCH = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						set_autonomy = {
							target = BCH
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						VLH = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						set_autonomy = {
							target = VLH
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						GAL = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						set_autonomy = {
							target = GAL
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				if = {
					limit = {
						SAR = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						set_autonomy = {
							target = SAR
							autonomy_state = autonomy_free
							end_wars = yes
							end_civil_wars = yes
						}
					}
				}
				every_country = {
					limit = {
						has_war_with = BYZ
					}
					white_peace = BYZ
				}
				BYZ = {
					dismantle_faction = yes
				}
				BYZ = {
					leave_faction = yes
				}
				set_global_flag = byz_capitulation
				news_event = news.81
				if = {
					limit = {
						country_exists = BYZ
					}
					BYZ = {
						country_event = {
							id = postwar.4
							days = 60
						}
					}
				}
				BYZ = {
					load_focus_tree = romea_lose_focus
				}
				if = {
					limit = {
						BYZ = {
							has_idea = world_power
						}
					}
					BYZ = {
						swap_ideas = {
							remove_idea = world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						BYZ = {
							has_idea = potential_world_power
						}
					}
					BYZ = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
			}
			#HIV capitulation
			if = {
				limit = {
					tag = HIV
					HIV = {
						has_country_flag = HIV_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
				}
			}
			#BUK capitulation
			if = {
				limit = {
					tag = BUK
					BUK = {
						has_country_flag = BUK_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
				}
			}
			#KOK capitulation
			if = {
				limit = {
					tag = KOK
					KOK = {
						has_country_flag = KOK_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = KOK
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = KOK
							transfer_troops = no
						}
					}
				}
			}
			#KIR capitulation
			if = {
				limit = {
					tag = KIR
					CPT = { has_country_flag = CPT_vs_KIR }
				}
				CPT = {
					white_peace = {
						tag = KIR
						message = CPT_win_KIR
					}
				}
				CPT = {
					transfer_state = 450
					transfer_state = 451
					transfer_state = 552
					transfer_state = 663
				}
				CPT = { clr_country_flag = CPT_vs_KIR }
				CPT = { set_country_flag = CPT_vs_KIR_win }
				CPT = { remove_ideas = eqyptian_wars }
				KIR = { remove_ideas = war_for_freedom }
				CPT = { set_cosmetic_tag = CPT_NAP }
				CPT = {
					swap_ideas = {
						remove_idea = little_country
						add_idea = medium_country
					}
				}
			}
			#TRI capitulation
			if = {
				limit = {
					tag = TRI
					CPT = { has_country_flag = CPT_vs_TRI }
				}
				CPT = {
					white_peace = {
						tag = TRI
						message = CPT_win_TRI
					}
				}
				CPT = {
					transfer_state = 273
					transfer_state = 448
					transfer_state = 449
					transfer_state = 661
					transfer_state = 662
				}
				CPT = { clr_country_flag = CPT_vs_TIR }
				CPT = { set_country_flag = CPT_vs_TIR_win }
				CPT = { remove_ideas = eqyptian_wars }
				TRI = { remove_ideas = war_for_freedom }
				CPT = {
					swap_ideas = {
						remove_idea = medium_country
						add_idea = large_country
					}
				}
			}
			#HUN capitulation
			if = {
				limit = {
					tag = HUN
					VLH = { has_country_flag = VLH_war_with_HUN }
				}
				VLH = {
					white_peace = {
						tag = HUN
						message = Hungaria_lose
					}
				}
				GLA = {
					white_peace = {
						tag = HUN
					}
				}
				VLH = {
					transfer_state = 76
					transfer_state = 82
					transfer_state = 83
					transfer_state = 84
				}
				if = {
					limit = {
						GLA = {
							has_country_flag = GLA_with_VLH
						}
					}
					GLA = {
						transfer_state = 71
						transfer_state = 73
					}
				}
				VLH = { clr_country_flag = VLH_war_with_HUN }
				GLA = { leave_faction = yes }
				VLH = { leave_faction = yes }
				VLH = { give_guarantee = GLA }
				GLA = { give_guarantee = VLH }
				PRU = { add_to_faction = HUN }
				news_event = news.75
			}
			#VLH capitulation
			if = {
				limit = {
					tag = VLH
					VLH = { has_country_flag = VLH_war_with_HUN }
				}
				HUN = {
					white_peace = {
						tag = VLH
						message = Hungaria_win
					}
				}
				HUN = {
					white_peace = {
						tag = GLA
					}
				}
				VLH = { clr_country_flag = VLH_war_with_HUN }
				GLA = { leave_faction = yes }
				VLH = { leave_faction = yes }
				46 = { set_demilitarized_zone = yes }
				79 = { set_demilitarized_zone = yes }
				80 = { set_demilitarized_zone = yes }
				81 = { set_demilitarized_zone = yes }
				88 = { set_demilitarized_zone = yes }
				89 = { set_demilitarized_zone = yes }
				news_event = news.74
			}
			if = {
				limit = {
					tag = VLH
					VLH = {
						has_country_flag = PRU_destroed_russian_allience_VLH
					}
				}
				if = {
					limit = {
						VLH = {
							has_idea = russian_help
						}
					}
					VLH = {
						remove_ideas = russian_help
					}
				}
				PRU = {
					transfer_state = 78
					if = {
						limit = {
							NOT = {
								BYZ = {
									is_in_faction_with = PRU
								}
							}
						}
						transfer_state = 766
					}
				}
				BYZ = {
					set_autonomy = {
						target = VLH
						autonomy_state = autonomy_aotsm_province
						end_wars = yes
						end_civil_wars = yes
					}
				}
				VLH = {
					set_cosmetic_tag = BYZ_ROM
				}
				VLH = {
					set_country_flag = VLHBYZ
				}
				if = {
					limit = {
						BYZ = {
							is_in_faction_with = PRU
						}
					}
					BCH = {
						transfer_state = 766
						add_state_core = 766
					}
				}
				VLH = { clr_country_flag = PRU_destroed_russian_allience_VLH }
				VLH = { set_country_flag = vlh_capitulation }
			}
			#GLA capitulation
			if = {
				limit = {
					tag = GLA
					GLA = {
						has_country_flag = PRU_destroed_russian_allience_GLA
					}
				}
				if = {
					limit = {
						GLA = {
							has_idea = russian_help
						}
					}
					GLA = {
						remove_ideas = russian_help
					}
				}
				PRU = {
					transfer_state = 80
					transfer_state = 89
					transfer_state = 91
				}
				HUN = {
					transfer_state = 71
					transfer_state = 73
				}
				PLH = {
					transfer_state = 88
					add_state_core = 88
				}
				GLA = { clr_country_flag = PRU_destroed_russian_allience_GLA }
			}
			#Punishment
			if = {
				limit = {
					has_country_flag = punished_begining
					OR = {
						has_war_with = PRU
						has_war_with = AUS
						has_war_with = FRN
					}
				}
				if = {
					limit = {
						PRU = {
							is_faction_leader = yes
						}
						NOT = {
							PRU = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = PRU
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_for_pru = ROOT }
						set_country_flag = german_union_for_prussian
						add_ideas = saint_allience_idea
					}
				}
				if = {
					limit = {
						AUS = {
							is_faction_leader = yes
						}
						NOT = {
							AUS = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = AUS
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_for_aus = ROOT }
						set_country_flag = german_union_for_austrian
						add_ideas = saint_allience_idea
					}
				}
				if = {
					limit = {
						FRN = {
							is_faction_leader = yes
						}
						NOT = {
							FRN = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = FRN
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_neutrality = ROOT }
						set_country_flag = german_union_neutrality
						add_ideas = saint_allience_idea
					}
				}
				ROOT = {
					set_country_flag = punished_succed
					clr_country_flag = punished_begining
					clr_country_flag = leave_german_union
				}
				if = {
					limit = {
						PRU = {
							is_faction_leader = yes
						}
					}
					PRU = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						AUS = {
							is_faction_leader = yes
						}
					}
					AUS = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						FRN = {
							is_faction_leader = yes
						}
					}
					FRN = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = was_leader_of_faction
						}
					}
					PRU = {
						clr_country_flag = was_leader_of_faction
						create_faction = PRU_Kontinentaleuropa_pakt
					}
					every_country = {
						limit = {
							has_country_flag = was_in_prussian_allience
						}
						PRU = { add_to_faction = PREV }
						clr_country_flag = was_in_prussian_allience
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = was_leader_of_faction
						}
					}
					AUS = {
						clr_country_flag = was_leader_of_faction
					}
					every_country = {
						limit = {
							has_country_flag = was_in_austrian_allience
						}
						AUS = { add_to_faction = PREV }
						clr_country_flag = was_in_austrian_allience
					}
				}
				if = {
					limit = {
						has_country_flag = leader_of_punished_coalition
					}
					if = {
						limit = {
							PRU = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = PRU
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}
					if = {
						limit = {
							AUS = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = AUS
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}
					if = {
						limit = {
							FRN = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = FRN
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}		
				}
			}
			#PRU annex bad boy
			if = {
				limit = {
					has_country_flag = PRU_war_with_you
					ROOT = {
						has_war_with = PRU
					}
				}
				PRU = {
					white_peace = ROOT
				}
				PRU = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
			#Last Prussian-Austrian war
			if = {
				limit = {
					tag = AUS
					AUS = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = PRU_VS_AUS_3
					}
					NOT = {
						AUS = {
							has_country_flag = aus_reborn
						}
					}
				}
				43 = {	
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				45 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				70 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				71 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				73 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				76 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				82 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				83 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				84 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				154 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				155 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				664 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				764 = {
					remove_dynamic_modifier = { modifier = AUS_state_hungarian_probleb_dynamic_modifier }
				}
				902 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				80 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				88 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				89 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				91 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				159 = {
					remove_dynamic_modifier = { modifier = AUS_state_italian_probleb_dynamic_modifier }
				}
				160 = {	
					remove_dynamic_modifier = { modifier = AUS_state_italian_probleb_dynamic_modifier }
				}
				102 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				103 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				109 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				163 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				763 = {
					remove_dynamic_modifier = { modifier = AUS_state_slavic_probleb_dynamic_modifier }
				}
				PRU = {
					white_peace = {
						tag = AUS
						message = wienna_peace
					}
				}
				AUS = {
					set_autonomy = {
						target = ZEN
						autonomy_state = autonomy_free
						end_wars = yes
						end_civil_wars = yes
					}
				}
				ZEN = {
					leave_faction = yes
				}
				every_country = {
					limit = {
						has_war_with = ZEN 
					}
					white_peace = {
						tag = ZEN
					}
				}
				HUN = {
					white_peace = {
						tag = AUS
					}
				}
				GLA = {
					white_peace = {
						tag = AUS
					}
				}
				VEN = {
					white_peace = {
						tag = AUS
					}
				}
				AUS = {
					set_country_flag = aus_reborn
				}
				if = {
					limit = {
						NOT = {
							country_exists = HUN
						}
					}
					HUN = {
						transfer_state = 43
						transfer_state = 45
						transfer_state = 70
						transfer_state = 71
						transfer_state = 73
						transfer_state = 76
						transfer_state = 82
						transfer_state = 83
						transfer_state = 84
						transfer_state = 154
						transfer_state = 155
						transfer_state = 664
						transfer_state = 764
						add_state_core = 43
						add_state_core = 45
						add_state_core = 70
						add_state_core = 71
						add_state_core = 73
						add_state_core = 76
						add_state_core = 82
						add_state_core = 83
						add_state_core = 84
						add_state_core = 103
						add_state_core = 109
						add_state_core = 154
						add_state_core = 155
						add_state_core = 664
						add_state_core = 764
						#load_focus_tree = hungarian_focus_tree
						inherit_technology = AUS
						load_oob = HUN_oob
					}
					AUS = {
						remove_state_core = 43
						remove_state_core = 45
						remove_state_core = 70
						remove_state_core = 71
						remove_state_core = 73
						remove_state_core = 76
						remove_state_core = 82
						remove_state_core = 83
						remove_state_core = 84
						remove_state_core = 154
						remove_state_core = 155
						remove_state_core = 664
						remove_state_core = 764
					}
				}
				if = {
					limit = {
						country_exists = HUN
					}
					HUN = {
						set_politics  = {
							ruling_party = authoritarian
						}
						#load_focus_tree = hungarian_focus_tree
						if = {
							limit = {
								AUS = {
									owns_state = 45
								}
							}
							HUN = {
								transfer_state = 45
								add_state_core = 45
							}
							AUS = {
								remove_state_core = 45
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 70
								}
							}
							HUN = {
								transfer_state = 70
								add_state_core = 70
							}
							AUS = {
								remove_state_core = 70
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 71
								}
							}
							HUN = {
								transfer_state = 71
								add_state_core = 71
							}
							AUS = {
								remove_state_core = 71
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 73
								}
							}
							HUN = {
								transfer_state = 73
								add_state_core = 73
							}
							AUS = {
								remove_state_core = 73
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 76
								}
							}
							HUN = {
								transfer_state = 76
								add_state_core = 76
							}
							AUS = {
								remove_state_core = 76
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 82
								}
							}
							HUN = {
								transfer_state = 82
								add_state_core = 82
							}
							AUS = {
								remove_state_core = 82
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 83
								}
							}
							HUN = {
								transfer_state = 83
								add_state_core = 83
							}
							AUS = {
								remove_state_core = 83
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 84
								}
							}
							HUN = {
								transfer_state = 84
								add_state_core = 84
							}
							AUS = {
								remove_state_core = 84
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 664
								}
							}
							HUN = {
								transfer_state = 664
								add_state_core = 664
							}
							AUS = {
								remove_state_core = 664
							}
						}
						if = {
							limit = {
								AUS = {
									owns_state = 764
								}
							}
							HUN = {
								transfer_state = 764
								add_state_core = 764
							}
							AUS = {
								remove_state_core = 764
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = GLA
						}
					}
					GLA = {
						transfer_state = 80
						transfer_state = 88
						transfer_state = 89
						transfer_state = 91
						add_state_core = 80
						add_state_core = 88
						add_state_core = 89
						add_state_core = 91
						inherit_technology = AUS
						load_oob = GLA_oob
					}
					AUS = {
						remove_state_core = 80
						remove_state_core = 88
						remove_state_core = 89
						remove_state_core = 91
					}
				}
				if = {
					limit = {
						country_exists = GLA
					}
					if = {
						limit = {
							AUS = {
								owns_state = 88
							}
						}
						GLA = {
							transfer_state = 88
							add_state_core = 88
						}
						AUS = {
							remove_state_core = 88
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = VEN
						}
					}
					VEN = {
						transfer_state = 159
						transfer_state = 160
						add_state_core = 159
						add_state_core = 160
						inherit_technology = AUS
						load_oob = VEN_oob
					}
				}
				BOH = {
					transfer_state = 9
					transfer_state = 69
					transfer_state = 72
					transfer_state = 74
					transfer_state = 75
					add_state_core = 9
					add_state_core = 69
					add_state_core = 72
					add_state_core = 74
					add_state_core = 75
					add_state_core = 810
					inherit_technology = AUS
					load_oob = BOH_oob
					set_cosmetic_tag = BOHPRU
				}
				AUS = {
					remove_state_core = 9
					remove_state_core = 69
					remove_state_core = 72
					remove_state_core = 74
					remove_state_core = 75
				}
				PRU = {
					transfer_state = 4
					transfer_state = 39
					transfer_state = 152
					transfer_state = 153
					transfer_state = 887
					add_state_core = 887
				}
				AUS = {
					remove_state_core = 4
					remove_state_core = 39
					remove_state_core = 152
					remove_state_core = 153
					remove_state_core = 159
					remove_state_core = 160
					remove_state_core = 887
				}
				if = {
					limit = {
						BYZ = {
							is_in_faction_with = PRU
						}
					}
					if = {
						limit = {
							BYZ = {
								has_country_flag = byz_imperia_politic
							}
						}
						BYZ = { 
							transfer_state = 102
							transfer_state = 103
							transfer_state = 109
							transfer_state = 163
							transfer_state = 736
						}
					}
					if = {
						limit = {
							BYZ = {
								has_country_flag = byz_democratic_politic
							}
						}
						DAL = {
							transfer_state = 102
							transfer_state = 103
							transfer_state = 109
							transfer_state = 163
							transfer_state = 736
						}
					}
					BYZ = { set_country_flag = BYZ_vs_AUS_win }
					AUS = {
						remove_state_core = 102
						remove_state_core = 103
						remove_state_core = 109
						remove_state_core = 163
						remove_state_core = 736
					}
				}
				if = {
					limit = {
						NOT = {
							BYZ = {
								is_in_faction_with = PRU
							}
						}
					}
					CRO = {	
						transfer_state = 103
						transfer_state = 109
						transfer_state = 163
						add_state_core = 103
						add_state_core = 109
						add_state_core = 163
					}
					SLO = {
						transfer_state = 102
						transfer_state = 736
						add_state_core = 102
						add_state_core = 736
					}
					AUS = {
						remove_state_core = 102
						remove_state_core = 103
						remove_state_core = 109
						remove_state_core = 163
						remove_state_core = 736
					}
				}
				PRU = { puppet = BOH }
				PRU = {
					transfer_state = 69
					add_state_core = 69
					transfer_state = 810
					add_state_core = 810
				}
				AUS = {
					remove_state_core = 69
					remove_state_core = 810
				}
				BOH = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 24
						socialism = 6
						reactionist = 26
						authoritarian = 44
					}
					add_country_leader_role = {
						character = BOH_Moris_fon_Bissing
						promote_leader = yes
						country_leader = {
							ideology = centrism
							expire = "1900.1.1.1"
							traits = { }
						}
					}
				}
				if = {
					limit = {
						VLH = {
							has_country_flag = VLH_CR
						}
					}
					VLH = {
						create_faction = ANTI-HUNGARY-ALLIENCE
					}
					GLA = {
						country_event = { id = te.13 hours = 12 }
					}
					VLH = {
						country_event = { id = te.14 days = 28 }
					}
				}
				if = {
					limit = {
						AUS = {
							owns_state = 902
						}
					}
					if = {
						limit = {
							country_exists = MOL
						}
						MOL = {
							transfer_state = 902
							add_state_core = 902
						}
					}
					if = {
						limit = {
							NOT = {
								country_exists = MOL
							}
						}
						VLH = {
							transfer_state = 902
							add_state_core = 902
						}
					}
					AUS = {
						remove_state_core = 902
					}
				}
				PRU = { set_country_flag = victory_R_V_A_3 }
				news_event = news.15 
				PRU = { clr_country_flag = PRU_vs_AUS_3 }
				set_global_flag = german_empire_now_exist
				if = {
					limit = {
						HUN = {
							has_country_flag = hun_has_revolution_aus
						}
					}
					HUN = {
						clr_country_flag = hun_has_revolution_aus
						remove_ideas = revolution_power
					}
				}
				if = {
					limit = {
						GLA = {
							has_country_flag = gla_has_revolution_aus
						}
					}
					GLA = {
						clr_country_flag = gla_has_revolution_aus
						remove_ideas = revolution_power
					}
				}
				if = {
					limit = {
						VEN = {
							has_country_flag = ven_has_revolution_aus
						}
					}
					VEN = {
						clr_country_flag = ven_has_revolution_aus
						remove_ideas = revolution_power
					}
				}
				ZEN = {
					transfer_state = 840
					add_state_core = 840
				}
				if = {
					limit = {
						BYZ = {
							is_in_faction_with = PRU
						}
					}
					ZUL = {
						transfer_state = 848
						add_state_core = 848
					}
				}
				if = {
					limit = {
						AUS = {
							owns_state = 848
						}
						country_exists = MAT
					}
					MAT = {
						transfer_state = 848
						add_state_core = 848
					}
				}
				if = {
					limit = {
						AUS = {
							owns_state = 848
						}
						NOT = {
							country_exists = MAT
						}
					}
					PRU = {
						transfer_state = 848
					}
				}
				AUS = {
					mark_focus_tree_layout_dirty = yes
				}
				ZEN = {
					country_event = {
						id = zen.1
						days = 26
					}
				}
				every_country = {
					limit = {
						has_idea = saint_allience_idea
					}
					remove_ideas = saint_allience_idea
				}
				every_country = {
					limit = {
						has_idea = creater_of_saint_allience_idea
					}
					remove_ideas = creater_of_saint_allience_idea
				}
				if = {
					limit = {
						AUS = {
							has_idea = rus_help_to_aus
						}
					}
					AUS = {
						remove_ideas = rus_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = frr_help_to_aus
						}
					}
					AUS = {
						remove_ideas = frr_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = cbi_help_to_aus
						}
					}
					AUS = {
						remove_ideas = cbi_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_russian
						}
					}
					AUS = {
						clr_country_flag = ask_russian
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_france
						}
					}
					AUS = {
						clr_country_flag = ask_france
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_cbi
						}
					}
					AUS = {
						clr_country_flag = ask_cbi
					}
				}
				if = {
					limit = {
						any_country = {
								has_country_flag = first_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = first_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = second_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = second_place_in_help_to_aus
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = second_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = third_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = third_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				set_variable = { global.help_aus_1_var = 0 }
				set_variable = { global.help_aus_2_var = 0 }
				set_variable = { global.help_aus_3_var = 0 }
			}
			#AUS win Hungary
			if = {
				limit = {
					tag = HUN
					HUN = {
						has_country_flag = hun_has_revolution_aus
					}
					HUN = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = HUN
						transfer_troops = no
					}
				}
				HUN = {
					clr_country_flag = hun_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#AUS win Galisian
			if = {
				limit = {
					tag = GLA
					GLA = {
						has_country_flag = gla_has_revolution_aus
					}
					GLA = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = GLA
						transfer_troops = no
					}
				}
				GLA = {
					clr_country_flag = gla_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#AUS win Venetian
			if = {
				limit = {
					tag = VEN
					VEN = {
						has_country_flag = ven_has_revolution_aus
					}
					VEN = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = VEN
						transfer_troops = no
					}
				}
				VEN = {
					clr_country_flag = ven_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#German civilwar PRU win
			if = {
				limit = {
					tag = SGE
					OR = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					SGE = {
						has_war_with = PRU
					}
					has_global_flag = prussian_civilwar
				}
				clr_global_flag = prussian_civilwar
				if = {
					limit = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
					}
					PRU = {
						clr_country_flag = first_civilwar_scenario
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
					}
					PRU = {
						clr_country_flag = second_civilwar_scenario
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					PRU = {
						clr_country_flag = third_civilwar_scenarion
					}
				}
				PRU = {
					white_peace = {
						tag = SGE
						message = PRU_win_SGE
					}
				}
				PRU = {
					annex_country = {
						target = SGE
						transfer_troops = no
					}
				}
			}
			#German civilwar SGE win
			if = {
				limit = {
					tag = PRU
					OR = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					SGE = {
						has_war_with = PRU
					}
					has_global_flag = prussian_civilwar
				}
				clr_global_flag = prussian_civilwar
				if = {
					limit = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
					}
					PRU = {
						clr_country_flag = first_civilwar_scenario
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
					}
					PRU = {
						clr_country_flag = second_civilwar_scenario
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					PRU = {
						clr_country_flag = third_civilwar_scenarion
					}
				}
				SGE = {
					white_peace = {
						tag = PRU
						message = SGE_win_PRU
					}
				}
				SGE = {
					annex_country = {
						target = PRU
						transfer_troops = no
					}
				}
			}
			#Revolution Turkish capitulation
			if = {
				limit = {
					tag = RTU
					RTU = {
						has_war_with = BYZ
					}
					has_global_flag = BYZ_student_revolt_inproggres
				}
				BYZ = {
					white_peace = {
						tag = RTU
						message = BYZ_win_student_war_RTU
					}
				}
				BYZ = {
					country_event = {
						id = byz_student_chain.12
						days = 1
					}
				}
			}
			#Pol civilwar
			if = {
				limit = {
					tag = PLH
					PLH = {
						has_war_with = POL
					}
					POL = {
						has_country_flag = pol_civilwar_plh
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					PRU = {
						annex_country = {
							target = PLH
							transfer_troops = no
						}
					}
				}
				PRU = {
					annex_country = {
						target = POL
						transfer_troops = no
					}
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
			#First Prussian-Austrian war
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_1
					}
					PRU = {
						has_war_with = AUS
					}
					OR = {
						9 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
						4 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
					}
				}
				PRU = { white_peace = AUS }
				AUS = { dismantle_faction = yes }
				PRU = { dismantle_faction = yes }
				every_other_country = {
					limit = {
						OR = {
							has_country_flag = german_union_for_prussian
							has_country_flag = german_union_for_austrian
						}
						OR = {
							tag = MCS
							tag = MCL
							tag = LBE
							tag = HLS
							tag = SLG
							tag = HAM
							tag = HAN
							tag = BRM
							tag = OLD
							tag = SAK
							tag = TYR
							tag = WEI
							tag = MEI
							tag = HES
							tag = WLD
							tag = FRN
							tag = KOL
						}
					}
					if = {
						limit = {
							tag = MCS
						}
					}
					if = {
						limit = {
							tag = MCL
						}
					}
					if = {
						limit = {
							tag = LBE
						}
					}
					if = {
						limit = {
							tag = HLS
						}
					}
					if = {
						limit = {
							tag = SLG
						}
					}
					if = {
						limit = {
							tag = HAM
						}
					}
					if = {
						limit = {
							tag = HAN
						}
						HAN = {
							set_character_name = {
								character = HAN_Georg_Hannoverskiy
								name = HAN_Georg_Hannoverskiy_none_king
							}
							set_nationality = {
								target_country = PRU
								character = HAN_Georg_Hannoverskiy
							}
							set_nationality = {
								target_country = PRU
								character = HAN_Adolf_Frederick
							}
						}
					}
					if = {
						limit = {
							tag = BRM
						}
					}
					if = {
						limit = {
							tag = OLD
						}
					}
					if = {
						limit = {
							tag = SAK
						}
					}
					if = {
						limit = {
							tag = TYR
						}
					}
					if = {
						limit = {
							tag = WEI
						}
					}
					if = {
						limit = {
							tag = MEI
						}
					}
					if = {
						limit = {
							tag = HES
						}
					}
					if = {
						limit = {
							tag = WLD
						}
					}
					if = {
						limit = {
							tag = FRN
						}
					}
					if = {
						limit = {
							tag = KOL
						}
					}
					PRU = {
						annex_country = { target = PREV transfer_troops = no }
					}
				}
				PRU = { set_country_flag = victory_R_V_A_1 }
				PRU = { set_cosmetic_tag = PRUNGU }
				news_event = { hours = 24 id = news.2 }
				PRU = { clr_country_flag = PRU_vs_AUS_1 }
				if = {
					limit = {
						AUS = {
							has_idea = AUS_never_surrender_idea
						}
					}
					AUS = {
						remove_ideas = AUS_never_surrender_idea
					}
				}
				if = {
					limit = {
						PRU = {
							has_idea = AUS_sabotage_pru
						}
					}
					PRU = {
						remove_ideas = AUS_sabotage_pru
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = rus_help_to_aus
						}
					}
					AUS = {
						remove_ideas = rus_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = frr_help_to_aus
						}
					}
					AUS = {
						remove_ideas = frr_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = cbi_help_to_aus
						}
					}
					AUS = {
						remove_ideas = cbi_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_russian
						}
					}
					AUS = {
						clr_country_flag = ask_russian
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_france
						}
					}
					AUS = {
						clr_country_flag = ask_france
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_cbi
						}
					}
					AUS = {
						clr_country_flag = ask_cbi
					}
				}
				if = {
					limit = {
						any_country = {
								has_country_flag = first_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var > 0.25
								}
								check_variable = {
									global.help_aus_1_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = first_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
					AUS = {
						add_timed_idea = {
							idea = aus_reparation_for_help_for_aus
							days = 180
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = second_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = second_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var > 0.25
								}
								check_variable = {
									global.help_aus_2_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = second_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = third_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var > 0.25
								}
								check_variable = {
									global.help_aus_3_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = third_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				set_variable = { global.help_aus_1_var = 0 }
				set_variable = { global.help_aus_2_var = 0 }
				set_variable = { global.help_aus_3_var = 0 }
				AUS = {
					mark_focus_tree_layout_dirty = yes
				}
				AUS = {
					delete_unit_template_and_units = {
						division_template = "Baeuerliche Division"
						disband = yes 
					}
				}
				AUS = {
					remove_mission = first_brother_war_decision
				}
				PRU = {
					remove_mission = first_brother_war_decision
				}
			}
			#Second Prussian-Austrian war
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_2
					}
					PRU = {
						has_war_with = AUS
					}
					AUS = {
						surrender_progress > 0.40
					}
					OR = {
						9 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
						4 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
					}
				}
				PRU = { white_peace = AUS }
				PRU = { set_country_flag = victory_R_V_A_2 }
				PRU = { clr_country_flag = PRU_vs_AUS_2 }
				AUS = { dismantle_faction = yes }
				if = {
					limit = {
						has_country_flag = time_member_of_allience
						NOT = {
							tag = PRU
						}
					}
					leave_faction = yes
					clr_country_flag = time_member_of_allience
				}
				every_other_country = {
					limit = {
						OR = {
							has_country_flag = german_union_for_prussian
							has_country_flag = german_union_for_austrian
						}
						OR = {
							tag = BAV
							tag = VUR
							tag = HOH
							tag = BAD
							tag = ELS
						}
					}
					if = {
						limit = {
							tag = BAV
						}
						BAV = {
							set_nationality = {
								target_country = PRU
								character = BAV_Karl_Bavarian
							}
							set_nationality = {
								target_country = PRU
								character = BAV_Luitpold_Karl_Iosif
							}
						}
					}
					if = {
						limit = {
							tag = VUR
						}
					}
					if = {
						limit = {
							tag = HOH
						}
					}
					if = {
						limit = {
							tag = BAD
						}
					}
					if = {
						limit = {
							tag = ELS
						}
					}
					PRU = {
						annex_country = { target = PREV transfer_troops = no }
					}
				}
				every_other_country = {
					limit = {
						has_country_flag = german_union_for_austrian
					}
					clr_country_flag = german_union_for_austrian
					remove_from_array = { global.german_union_for_aus = ROOT }
					set_country_flag = german_union_for_prussian
					add_to_array = { global.german_union_for_pru = ROOT }
				}
				AUS = {
					remove_from_array = { global.german_union_leader = AUS }
					remove_ideas = creater_of_saint_allience_idea
				}
				news_event = { hours = 24 id = news.13 }
				AUS = {
					mark_focus_tree_layout_dirty = yes
				}
				if = {
					limit = {
						AUS = {
							has_completed_focus = AUS_create_OEA
						}
					}
					AUS = {
						create_faction = OEA_faction
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = AUS_never_surrender_idea
						}
					}
					AUS = {
						remove_ideas = AUS_never_surrender_idea
					}
				}
				if = {
					limit = {
						PRU = {
							has_idea = AUS_sabotage_pru
						}
					}
					PRU = {
						remove_ideas = AUS_sabotage_pru
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = rus_help_to_aus
						}
					}
					AUS = {
						remove_ideas = rus_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = frr_help_to_aus
						}
					}
					AUS = {
						remove_ideas = frr_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_idea = cbi_help_to_aus
						}
					}
					AUS = {
						remove_ideas = cbi_help_to_aus
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_russian
						}
					}
					AUS = {
						clr_country_flag = ask_russian
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_france
						}
					}
					AUS = {
						clr_country_flag = ask_france
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = ask_cbi
						}
					}
					AUS = {
						clr_country_flag = ask_cbi
					}
				}
				if = {
					limit = {
						any_country = {
								has_country_flag = first_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var > 0.25
								}
								check_variable = {
									global.help_aus_1_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_1_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = first_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
					AUS = {
						add_timed_idea = {
							idea = aus_reparation_for_help_for_aus
							days = 180
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = second_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = second_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var > 0.25
								}
								check_variable = {
									global.help_aus_2_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_2_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = second_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = third_place_in_help_to_aus
						}
					}
					every_country = {
						limit = {
							has_country_flag = first_place_in_help_to_aus
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var < 0.26
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_little
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var > 0.25
								}
								check_variable = {
									global.help_aus_3_var < 0.51
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_medium
								days = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									global.help_aus_3_var > 0.50
								}
							}
							add_timed_idea = {
								idea = aus_reparation_for_help_more
								days = 180
							}
						}
						clr_country_flag = chose_help_to_aus_flag
						clr_country_flag = third_place_in_help_to_aus
						if = {
							limit = {
								tag = RUS
							}
							remove_from_array = { global.austrian_help = RUS }
						}
						if = {
							limit = {
								tag = FRR
							}
							remove_from_array = { global.austrian_help = FRR }
						}
						if = {
							limit = {
								tag = CBI
							}
							remove_from_array = { global.austrian_help = CBI }
						}
					}
				}
				set_variable = { global.help_aus_1_var = 0 }
				set_variable = { global.help_aus_2_var = 0 }
				set_variable = { global.help_aus_3_var = 0 }
			}
			#Balkan war BYZ win
			if = {
				limit = {
					BYZ = {
						has_war_with = AUS
					}
					has_global_flag = balkan_war_aus_vs_byz
					4 = {
						controller = {
							OR = {
								tag = BYZ
								is_subject_of = BYZ
								is_in_faction_with = BYZ
							}
						}
					}
				}
				BYZ = {
					white_peace = {
						tag = AUS
						message = viena_peace_tt
					}
				}
				clr_global_flag = balkan_war_aus_vs_byz
				BYZ = {
					set_country_flag = BYZ_vs_AUS_win
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_democratic_politic
						}
					}
					DAL = {
						transfer_state = 102
						transfer_state = 103
						transfer_state = 109
						transfer_state = 163
						transfer_state = 736
					}
				}
				if = {
					limit = {
						BYZ = {
							NOT = {
								has_country_flag = byz_democratic_politic
							}
						}
					}
					BYZ = {
						transfer_state = 102
						transfer_state = 103
						transfer_state = 109
						transfer_state = 163
						transfer_state = 736
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = VEN
						}
					}
					VEN = {
						transfer_state = 159
						transfer_state = 160
						add_state_core = 159
						add_state_core = 160
						inherit_technology = AUS
						load_oob = VEN_oob
					}
				}
				AUS = {
					remove_state_core = 102
					remove_state_core = 103
					remove_state_core = 159
					remove_state_core = 160
					remove_state_core = 163
					remove_state_core = 736
				}
				AUS = {
					remove_ideas = war_for_the_balkan_idea
				}
				BYZ = {
					remove_ideas = war_for_the_balkan_idea
				}
				news_event = news.129
			}
			#Balkan war AUS win
			if = {
				limit = {
					AUS = {
						has_war_with = BYZ
					}
					has_global_flag = balkan_war_aus_vs_byz
					47 = {
						controller = {
							OR = {
								tag = AUS
								is_subject_of = AUS
								is_in_faction_with = AUS
							}
						}
					}
				}
				AUS = {
					white_peace = {
						tag = BYZ
						message = athens_peace_tt
					}
				}
				clr_global_flag = balkan_war_aus_vs_byz
				BYZ = {
					set_country_flag = lose_balkan_war
				}	
				AUS = {
					transfer_state = 104
					transfer_state = 105
					transfer_state = 107
					transfer_state = 108
					transfer_state = 802
					transfer_state = 804
				}
				AUS = {
					remove_ideas = war_for_the_balkan_idea
				}
				BYZ = {
					remove_ideas = war_for_the_balkan_idea
				}
				news_event = news.130
			}
		}
	}
}