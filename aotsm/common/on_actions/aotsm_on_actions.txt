on_actions = {
	
	#Story Event
	
	on_startup = {
		effect = {
			if = {
				limit = {
					has_game_rule = {
						rule = division_limite_rule 
						option = yes
					}
				}
				every_country = {
					calculate_maximum_divisions = yes
				}
			}
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = history.1
			}
			
			set_variable = { global.number_of_international_faction_members = 0 }
			
			set_variable = { var = leaver_number value = 0 }
			
			NEN = { country_event = { id = nen.1 days = 10 } }
			RUS = { country_event = { id = pol.1 days = 2100 } }
			RUS = { country_event = { id = rusPol.6 days = 30 } }
			RUS = { country_event = { id = rusPol.17 days = 491 } }
			RUS = { country_event = { id = rus_inventorisation_on_army_warehouses_event.1 days = 218 } }
			RUS = { country_event = { id = finland_quiestion_event.4 days = 421 } }
			RUS = { country_event = { id = russian_socialist_political_event.1 days = 100 } } #подкоректировать количество дней
			KAZ = { country_event = { id = kaz_t_pakt.1 days = 795 } }
			JAP = { country_event = { id = jap.1 days = 120 } }
			FRR = { country_event = { id = fren.11 days = 920 } }
			FRR = { country_event = { id = fren.12 days = 924 } }
			SOS = { country_event = { id = sos.1 days = 951 } }
			BYZ = { country_event = { id = script_event.3 days = 2 } }
			BYZ = { country_event = { id = script_event.7 days = 2 } }
			BYZ = { country_event = { id = byz.54 days = 1410 } }
			BYZ = { country_event = { id = byz_lore.1 days = 352 } }
			BYZ = { country_event = { id = byz_lore.2 days = 3 } }
			BYZ = { country_event = { id = byz.64 days = 2218 } }
			BYZ = { country_event = { id = byz.70 days = 22 } }
			QIN = { country_event = { id = qin.1 days = 381 } }
			QIN = { country_event = { id = qin.2 days = 1171 } } #ранее 811
			CBI = { country_event = { id = CBI.100 days = 254 } }
			MRH = { country_event = { id = mrh_rajputana_situation_event.1 days = 821 } }
			723 = { owner = { country_event = { id = crush_event.1 days = 2212 } } }
			
			add_to_array = { global.railway_union_members = PRU }
			add_to_array = { global.railway_union_members = AUS }
			add_to_array = { global.railway_union_members = BAV }
			add_to_array = { global.railway_union_members = FRN }
			add_to_array = { global.railway_union_members = FRR }
			add_to_array = { global.railway_union_members = SLG }
			add_to_array = { global.railway_union_members = MCL }
			add_to_array = { global.railway_union_members = HAN }
			add_to_array = { global.railway_union_members = SAK }
			add_to_array = { global.railway_union_members = TYR }
			add_to_array = { global.railway_union_members = VUR }
			add_to_array = { global.railway_union_members = BAD }
			add_to_array = { global.railway_union_members = HOL }
			add_to_array = { global.railway_union_members = BEL }
			add_to_array = { global.railway_union_members = SWI }
			
			set_variable = { voteyes = 0 }
			set_variable = { novote = 0 }
			set_variable = { voteno = 0 }
			
			add_to_array = { global.german_union_members = PRU }
			add_to_array = { global.german_union_members = HOH }
			add_to_array = { global.german_union_members = AUS }
			add_to_array = { global.german_union_members = LIE }
			add_to_array = { global.german_union_members = FRN }
			add_to_array = { global.german_union_members = ELS }
			add_to_array = { global.german_union_members = BAV }
			add_to_array = { global.german_union_members = KOL }
			add_to_array = { global.german_union_members = SAK }
			add_to_array = { global.german_union_members = TYR }
			add_to_array = { global.german_union_members = MCS }
			add_to_array = { global.german_union_members = LBE }
			add_to_array = { global.german_union_members = HAM }
			add_to_array = { global.german_union_members = BRM }
			add_to_array = { global.german_union_members = WLD }
			add_to_array = { global.german_union_members = WEI }
			add_to_array = { global.german_union_members = MEI }
			add_to_array = { global.german_union_members = HES }
			add_to_array = { global.german_union_members = BAD }
			add_to_array = { global.german_union_members = MCL }
			add_to_array = { global.german_union_members = VUR }
			add_to_array = { global.german_union_members = OLD }
			add_to_array = { global.german_union_members = SLG }
			add_to_array = { global.german_union_members = HLS }
			add_to_array = { global.german_union_members = HAN }
			add_to_array = { global.german_union_members = LUX }
			add_to_array = { global.german_union_members = SWI }
			
			add_to_array = { global.german_union_leader = PRU }
			add_to_array = { global.german_union_leader = AUS }
			add_to_array = { global.german_union_leader = FRN }
			
			add_to_array = { global.german_union_for_pru = HOH }
			add_to_array = { global.german_union_for_pru = FRN }
			add_to_array = { global.german_union_for_pru = HES }
			add_to_array = { global.german_union_for_pru = KOL }
			add_to_array = { global.german_union_for_pru = MCL }
			
			add_to_array = { global.german_union_for_aus = BAV }
			add_to_array = { global.german_union_for_aus = SAK }
			add_to_array = { global.german_union_for_aus = TYR }
			
			add_to_array = { global.german_union_neutrality = LIE }
			add_to_array = { global.german_union_neutrality = ELS }
			add_to_array = { global.german_union_neutrality = MCS }
			add_to_array = { global.german_union_neutrality = LBE }
			add_to_array = { global.german_union_neutrality = HAM }
			add_to_array = { global.german_union_neutrality = BRM }
			add_to_array = { global.german_union_neutrality = WLD }
			add_to_array = { global.german_union_neutrality = WEI }
			add_to_array = { global.german_union_neutrality = MEI }
			add_to_array = { global.german_union_neutrality = BAD }
			add_to_array = { global.german_union_neutrality = VUR }
			add_to_array = { global.german_union_neutrality = OLD }
			add_to_array = { global.german_union_neutrality = SLG }
			add_to_array = { global.german_union_neutrality = HLS }
			add_to_array = { global.german_union_neutrality = HAN }
			add_to_array = { global.german_union_neutrality = LUX }
			add_to_array = { global.german_union_neutrality = SWI }
			
			set_variable = { global.help_aus_1_var = 0 }
			set_variable = { global.help_aus_2_var = 0 }
			set_variable = { global.help_aus_3_var = 0 }
			
			every_country = {
				limit = {
					has_idea = backward_nation
				}
				PREV = {
					set_variable = { PREV.progress_of_westornisation_frame = 1 }
					set_variable = { PREV.westornisation_background_frame = 1 }
					set_variable = { PREV.westernisation_progress_pointer = 0 }
				}
			}
			
			every_country = {
				limit = {
					has_idea = lagging_nation
				}
				PREV = {
					set_variable = { PREV.progress_of_westornisation_frame = 2 }
					set_variable = { PREV.westornisation_background_frame = 2 }
					set_variable = { PREV.westernisation_progress_pointer = 0 }
				}
			}
			
			every_country = {
				limit = {
					has_idea = westernizing_nation
				}
				PREV = {
					set_variable = { PREV.progress_of_westornisation_frame = 3 }
					set_variable = { PREV.westornisation_background_frame = 3 }
					set_variable = { PREV.westernisation_progress_pointer = 0 }
				}
			}
			
			every_country = {
				limit = {
					has_idea = westernisation_end
				}
				PREV = {
					set_variable = { PREV.progress_of_westornisation_frame = 4 }
					set_variable = { PREV.westornisation_background_frame = 4 }
					set_variable = { PREV.westernisation_progress_pointer = 100 }
				}
			}
			
			every_country = {
				limit = {
					has_idea = saint_allience_idea
				}
				activate_mission = first_german_congress
				activate_mission = second_german_congress
				activate_mission = third_german_congress
			}
			
			FRR = {
				if = {
					limit = { 
						NOT = { is_historical_focus_on = yes }
					}
					random_list = {
						35 = {
							set_country_flag = FRR_AI_REACTIONIST
						}
						5 = {
							set_country_flag = FRR_AI_AUTHORITARIAN_ALTERNATIVE
						}
						20 = {
							set_country_flag = FRR_AI_AUTHORITARIAN
						}
						30 = {
							set_country_flag = FRR_AI_SOCIALIST
						}
						10 = {
							set_country_flag = FRR_AI_DEMOCRATIC
						}
					}
				}
			}
			PRU = { 
				if = {
					limit = {
						has_game_rule = {
							rule = PRU_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						100 = { PRU = { set_country_flag = PRU_AI_RANDOM_HISTORICAL } }
					}
				}
			}
			BYZ = {
				if = {
					limit = {
						has_game_rule = {
							rule = BYZ_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						100 = { BYZ = { set_country_flag = BYZ_AI_RANDOM_HISTORICAL } }
					}
				}
			}
			#PRT = {
			#	if = {
			#		limit = {
			#			has_game_rule = {
			#				rule = PRT_ai_behavior
			#				option = RANDOM
			#			}
			#		}
			#		random_list = {
			#			100 = { PRT = { set_country_flag = PRT_AI_RANDOM_HISTORICAL } }
			#		}
			#	}
			#}
		}
	}
	
	on_daily = {
		effect = {
			if = {
				limit = {
					has_country_flag = railways_member_flag
					NOT = {
						is_in_array = {
							array = global.railway_union_members
							value = ROOT
						}
					}
				}
				add_to_array = { global.railway_union_members = ROOT }
			}
		}
	}
	
	on_weekly = {
		effect = {	
			if = {
				limit = {
					has_game_rule = {
						rule = division_limite_rule 
						option = yes
					}
				}
				calculate_maximum_divisions = yes
			}
#			if = {
#				limit = {
#					date > 1853.9.1
#					RUS = {
#						is_ai = yes
#						has_idea = limited_conscription
#					}
#					NOT = {
#						RUS = {
#							has_country_flag = idea_swap_flag_r
#						}
#					}
#				}
#				RUS = {
#					swap_ideas = {
#						remove_idea = limited_conscription
#						add_idea = extensive_conscription
#					}
#					set_country_flag = idea_swap_flag_r
#				}
#			}
			if = {
				limit = {
					tag = MON
					has_cosmetic_tag = MON_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				MON = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = MAN
					has_cosmetic_tag = MAN_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				MAN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SHN
					has_cosmetic_tag = SHN_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				SHN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SHA
					has_cosmetic_tag = SHA_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				SHA = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SIC
					has_cosmetic_tag = SIC_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				SIC = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = CHN
					has_cosmetic_tag = CHN_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				CHN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = CND
					has_cosmetic_tag = CND_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				CND = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = GNS
					has_cosmetic_tag = GNS_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				GNS = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SDZ
					has_cosmetic_tag = SDZ_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				SDZ = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = YUN
					has_cosmetic_tag = YUN_QIN_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = QIN 
							is_subject_of = QIN
						}
					}
				}
				YUN = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = SON
					has_cosmetic_tag = PRT_SON	
					NOT = { 
						OR ={
							is_puppet_of = PRT 
							is_subject_of = PRT
						}
					}
				}
				SON = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = PAS
					has_cosmetic_tag = PRT_PUPPET	
					NOT = { 
						OR ={
							is_puppet_of = PRT 
							is_subject_of = PRT
						}
					}
				}
				PAS = { drop_cosmetic_tag = yes }
			}
#			if = {
#				limit = {
#					tag = SON
#					has_idea = SON_portugal_colonial_administration
#					NOT = { is_puppet_of = PRT }
#				}
#				SON = { remove_ideas = SON_portugal_colonial_administration }
#			}
#			if = {
#				limit = {
#					tag = PAS
#					has_idea = SON_portugal_colonial_administration
#					NOT = { is_puppet_of = PRT }
#				}
#				PAS = { remove_ideas = SON_portugal_colonial_administration }
#			}
#			if = {
#				limit = {
#					RUS = {
#						has_more_than_49_ic = yes
#						has_idea = RUS_dependence_from_import
#					}			
#				}
#				RUS = { remove_ideas = RUS_dependence_from_import }
#			}
		}
	}
	
	on_capitulation = {
		effect = {
			#FRRvsFRM - result_of_french_civil_war 
			if = {
				limit = {
					tag = FRR
					has_global_flag = french_civil_war_started_flag
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = FRM
							has_war_with = FRR
						}
						white_peace = FRR
					}
				}
				FRM = {
					white_peace = FRR
					
					transfer_state = 15
					transfer_state = 29
					transfer_state = 785
					transfer_state = 16
					transfer_state = 30
					transfer_state = 24
					transfer_state = 33
					set_cosmetic_tag = FRM_LEGAL
				}
				if = {
					limit = {
						NWA = {
							country_exists = yes
						}
					}
					FRR = {
						annex_country = {
							target = NWA
							transfer_troops = yes
						}
						set_capital = {
							state = 459
						}
					}
				}

				clr_global_flag = french_civil_war_started_flag
				set_global_flag = french_civil_war_end_flag
				#news_event = news.273
				add_threat = 5
			}
			if = {
				limit = {
					tag = FRM
					has_global_flag = french_civil_war_started_flag
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = FRR
							has_war_with = FRM
						}
						white_peace = FRM
					}
				}
				FRR = {
					white_peace = FRM
					
					transfer_state = 23
					transfer_state = 27
					transfer_state = 18
					transfer_state = 17	
				}

				clr_global_flag = french_civil_war_started_flag
				set_global_flag = french_civil_war_end_flag
				#news_event = news.273 
				add_threat = 5
			}
			#RBL capitulation - ignatiev uprising failed
			if = {
				limit = {
					tag = RBL
					has_global_flag = rbl_uprising_started
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = RBL
						}
						white_peace = RBL
					}
				}
				RUS = {
					white_peace = {
						tag = RBL
						message = RBL_uprising_failed
					} 					
					RUS = {
						annex_country = {
							target = RBL
							transfer_troops = no
						}
					}
					
				}
				RBL = {
					remove_state_core = 220
					remove_state_core = 240
					remove_state_core = 258
					remove_state_core = 257
					remove_state_core = 260
				}
				RUS = { country_event = { id = rus_rbl_uprising_event.5 days = 2 } }
				clr_global_flag = rbl_uprising_started
				set_global_flag = rbl_uprising_failed
				news_event = news.273
				add_threat = 1
			}
			#KAZ capitulation - rus socialist invasion completed
			if = {
				limit = {
					tag = KAZ
					RUS = { has_country_flag = RUS_soc_agressive_politic_c_a }
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = KAZ
						}
						white_peace = KAZ
					}
					if = {
						limit = {
							is_in_faction_with = KAZ
						}
						white_peace = RUS
					}
				}
				KAZ = {
					if = {
						limit = {
							is_faction_leader = yes
						}
						dismantle_faction = yes
					}
				}
				RUS = {
					white_peace = {
						tag = KAZ
						message = KAZ_conquered
					} 					
					RUS = {
						annex_country = {
							target = KAZ
							transfer_troops = no
						}
					}
					country_event = { id = russian_socialist_sphere_event.22 days = 20 } #ивент вопрос - расширяться дальше или нет
				}
				
				news_event = news.257 #тут должен быть новостной о успешном завершении вторжения России
				add_threat = 2
			}
			#RUS capitulation - KAZ win - rus socialist invasion fail
			if = {
				limit = {
					tag = RUS
					RUS = { has_country_flag = RUS_soc_agressive_politic_c_a }
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = KAZ
						}
						white_peace = KAZ
					}
					if = {
						limit = {
							is_in_faction_with = KAZ
							has_war_with = RUS
						}
						white_peace = RUS
					}
				}
				KAZ = {
					white_peace = RUS					
				}
				
				news_event = news.258 #
				add_threat = 2
			}
			#BUK capitulation - rus socialist invasion completed
			if = {
				limit = {
					tag = BUK
					RUS = { has_country_flag = RUS_unlock_mission_annex_buk }
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = BUK
						}
						white_peace = BUK
					}
				}
				RUS = {
					white_peace = BUK					
					RUS = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
					
				}
				
				add_threat = 2
			}
			#HIV capitulation - rus socialist invasion completed
			if = {
				limit = {
					tag = HIV
					RUS = { has_country_flag = RUS_unlock_mission_annex_hiv }
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = HIV
						}
						white_peace = HIV
					}
				}
				RUS = {
					white_peace = HIV					
					RUS = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
					
				}
				
				add_threat = 2
			}
			#PLH capitulation - Polish uprising failed - Germany ignore Poland
			if = {
				limit = {
					tag = PLH
					has_global_flag = pru_ignore_poland_uprising
				}
				RUS = {
					white_peace = {
						tag = PLH
						message = PLH_uprising_failed
					} 					
					RUS = {
						annex_country = {
							target = PLH
							transfer_troops = no
						}
					}
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = PLH
						}
						white_peace = PLH
					}
				}
				
				PLH = {
					remove_state_core = 10
					remove_state_core = 87
					remove_state_core = 90
					remove_state_core = 92
					remove_state_core = 97
					remove_state_core = 98
					remove_state_core = 853
				}
				if = {
					limit = {
						853 = {
							NOT = { is_core_of = RUS }
						}
					}
					RUS = { add_state_core = 853 }
				}
				if = {
					limit = {
						98 = {
							NOT = { is_core_of = RUS }
						}					
					}
					RUS = { add_state_core = 98 }
				}
				if = {
					limit = {
						97 = {
							NOT = { is_core_of = RUS }
						}						
					}
					RUS = { add_state_core = 97 }
				}
				if = {
					limit = {
						92 = {
							NOT = { is_core_of = RUS }
						}
					}
					RUS = { add_state_core = 92 }
				}
				if = {
					limit = {
						90 = {
							NOT = { is_core_of = RUS }
						}					
					}
					RUS = { add_state_core = 90 }
				}
				if = {
					limit = {
						87 = {
							NOT = { is_core_of = RUS }
						}
					}
					RUS = { add_state_core = 87 }
				}
				if = {
					limit = {
						10 = {
							NOT = { is_core_of = RUS }
						}
					}
					RUS = { add_state_core = 10 }
				}
				RUS = {
					country_event = { id = rus_poland_situation_event.1 days = 7}
				}
				add_threat = 5
			}
			#JAP capitulation - RUS annex sakhalin
			if = {
				limit = {
					tag = JAP
					JAP = { has_country_flag = JAPFULLJAP }
					RUS = { has_country_flag = RUS_sakhalin_war_plan }
				}
				RUS = {
					white_peace = {
						tag = JAP
						message = JAP_lost_sakhalin
					} 					
					transfer_state = 537
					transfer_state = 655
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}					

				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = JAP
						}
						white_peace = JAP
					}
				}
				
				JAP = {
					remove_state_core = 537
					remove_state_core = 655
				}

				add_threat = 2
			}
			#JAS capitulation - RUS annex sakhalin
			if = {
				limit = {
					tag = JAS
					JAS = { has_country_flag = JASFULLJAP }
					RUS = { has_country_flag = RUS_sakhalin_war_plan }
				}
				RUS = {
					white_peace = {
						tag = JAS
						message = JAS_lost_sakhalin
					} 					
					transfer_state = 537
					transfer_state = 655
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = JAS
						}
						white_peace = JAS
					}
				}
				
				JAS = {
					remove_state_core = 537
					remove_state_core = 655
				}

				add_threat = 2
			}
			#TUK capitulation - RUS annex sakhalin
			if = {
				limit = {
					tag = TUK
					JAS = { has_country_flag = TUKFULLJAP }
					RUS = { has_country_flag = RUS_sakhalin_war_plan }
				}
				RUS = {
					white_peace = {
						tag = TUK
						message = TUK_lost_sakhalin
					} 					
					transfer_state = 537
					transfer_state = 655
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = TUK
						}
						white_peace = TUK
					}
				}
				
				TUK = {
					remove_state_core = 537
					remove_state_core = 655
				}

				add_threat = 2
			}
			#KAZ capitulation - RUS annex region
			if = {
				limit = {
					tag = KAZ
					RUS = { has_country_flag = RUS_invasion_in_kaz_flag }
				}
				
				if = {
					limit = {
						BUK = {
							is_in_faction_with = KAZ
							has_war_with = RUS
						}
					}
					RUS = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
				}
				
				if = {
					limit = {
						HIV = {
							is_in_faction_with = KAZ
							has_war_with = RUS
						}
					}
					RUS = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
				}				
				
				RUS = {
					white_peace = {
						tag = KAZ
						message = KAZ_conquered
					}
					transfer_state = 402
					transfer_state = 404
					transfer_state = 405
					transfer_state = 586
					transfer_state = 587
					transfer_state = 589
					clr_country_flag = RUS_invasion_in_kaz_flag
					set_country_flag = RUS_invasion_in_kaz_flag_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = KAZ
						}
						white_peace = KAZ
					}
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = KAZ
							has_war_with = RUS
							NOT = {
								tag = HIV
								tag = BUK
							}
						}
						white_peace = RUS
					}
				}
				
				add_threat = 2
			}
			#HIV capitulation - RUS annex region
			if = {
				limit = {
					tag = HIV
					RUS = { has_country_flag = RUS_invasion_in_hiv_flag }
				}
				RUS = {
					white_peace = {
						tag = HIV
						message = HIV_conquered
					}
					transfer_state = 584
					transfer_state = 585
					clr_country_flag = RUS_invasion_in_hiv_flag
					set_country_flag = RUS_invasion_in_hiv_flag_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = HIV
						}
						white_peace = HIV
					}
				}
				
				add_threat = 2
			}
			#BUK capitulation - RUS annex region
			if = {
				limit = {
					tag = BUK
					RUS = { has_country_flag = RUS_invasion_in_buk_flag }
				}
				RUS = {
					white_peace = {
						tag = BUK
						message = BUK_conquered
					}
					transfer_state = 732
					transfer_state = 742
					clr_country_flag = RUS_invasion_in_buk_flag
					set_country_flag = RUS_invasion_in_buk_flag_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = BUK
						}
						white_peace = BUK
					}
				}
				
				add_threat = 2
			}
			#SOS capitulation - reformist uprising finished
			if = {
				limit = {
					tag = SOS
					has_global_flag = somali_civil_war 
				}
				SOR = {
					white_peace = {
						tag = SOS
						message = SOS_lose
					}
					remove_ideas = SOR_civil_war
					drop_cosmetic_tag = yes
					transfer_state = 559
					transfer_state = 830
					transfer_state = 910
					transfer_state = 912
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = SOR
							has_war_with = SOS
						}
						white_peace = SOS
					}
				}
				
				SOS = {
					remove_ideas = SOS_civil_war
					remove_state_core = 268
					remove_state_core = 269
					remove_state_core = 559
					remove_state_core = 830
					remove_state_core = 831
					remove_state_core = 909
					remove_state_core = 910
					remove_state_core = 911
					remove_state_core = 912
				}
				
				add_threat = 2
				clr_global_flag = somali_civil_war		
				set_global_flag = somali_civil_war_end
				news_event = { id = news.136 hours = 24 }
			}
			#SOR capitulation - reformist uprising failed
			if = {
				limit = {
					tag = SOR
					has_global_flag = somali_civil_war 
				}
				SOS = {
					white_peace = {
						tag = SOR
						message = SOR_lose
					}
					remove_ideas = SOS_civil_war
					transfer_state = 268
					transfer_state = 269
					transfer_state = 831
					transfer_state = 909
					transfer_state = 911
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = SOS
							has_war_with = SOR
						}
						white_peace = SOR
					}
				}
				
				SOR = {
					remove_ideas = SOR_civil_war
					remove_state_core = 268
					remove_state_core = 269
					remove_state_core = 559
					remove_state_core = 830
					remove_state_core = 831
					remove_state_core = 909
					remove_state_core = 910
					remove_state_core = 911
					remove_state_core = 912
				}
				
				add_threat = 2
				clr_global_flag = somali_civil_war		
				set_global_flag = somali_civil_war_end
				news_event = { id = news.137 hours = 24 }
			}
			#TPN capitulation - taypin uprising failed
			if = {
				limit = {
					tag = TPN
					has_global_flag = taypin_uprising_started 
				}				
				QIN = { 
					white_peace = {
						tag = TPN
						message = TPN_lose
					}					
					transfer_state = 591
					transfer_state = 592
					transfer_state = 593
					transfer_state = 596
					transfer_state = 600
					transfer_state = 602
					transfer_state = 606
					transfer_state = 748
					transfer_state = 749
					remove_ideas = QIN_stagnation_of_empire_1 #временная мера, потом вырезать
					remove_ideas = QIN_tpn_uprising 
				}
				every_country = { #временная мера
					limit = {
						OR = {
							is_puppet_of = QIN
							is_subject_of = QIN
						}
						has_idea = QIN_vassal_stagnation
					}
					remove_ideas = QIN_vassal_stagnation
				}
				every_country = { #временная мера
					limit = {
						OR = {
							is_puppet_of = QIN
							is_subject_of = QIN
						}
						has_idea = QIN_nominal_vassalitet
					}
					remove_ideas = QIN_nominal_vassalitet
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = QIN
							has_war_with = TPN
						}
						white_peace = TPN
					}
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = TPN
							has_war_with = QIN
						}
						white_peace = QIN
					}
				}
				TPN = {
					remove_state_core = 325
					remove_state_core = 524
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 597
					remove_state_core = 598
					remove_state_core = 599
					remove_state_core = 600
					remove_state_core = 602
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 606
					remove_state_core = 607
					remove_state_core = 613
					remove_state_core = 614
					remove_state_core = 620
					remove_state_core = 728
					remove_state_core = 743
					remove_state_core = 744
					remove_state_core = 747
					remove_state_core = 748
					remove_state_core = 749
					remove_state_core = 750
					remove_state_core = 751
				}
				if = {
					limit = {
						country_exists = MAN
						MAN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = MAN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SDZ
						SDZ = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SDZ
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SIC
						SIC = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SIC
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = YUN
						YUN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = YUN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = GNS
						GNS = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = GNS
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SHA
						SHA = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SHA
							transfer_troops = no
						}
					}
				}	
				if = {
					limit = {
						country_exists = CHN
						CHN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = CHN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = SHN
						SHN = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = SHN
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						country_exists = CND
						CND = { is_puppet_of = QIN }
					}
					QIN = {
						annex_country = {
							target = CND
							transfer_troops = no
						}
					}
				}
				
				YUN = {
					remove_state_core = 325
					remove_state_core = 747
				}
				MAN = {
					remove_state_core = 328
					remove_state_core = 714
					remove_state_core = 715
					remove_state_core = 716
					remove_state_core = 717
					remove_state_core = 761
					if = {
						limit = {
							408 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 408
						}
					}
					if = {
						limit = {
							409 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 409
						}
					}
					if = {
						limit = {
							560 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 560
						}
					}
				}
				
				SIC = {
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 748
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
				}
				GNS = {
					remove_state_core = 326
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 599
					remove_state_core = 728
					remove_state_core = 729
				}
				SHA = {
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 598
					remove_state_core = 600
					remove_state_core = 606
					remove_state_core = 613
					remove_state_core = 728
					remove_state_core = 749
				}
				CND = {
					remove_state_core = 602
					remove_state_core = 620
					remove_state_core = 750
				}
				SHN = {
					remove_state_core = 607
					remove_state_core = 615
					remove_state_core = 621
					remove_state_core = 622
					remove_state_core = 715
					remove_state_core = 744
				}
				CHN = {
					remove_state_core = 283
					remove_state_core = 604
					remove_state_core = 616
					remove_state_core = 755
					remove_state_core = 756
					remove_state_core = 759
				}
				SDZ = {
					remove_state_core = 287
					remove_state_core = 617
					remove_state_core = 618
					remove_state_core = 619
					remove_state_core = 759
					remove_state_core = 760
				}
				
				if = {
					limit = {
						329 = { is_owned_and_controlled_by = QIN }
						330 = { is_owned_and_controlled_by = QIN }
						612 = { is_owned_and_controlled_by = QIN }
					}
					MON = {
						remove_state_core = 329
						remove_state_core = 330
						remove_state_core = 612
					}
				}

				add_threat = 5
				clr_global_flag = taypin_uprising_started
				set_global_flag = taypin_uprising_failed
				set_global_flag = china_is_united_global_flag #флаг обозначающий, что Китай объединился - мб немного по другому пропишу потом
				news_event = { id = news.147 hours = 24 }
			}
			#QIN capitulation - taypin uprising finished
			if = {
				limit = {
					tag = QIN
					has_global_flag = taypin_uprising_started 
				}				
				TPN = { 
					white_peace = {
						tag = QIN
						message = QIN_lose
					}
				}
				every_country = {
					limit = {
						has_war_with = TPN
						has_country_flag = QIN_war_with_taypin
					}	
					white_peace = TPN
					clr_country_flag = QIN_war_with_taypin
				}
				
				TPN = {
					set_cosmetic_tag = TPN_TRUE_GOVERMENT
					transfer_state = 325
					transfer_state = 326
					transfer_state = 594
					transfer_state = 595
					transfer_state = 597
					transfer_state = 598
					transfer_state = 599
					transfer_state = 602
					transfer_state = 603
					transfer_state = 605
					transfer_state = 607
					transfer_state = 613
					transfer_state = 614
					transfer_state = 620
					transfer_state = 729
					transfer_state = 743
					transfer_state = 744
					transfer_state = 747
					transfer_state = 750
					transfer_state = 751
					transfer_state = 752
					transfer_state = 753
					remove_ideas = TPN_taypin_uprising
				}				
				if = {
					limit = {
						OR = {
							GNS = {
								owns_state = 728 
							}
							QIN = {
								owns_state = 728 
							}
						}
					}
					TPN = {
						transfer_state = 728
					}
				}
				if = {
					limit = {
						QIN = {
							owns_state = 524 
						}
					}
					TPN = {
						transfer_state = 524
					}
				}
				if = {
					limit = {
						TPN = {
							NOT = { owns_state = 596 }
						}	
					}
					TPN = {
						transfer_state = 596
					}
				}

				QIN = {
					set_cosmetic_tag = QIN_LOSE_TPN
					remove_state_core = 325
					remove_state_core = 326
					remove_state_core = 524
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 597
					remove_state_core = 598
					remove_state_core = 599
					remove_state_core = 600
					remove_state_core = 602
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 606
					remove_state_core = 607
					remove_state_core = 613
					remove_state_core = 614
					remove_state_core = 620
					remove_state_core = 728
					remove_state_core = 729
					remove_state_core = 743
					remove_state_core = 744
					remove_state_core = 747
					remove_state_core = 748
					remove_state_core = 749
					remove_state_core = 750
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
					remove_state_core = 826	
					remove_ideas = QIN_stagnation_of_empire_1 #временная мера, потом вырезать
					remove_ideas = QIN_tpn_uprising 
				}
				if = {
					limit = {
						QIN = { has_idea = potential_world_power }
					}
					QIN = { 
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				
				YUN = {
					remove_state_core = 325
					remove_state_core = 747
				}
				MAN = {
					remove_state_core = 328
					remove_state_core = 714
					remove_state_core = 715
					remove_state_core = 716
					remove_state_core = 717
					remove_state_core = 761
					if = {
						limit = {
							408 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 408
						}
					}
					if = {
						limit = {
							409 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 409
						}
					}
					if = {
						limit = {
							560 = { is_core_of = MAN }
						}
						MAN = {
							remove_state_core = 560
						}
					}
				}
				SIC = {
					remove_state_core = 603
					remove_state_core = 605
					remove_state_core = 748
					remove_state_core = 751
					remove_state_core = 752
					remove_state_core = 753
				}
				GNS = {
					remove_state_core = 326
					remove_state_core = 591
					remove_state_core = 592
					remove_state_core = 593
					remove_state_core = 594
					remove_state_core = 599
					remove_state_core = 728
					remove_state_core = 729
				}
				SHA = {
					remove_state_core = 595
					remove_state_core = 596
					remove_state_core = 598
					remove_state_core = 600
					remove_state_core = 606
					remove_state_core = 613
					remove_state_core = 728
					remove_state_core = 749
				}
				CND = {
					remove_state_core = 602
					remove_state_core = 620
					remove_state_core = 750
				}
				SHN = {
					remove_state_core = 607
					remove_state_core = 744
				}
				
				if = {
					limit = {
						MAN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						annex_country = {
							target = MAN
							transfer_troops = yes
						}
					}
				}
				QIN = {
					set_capital = { state = 716 }
				}
				if = {
					limit = {
						MON = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = MON
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						SDZ = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = SDZ
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						SHN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = SHN
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = {
						CHN = {
							exists = yes
							is_puppet_of = QIN
						}
					}
					QIN = { 
						set_autonomy = {
							target = CHN
							autonomy_state = autonomy_free
						}
					}
				}
				
				if = {
					limit = {
						MON = {
							NOT = { exists = yes }
						}
						329 = { is_owned_and_controlled_by = QIN }
						330 = { is_owned_and_controlled_by = QIN }
						612 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = MON
					}
				}
				if = {
					limit = {
						SDZ = {
							NOT = { exists = yes }
						}
						287 = { is_owned_and_controlled_by = QIN }
						617 = { is_owned_and_controlled_by = QIN }
						618 = { is_owned_and_controlled_by = QIN }
						619 = { is_owned_and_controlled_by = QIN }
						759 = { is_owned_and_controlled_by = QIN }
						760 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = SDZ
					}
				}
				if = {
					limit = {
						CHN = {
							NOT = { exists = yes }
						}
						283 = { is_owned_and_controlled_by = QIN }
						604 = { is_owned_and_controlled_by = QIN }
						616 = { is_owned_and_controlled_by = QIN }
						754 = { is_owned_and_controlled_by = QIN }
						755 = { is_owned_and_controlled_by = QIN }
						756 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = CHN
					}
				}
				if = {
					limit = {
						SHN = {
							NOT = { exists = yes }
						}
						615 = { is_owned_and_controlled_by = QIN }
						621 = { is_owned_and_controlled_by = QIN }
						622 = { is_owned_and_controlled_by = QIN }
						746 = { is_owned_and_controlled_by = QIN }
					}
					QIN = { 
						release = SHN
					}
				}
				
				if = {
					limit = {
						MON = {
							has_idea = little_country
						}
					}
					MON = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						SDZ = {
							has_idea = little_country
						}
					}
					SDZ = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						SHN = {
							has_idea = little_country
						}
					}
					SHN = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				if = {
					limit = {
						CHN = {
							has_idea = little_country
						}
					}
					CHN = { 
						swap_ideas = {
							remove_idea = little_country
							add_idea = medium_country
						}
					}
				}
				
				add_threat = 5
				clr_global_flag = taypin_uprising_started
				set_global_flag = taypin_uprising_finished
				news_event = { id = news.146 hours = 24 }
			}
			#ALG capitulation
			if = {
				limit = {
					tag = ALG
					FRR = { has_country_flag = FRR_invasion_in_algeria }
				}				
				FRR = { 
					white_peace = {
						tag = ALG
						message = French_win_ALG
					}
					clr_country_flag = FRR_invasion_in_algeria
					set_country_flag = FRR_invasion_in_algeria_end 
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = FRR
							has_war_with = ALG
						}
						white_peace = ALG
					}
				}
				
				FRR = {
					transfer_state = 459
					transfer_state = 460
					transfer_state = 513
					transfer_state = 514
					transfer_state = 809
				}
				add_named_threat = { 
					threat = 3 
					name = FRR_algerian_invasion
				}
				news_event = { id = news.42 hours = 24 }
			}		
			if = {#French annexation Tunisia
				limit = {
					tag = TUN
					FRR = { has_country_flag = FRR_tunisian_company }
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = FRR
							has_war_with = TUN
						}
						white_peace = TUN
					}
				}				
				FRR = { 
					white_peace = {
						tag = TUN
						message = French_win_TUN
					}
					annex_country = {
						target = TUN
						transfer_troops = no
					}
					clr_country_flag = FRR_tunisian_company
					set_country_flag = FRR_tunisian_company_end 
				}
			}
			#MAV capitulation
			if = {
				limit = {
					tag = MAV
					FRR = { has_country_flag = FRR_mauvritanian_company }
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = FRR
							has_war_with = MAV
						}
						white_peace = MAV
					}
				}				
				FRR = {
					white_peace = {
						tag = MAV
						message = French_win_MAV
					}
					annex_country = {
						target = MAV
						transfer_troops = no
					}
					clr_country_flag = FRR_mauvritanian_company
					set_country_flag = FRR_mauvritanian_company_end 
				}
			}
			#CRE capitulation
			if = {
				limit = {
					tag = CRE
					CRE = {
						has_war_with = VIN
					}
					VIN = {
						has_country_flag = VIN_vs_CRE
					}
				}
				VIN = {
					white_peace = {
						tag = CRE
						message = VIN_win_CRE
					}
				}
				VIN = {
					transfer_state = 466
					transfer_state = 682
				}
				VIN = {
					clr_country_flag = VIN_vs_CRE
				}
			}
			#TUK capitulation
			if = {
				limit = {
					tag = TUK
					OR = {
						TUK = {
							has_war_with = JAP
						}
						TUK = {
							has_war_with = JAS
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						JAP = {
							controls_state = 282
						}
					}
					JAP = {
						white_peace = {
							tag = TUK
							message = JAP_win_TUK
						}
					}
					TUK = {
						transfer_navy = {
							target = JAP
						}
					}
					JAP = {
						annex_country = {
							target = TUK
							transfer_troops = no
						}
					}
					TUK = {
						remove_state_core = 282
						remove_state_core = 638
						remove_state_core = 648
					}
				}
				if = {
					limit = {
						JAS = {
							controls_state = 282
						}
					}
					JAS = {
						white_peace = {
							tag = TUK
							message = JAS_win_TUK
						}
					}
					TUK = {
						transfer_navy = {
							target = JAS
						}
					}
					JAS = {
						annex_country = {
							target = TUK
							transfer_troops = no
						}
					}
					TUK = {
						remove_state_core = 282
						remove_state_core = 638
						remove_state_core = 648
					}
				}
			}
			#JAP capitulation
			if = {
				limit = {
					tag = JAP
					OR = {
						JAP = {
							has_war_with = TUK
						}
						JAP = {
							has_war_with = JAS
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						TUK = {
							controls_state = 531
						}
					}
					TUK = {
						white_peace = {
							tag = JAP
							message = TUK_win_JAP
						}
					}
					JAP = {
						transfer_navy = {
							target = TUK
						}
					}
					TUK = {
						annex_country = {
							target = JAP
							transfer_troops = no
						}
					}
					JAP = {
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 535
						remove_state_core = 645
						remove_state_core = 646
					}
				}
				if = {
					limit = {
						JAS = {
							controls_state = 531
						}
					}
					JAS = {
						white_peace = {
							tag = JAP
							message = JAS_win_JAP
						}
					}
					JAP = {
						transfer_navy = {
							target = JAS
						}
					}
					JAS = {
						annex_country = {
							target = JAP
							transfer_troops = no
						}
					}
					JAP = {
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 535
						remove_state_core = 645
						remove_state_core = 646
					}
				}
			}
			#JAS capitulation
			if = {
				limit = {
					tag = JAS
					OR = {
						JAS = {
							has_war_with = TUK
						}
						JAS = {
							has_war_with = JAP
						}
					}
					JAP = {
						has_country_flag = all_japan_war
					}
				}
				if = {
					limit = {
						TUK = {
							controls_state = 533
						}
					}
					TUK = {
						white_peace = {
							tag = JAS
							message = TUK_win_JAS
						}
					}
					JAS = {
						transfer_navy = {
							target = TUK
						}
					}
					TUK = {
						annex_country = {
							target = JAS
							transfer_troops = no
						}
					}
					JAS = {
						remove_state_core = 282
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 533
						remove_state_core = 534
						remove_state_core = 535
						remove_state_core = 536
						remove_state_core = 537
						remove_state_core = 555
						remove_state_core = 638
						remove_state_core = 645
						remove_state_core = 646
						remove_state_core = 648
						remove_state_core = 655
					}
				}
				if = {
					limit = {
						JAP = {
							controls_state = 533
						}
					}
					JAP = {
						white_peace = {
							tag = JAS
							message = JAP_win_JAS
						}
					}
					JAS = {
						transfer_navy = {
							target = JAP
						}
					}
					JAP = {
						annex_country = {
							target = JAS
							transfer_troops = no
						}
					}
					JAS = {
						remove_state_core = 282
						remove_state_core = 526
						remove_state_core = 528
						remove_state_core = 529
						remove_state_core = 530
						remove_state_core = 531
						remove_state_core = 532
						remove_state_core = 533
						remove_state_core = 534
						remove_state_core = 535
						remove_state_core = 536
						remove_state_core = 537
						remove_state_core = 555
						remove_state_core = 638
						remove_state_core = 645
						remove_state_core = 646
						remove_state_core = 648
						remove_state_core = 655
					}
				}
			}
			#GLA capitulation RUSSIAN
			if = {
				limit = {
					tag = GLA
					OR = {
						GLA = {
							is_in_faction_with = RUS
						}
						GLA = {
							has_country_flag = revenge_for_hungary_gla
						}
					}
				}
				PRU = {
					white_peace = {
						tag = GLA
						message = PRU_win_GLA
					}
				}
				if = {
					limit = {
						GLA = {
							has_idea = russian_help
						}
					}
					GLA = {
						remove_ideas = russian_help
					}
				}
				if = {
					limit = {
						country_exists = UKR
						NOT = {
							country_exists = WUK
						}
					}
					UKR = {
						transfer_state = 80
						add_state_core = 80
						transfer_state = 89
						add_state_core = 89
						transfer_state = 91
						add_state_core = 91
					}
				}
				if = {
					limit = {
						country_exists = WUK
					}
					WUK = {
						transfer_state = 80
						add_state_core = 80
						transfer_state = 89
						add_state_core = 89
						transfer_state = 91
						add_state_core = 91
					}
				}
				if  = {
					limit = {
						NOT = {
							country_exists = UKR
							country_exists = WUK
						}
					}
					WUK = {
						transfer_state = 80
						add_state_core = 80
						transfer_state = 89
						add_state_core = 89
						transfer_state = 91
						add_state_core = 91
					}
					if = {
						limit = {
							NOT = {
								WUK = {
									is_puppet_of = PRU
								}
								WUK = {
									is_subject_of = PRU
								}
							}
						}
						PRU = {
							set_autonomy = {
								target = WUK
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						WUK = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 13
								socialism = 2
								reactionist = 43
								authoritarian = 42
							}
						}
					}
				}
				HUN = {
					annex_country = {
						target = SLA
						transfer_troops = no
					}
				}
				if = {
					limit = {
						country_exists = PLH
					}
					PLH = {
						transfer_state = 88
						add_state_core = 88
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					POL = {
						transfer_state = 88
						add_state_core = 88
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PLH
							country_exists = POL
						}
					}
					PRU = {
						transfer_state = 88
					}
				}
			}
			#VLH capitulation RUSSIAN
			if = {
				limit = {
					tag = VLH
					OR = {
						VLH = {
							is_in_faction_with = RUS
						}
						VLH = {
							has_country_flag = revenge_for_hungary_vlh
						}
					}
				}
				PRU = {
					white_peace = {
						tag = VLH
						message = PRU_win_VLH
					}
				}
				if = {
					limit = {
						VLH = {
							has_idea = russian_help
						}
					}
					VLH = {
						remove_ideas = russian_help
					}
				}
				if = {
					limit = {
						BYZ = {
							is_in_faction_with = HUN
						}
					}
					BYZ = {
						transfer_state = 766
					}
				}
				if = {
					limit = {
						country_exists = UKR
						NOT = {
							country_exists = WUK
						}
					}
					UKR = {
						transfer_state = 80
						add_state_core = 80
					}
					if = {
						limit = {
							VLH = {
								owns_state = 766
							}
						}
						UKR = {
							transfer_state = 766
							add_state_core = 766
						}
					}
				}
				if = {
					limit = {
						country_exists = WUK
					}
					WUK = {
						transfer_state = 80
						add_state_core = 80
					}
					if = {
						limit = {
							VLH = {
								owns_state = 766
							}
						}
						WUK = {
							transfer_state = 766
							add_state_core = 766
						}
					}
				}
				if  = {
					limit = {
						NOT = {
							country_exists = UKR
							country_exists = WUK
						}
					}
					WUK = {
						transfer_state = 80
						add_state_core = 80
					}
					if = {
						limit = {
							VLH = {
								owns_state = 766
							}
						}
						WUK = {
							transfer_state = 766
							add_state_core = 766
						}
					}
					if = {
						limit = {
							NOT = {
								WUK = {
									is_puppet_of = PRU
								}
								WUK = {
									is_subject_of = PRU
								}
							}
						}
						PRU = {
							set_autonomy = {
								target = WUK
								autonomy_state = autonomy_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						WUK = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 13
								socialism = 2
								reactionist = 43
								authoritarian = 42
							}
						}
					}
				}
				HUN = {
					transfer_state = 76
					transfer_state = 82
					transfer_state = 83
					transfer_state = 84
				}
				VLH = {
					set_cosmetic_tag = BYZ_ROM
				}
				VLH = {
					set_country_flag = VLHBYZ
				}
				BYZ = {
					set_autonomy = {
						target = VLH
						autonomy_state = autonomy_aotsm_province
						end_wars = yes
						end_civil_wars = yes
					}
					set_nationality = {
						target_country = VLH
						character = BYZ_Theodor_Aman
					}
				}
				VLH = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 24
						socialism = 6
						reactionist = 26
						authoritarian = 44
					}
					add_country_leader_role = {
						character = BYZ_Theodor_Aman
						promote_leader = yes
						country_leader = {
							ideology = unirtarism
							expire = "1900.1.1.1"
							traits = { roman_lord }
						}
					}
				}
			}
			#KOR capitulation
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			if = {
				limit = {
					tag = KOR
					has_global_flag = jap_invasion_kor
					KOR = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = KOR
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_kor
			}
			#PHI capitulation
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			if = {
				limit = {
					tag = PHI
					has_global_flag = jap_invasion_phi
					PHI = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = PHI
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_phi
			}
			#VIE capitulation
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			if = {
				limit = {
					tag = VIE
					has_global_flag = jap_invasion_vie
					VIE = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = VIE
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_vie
			}
			#KHM capitulation
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			if = {
				limit = {
					tag = KHM
					has_global_flag = jap_invasion_khm
					KHM = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = KHM
						transfer_troops = no
					}
				}
				clr_global_flag = jap_invasion_khm
			}
			#RAT capitulation
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = JAP
									is_subject_of = JAP
								}
							}
						}
					}
					JAP = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = JAS
									is_subject_of = JAS
								}
							}
						}
					}
					JAS = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			if = {
				limit = {
					tag = RAT
					has_global_flag = jap_invasion_rat
					RAT = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = RAT
						transfer_troops = no
					}
				}
				if = {
					limit = {
						NOT = {
							owner = {
								OR = {
									tag = TUK
									is_subject_of = TUK
								}
							}
						}
					}
					TUK = {
						transfer_state = 626
					}
				}
				clr_global_flag = jap_invasion_rat
			}
			#IND capitulation
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = JAP
					}
				}
				JAP = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				JAP = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = JAS
					}
				}
				JAS = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				JAS = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			if = {
				limit = {
					tag = IND
					has_global_flag = jap_invasion_ind
					IND = {
						has_war_with = TUK
					}
				}
				TUK = {
					annex_country = {
						target = IND
						transfer_troops = no
					}
				}
				TUK = {
					white_peace = HOL
				}
				clr_global_flag = jap_invasion_ind
			}
			#FRK capitulation
			if = {
				limit = {
					tag = FRK
					NIS = {
						has_country_flag = nis_vs_frk
					}
					FRK = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = FRK
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_frk
				}
			}
			#CNK capitulation
			if = {
				limit = {
					tag = CNK
					NIS = {
						has_country_flag = nis_vs_cnk
					}
					CNK = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = CNK
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_cnk
				}
			}
			#AID capitulation
			if = {
				limit = {
					tag = AID
					NIS = {
						has_country_flag = nis_vs_aid
					}
					AID = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = AID
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_aid
				}
			}
			#UTA capitulation
			if = {
				limit = {
					tag = UTA
					NIS = {
						has_country_flag = nis_vs_uta
					}
					UTA = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = UTA
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_uta
				}
			}
			#NAV capitulation
			if = {
				limit = {
					tag = NAV
					NIS = {
						has_country_flag = nis_vs_nav
					}
					NAV = {
						has_war_with = NIS
					}
				}
				NIS = {
					annex_country = {
						target = NAV
						transfer_troops = no
					}
				}
				NIS = {
					clr_country_flag = nis_vs_nav
				}
			}
			#FRR capitulation 
			if = {
				limit = {
					tag = FRR
					has_global_flag = firts_world_war
					FRR = {
						has_war_with = PRU
					}
				}
				if = {
					limit = {
						country_exists  = JAP
					}
					JAP = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						country_exists  = JAS
					}
					JAS = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						country_exists  = TUK
					}
					TUK = {
						transfer_state = 641
					}
				}
				if = {
					limit = {
						FRR = {
							has_war_with = PRU
						}
					}
					PRU = {
						if = {
							limit = {
								FRR = {
									owns_state = 641
								}
							}
							transfer_state = 641
						}
					}
					PRU = {
						transfer_state = 862
					}
					#FRR = { #не прописано адекватно
					#	country_event = { id = frr_gw_fail_events.1 days = 30 }
					#}
					ORL = { 
						transfer_state = 16
						add_state_core = 16
						transfer_state = 24
						add_state_core = 24
						transfer_state = 30
						add_state_core = 30
					}
					BRE = {
						transfer_state = 14
						transfer_state = 917
						add_state_core = 14
						add_state_core = 917
					}
					NRM = {
						transfer_state = 15
						add_state_core = 15
					}
					BRG = {
						transfer_state = 17
						transfer_state = 27
						add_state_core = 17
						add_state_core = 27
					}
					SHM = {
						transfer_state = 18
						transfer_state = 29
						transfer_state = 785
						add_state_core = 18
						add_state_core = 29
						add_state_core = 785
					}
					AKV = {
						transfer_state = 23
						transfer_state = 33
						add_state_core = 23
						add_state_core = 33
					}
					PRU = {
						add_to_faction = FRA
						add_to_faction = BRE
						add_to_faction = NRM
						add_to_faction = BRG
						add_to_faction = SHM
						add_to_faction = ORL
						add_to_faction = AKV
					}
					if = {
						limit = {
							HOL = {
								is_in_faction_with = PRU
							}
						}
						HOL = {
							transfer_state = 861
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 861
							}
						}
						SHM = {
							transfer_state = 861
							add_state_core = 861
						}
					}
					FRR = {
						if = {
							limit = {
								28 = { is_claimed_by = FRR }
							}
							remove_state_claim = 28
						}
						if = {
							limit = {
								828 = { is_claimed_by = FRR }
							}
							remove_state_claim = 828
						}
						if = {
							limit = {
								28 = { is_core_of = FRR }
							}
							remove_state_core = 28
						}
						if = {
							limit = {
								828 = { is_core_of = FRR }
							}
							remove_state_core = 828
						}
					}
				}
				if = {
					limit = {
						FRR = {
							has_war_with = BYZ
						}
					}
					BYZ = {
						transfer_state = 713
						transfer_state = 832
						transfer_state = 833
					}
					if = {
						limit = {
							OR = {
								SAR = {
									is_subject_of = BYZ
								}
								SAR = {
									is_in_faction_with = PRU
								}
							}
						}
						SAR = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					if = {
						limit = {
							OR = {
								PAP = {
									is_subject_of = BYZ
								}
								PAP = {
									is_in_faction_with = PRU
								}
							}
						}
						PAP = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					if = {
						limit = {
							OR = {
								SYC = {
									is_subject_of = BYZ
								}
								SYC = {
									is_in_faction_with = PRU
								}
							}
						}
						SYC = {
							transfer_state = 1
							add_state_core = 1
							transfer_state = 21
							add_state_core = 21
							transfer_state = 32
							add_state_core = 32
						}
					}
					GAL = {
						transfer_state = 19
						add_state_core = 19
						transfer_state = 20
						add_state_core = 20
						transfer_state = 22
						add_state_core = 22
						transfer_state = 25
						add_state_core = 25
						transfer_state = 26
						add_state_core = 26
						transfer_state = 31
						add_state_core = 31
						transfer_state = 806
						add_state_core = 806
					}
					BYZ = {
						set_autonomy = {
							target = GAL
							autonomy_state = autonomy_aotsm_province
							end_wars = no
							end_civil_wars = no
						}
					}
					GAL = {
						set_politics = { ruling_party = authoritarian elections_allowed = no }
						set_popularities = {
							democratic = 3
							socialism = 27
							reactionist = 29
							authoritarian = 41
						}
					}
					GAL = {
						set_cosmetic_tag = BYZ_GAL
						set_country_flag = GALBYZ
					}
					BYZ = {
						if = {
							limit = {
								FRR = {
									owns_state = 1
								}
								OR = {
									SAR = {
										is_subject_of = BYZ
									}
									SAR = {
										is_puppet_of = BYZ
									}
								}
							}
							SAR = {
								transfer_state = 1
								add_state_core = 1
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 1
								}
								NOT = {
									SAR = {
										is_subject_of = BYZ
									}
									SAR = {
										is_puppet_of = BYZ
									}
								}
								country_exists = SAR
							}
							SAR = {
								transfer_state = 1
								add_state_core = 1
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 1
								}
								NOT = {
									SAR = {
										is_subject_of = BYZ
									}
									SAR = {
										is_puppet_of = BYZ
									}
								}
								NOT = {
									country_exists = SAR
								}
							}
							BYZ = {
								transfer_state = 1
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 21
								}
							}
							GAL = {
								transfer_state = 21
							}
						}
						if = {
							limit = {
								FRR = {
									owns_state = 32
								}
							}
							GAL = {
								transfer_state = 32
							}
						}
					}
					FRR = {
						remove_state_core = 1
						remove_state_core = 21
						remove_state_core = 32
					}
					if = {
						limit = {
							OR = {
								FRR = {
									owns_state = 543
								}
								MAD = {
									is_subject_of = FRR
								}
							}
						}
						ZUL = {
							transfer_state = 543
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 706
							}
						}
						ZUL = {
							transfer_state = 706
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 707
							}
						}
						ZUL = {
							transfer_state = 707
						}
					}
					if = {
						limit = {
							OR = {
								FRR = {
									owns_state = 708
								}
								MAD = {
									is_subject_of = FRR
								}
							}
						}
						ZUL = {
							transfer_state = 708
						}
					}
					if = {
						limit = {
							FRR = {
								owns_state = 845
							}
						}
						ZUL = {
							transfer_state = 845
						}
					}
					if = {
						limit = {
							OR = {
								NWA = {
									owns_state = 458
								}
								FRR = {
									owns_state = 458
								}
							}
						}
						CPT = {
							transfer_state = 458
						}
					}
					if = {
						limit = {
							OR = {
								NWA = {
									owns_state = 665
								}
								FRR = {
									owns_state = 665
								}
							}
						}
						CPT = {
							transfer_state = 665
						}
					}
				}
				if = { 
					limit = {
						NWA = {
							owns_state = 459
						}
					}
					FRR = {
						transfer_state = 459
						add_state_core = 459
						set_capital = {
							state = 459
						}
						set_province_name = {
							id = 1145
							name = ALGER_name
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 459
						}
					}
					FRR = {
						add_state_core = 459
						set_capital = {
							state = 459
						}
						set_province_name = {
							id = 1145
							name = ALGER_name
						}
					}
				}
				#if not PRU
				if = {
					limit = {
						FRR = {
							owns_state = 14
						}
					}
					GAL = {
						transfer_state = 14
						add_state_core = 14
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 15
						}
					}
					GAL = {
						transfer_state = 15
						add_state_core = 15
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 16
						}
					}
					GAL = {
						transfer_state = 16
						add_state_core = 16
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 17
						}
					}
					GAL = {
						transfer_state = 17
						add_state_core = 17
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 18
						}
					}
					GAL = {
						transfer_state = 18
						add_state_core = 18
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 24
						}
					}
					GAL = {
						transfer_state = 24
						add_state_core = 24
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 27
						}
					}
					GAL = {
						transfer_state = 27
						add_state_core = 27
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 29
						}
					}
					GAL = {
						transfer_state = 29
						add_state_core = 29
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 30
						}
					}
					GAL = {
						transfer_state = 30
						add_state_core = 30
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 785
						}
					}
					GAL = {
						transfer_state = 785
						add_state_core = 785
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 861
						}
					}
					GAL = {
						transfer_state = 861
						add_state_core = 861
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 862
						}
					}
					GAL = {
						transfer_state = 862
						add_state_core = 862
					}
				}
				#If not BYZ
				if = {
					limit = {
						FRR = {
							owns_state = 1
						}
					}
					FRA = {
						transfer_state = 1
						add_state_core = 1
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 19
						}
					}
					FRA = {
						transfer_state = 19
						add_state_core = 19
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 20
						}
					}
					FRA = {
						transfer_state = 20
						add_state_core = 20
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 21
						}
					}
					FRA = {
						transfer_state = 21
						add_state_core = 21
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 22
						}
					}
					FRA = {
						transfer_state = 22
						add_state_core = 22
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 23
						}
					}
					FRA = {
						transfer_state = 23
						add_state_core = 23
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 25
						}
					}
					FRA = {
						transfer_state = 25
						add_state_core = 25
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 26
						}
					}
					FRA = {
						transfer_state = 26
						add_state_core = 26
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 31
						}
					}
					FRA = {
						transfer_state = 31
						add_state_core = 31
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 32
						}
					}
					FRA = {
						transfer_state = 32
						add_state_core = 32
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 33
						}
					}
					FRA = {
						transfer_state = 33
						add_state_core = 33
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 806
						}
					}
					FRA = {
						transfer_state = 806
						add_state_core = 806
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 832
						}
					}
					if = {
						limit = {
							country_exists = SOS
						}
						SOS = {
							transfer_state = 832
						}	
					}
					if = {
						limit = {
							country_exists = SOR
						}
						SOR = {
							transfer_state = 832
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 833
						}
					}
					if = {
						limit = {
							country_exists = SOS
						}
						SOS = {
							transfer_state = 833
						}	
					}
					if = {
						limit = {
							country_exists = SOR
						}
						SOR = {
							transfer_state = 833
						}
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 706
						}
					}
					MAD = {
						transfer_state = 706
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 707
						}
					}
					MAD = {
						transfer_state = 707
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 713
						}
					}
					MAD = {
						transfer_state = 713
					}
				}
				if = {
					limit = {
						FRR = {
							owns_state = 845
						}
					}
					MAD = {
						transfer_state = 845
					}
				}
				FRR = {
					add_state_core = 460
					add_state_core = 513
					if = {
						limit = {
							country_exists = NWA
						}
						NWA = {
							transfer_navy = {
								target = FRR
							}
						}
						annex_country = {
							target = NWA
							transfer_troops = yes
						}
					}
				}
				if = {
					limit = {
						FRA = {
							has_idea = world_power
						}
					}
					FRA = {
						swap_ideas = {
							remove_idea = world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						FRA = {
							has_idea = potential_world_power
						}
					}
					FRA = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				if = {
					limit = {
						country_exists = BRE
					}
					FRR = {
						transfer_units_fraction= {
							target = BRE
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.10
							air_ratio = 0.0
						}
					}
					BRE = {
						load_oob = "BRE_army"
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRR = {
						transfer_units_fraction= {
							target = FRA
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.40
							air_ratio = 0.0
						}
					}
					FRA = {
						load_oob = "FRA_army"
					}
				}
				if = {
					limit = {
						country_exists = GAL
					}
					FRR = {
						transfer_units_fraction= {
							target = GAL
							size = 0.0
							stockpile_ratio = 0.0
							army_ratio = 0.0
							navy_ratio = 0.40
							air_ratio = 0.0
						}
					}
					GAL = {
						load_oob = "GAL_army"
					}
				}
				BRE = {
					inherit_technology = FRR
				}
				FRA = {
					inherit_technology = FRR
				}
				GAL = {
					inherit_technology = FRR
				}
				FRR = {
					leave_faction = yes
				}
				every_country = {
					limit = {
						has_war_with = FRR
					}
					white_peace = FRR
				}
				set_global_flag = france_capitulation
				news_event = news.79
			}
			#CBI capitulation
			if = {
				limit = {
					tag = CBI
					has_global_flag = firts_world_war
					CBI = {
						has_war_with = PRU
					}
					NOT = {
						has_global_flag = cbi_capitulation
					}
				}
			}
			cbi_capitulation_all = yes
			#PRT capitulation
			if = {
				limit = {
					tag = PRT
					has_global_flag = firts_world_war
					OR = {
						PRT = {
							has_war_with = PRU
						}
						PRT = {
							has_war_with = BYZ
						}
					}
					NOT = {
						has_global_flag = prt_capitulation
					}
				}
				prt_capitulation_all = yes
			}
			if = { #RUS capitulation - russia lose the great war
				limit = {
					tag = RUS
					has_global_flag = firts_world_war
					OR = {
						RUS = {
							has_war_with = PRU
						}
						RUS = {
							has_war_with = BYZ
						}
					}
					NOT = {
						has_global_flag = russian_capitulation
					}
				}
				RUS = {
					load_focus_tree = empty_rus_tree
				}
				if = {
					limit = {
						NOT = {
							country_exists = POL
						}
					}
					PLH = {
						if = {
							limit = {
								RUS = {
									owns_state = 10
								}
							}
							transfer_state = 10
							RUS = {
								remove_state_core = 10
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 87
								}
							}
							transfer_state = 87
							RUS = {
								remove_state_core = 87
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 90
								}
							}
							transfer_state = 90
							RUS = {
								remove_state_core = 90
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 92
								}
							}
							transfer_state = 92
							RUS = {
								remove_state_core = 92
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 97
								}
							}
							transfer_state = 97
							RUS = {
								remove_state_core = 97
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 98
								}
							}
							transfer_state = 98
							RUS = {
								remove_state_core = 98
							}
						}
						if = {
							limit = {
								RUS = {
									owns_state = 853
								}
							}
							transfer_state = 853
							RUS = {
								remove_state_core = 853
							}
						}
						if = { #на всякий случай - Краков - если он под Россией
							limit = {
								RUS = {
									owns_state = 903
								}
							}
							transfer_state = 903
							RUS = {
								remove_state_core = 903
							}
						}
						if = { #на всякий случай - Краков - если он существует
							limit = {
								country_exists = KRA
							}
							annex_country = {
								target = KRA
								transfer_troops = yes
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = BLT
						}
					}
					BLT = {
						add_state_core = 915
						transfer_state = 11
						transfer_state = 12
						transfer_state = 13
						transfer_state = 189
						transfer_state = 190
						transfer_state = 191
						transfer_state = 784
						transfer_state = 915
					}
					EST = {
						add_state_core = 13
						add_state_core = 191
					}
					LAT = {
						add_state_core = 12
						add_state_core = 190
						add_state_core = 915
					}
					LIT = {
						add_state_core = 11
						add_state_core = 189
						add_state_core = 784
					}
					hidden_effect = {
						PRU = {
							set_autonomy = {
								target = BLT
								autonomy_state = autonomy_integrated_puppet
								end_wars = yes
								end_civil_wars = yes
							}
						}
						BLT = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							set_popularities = {
								democratic = 34
								socialism = 0
								reactionist = 33
								authoritarian = 33
							}
						}
						BLT = {
							load_oob = BLT_army
						}
						BLT = {
							inherit_technology = PRU
						}
						EST = {
							inherit_technology = RUS
						}
						LIT = {
							inherit_technology = RUS
						}
						LAT = {
							inherit_technology = RUS
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = WRT
						}
					}
					WRT = {
						transfer_state = 94
						add_state_core = 94
						transfer_state = 95
						add_state_core = 95
						transfer_state = 96
						add_state_core = 96
						transfer_state = 194
						add_state_core = 194
						transfer_state = 204
						add_state_core = 204
						transfer_state = 206
						add_state_core = 206
						transfer_state = 207
						add_state_core = 207
						transfer_state = 224
						add_state_core = 224
						transfer_state = 241
						add_state_core = 241
						transfer_state = 243
						add_state_core = 243
						transfer_state = 823
						add_state_core = 823
					}
					hidden_effect = {
						PRU = {
							set_autonomy = {
								target = WRT
								autonomy_state = autonomy_dominion
								end_wars = yes
								end_civil_wars = yes
							}
						}
						WRT = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							set_popularities = {
								democratic = 63
								socialism = 7
								reactionist = 24
								authoritarian = 6
							}
						}
						WRT = {
							load_oob = WRT_army
						}
						WRT = {
							inherit_technology = PRU
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = UKR
						}
						NOT = {
							has_global_flag = pru_steal_ukraina
						}
					}
					UKR = {
						transfer_state = 93
						add_state_core = 93
						add_state_core = 137
						transfer_state = 192
						add_state_core = 192
						transfer_state = 193
						add_state_core = 193
						add_state_core = 196
						transfer_state = 197
						add_state_core = 197
						transfer_state = 198
						add_state_core = 198
						transfer_state = 199
						add_state_core = 199
						add_state_core = 200
						transfer_state = 201
						add_state_core = 201
						transfer_state = 202
						add_state_core = 202
						transfer_state = 203
						add_state_core = 203
						transfer_state = 220
						add_state_core = 220
						transfer_state = 221
						add_state_core = 221
						transfer_state = 225
						add_state_core = 225
						transfer_state = 226
						add_state_core = 226
						add_state_core = 227
						transfer_state = 228
						add_state_core = 228
						transfer_state = 240
						add_state_core = 240
						transfer_state = 259
						add_state_core = 259
						transfer_state = 859
						add_state_core = 859
						transfer_state = 885
						add_state_core = 885
						transfer_state = 886
						add_state_core = 886
					}
					hidden_effect = {
						PRU = {
							add_to_faction = UKR
						}
						UKR = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 6
								socialism = 1
								reactionist = 84
								authoritarian = 9
							}
						}
						UKR = {
							load_oob = UKR_army
						}
						UKR = {
							inherit_technology = PRU
						}
					}
					if = {
						limit = {
							country_exists = WUK
						}
						WUK = {
							transfer_state = 93
							add_state_core = 93
							transfer_state = 192
							add_state_core = 192
							transfer_state = 198
							add_state_core = 198
							transfer_state = 199
							add_state_core = 199
							transfer_state = 201
							add_state_core = 201
							transfer_state = 885
							add_state_core = 885
						}
						if = {
							limit = {
								NOT = {
									WUK = {
										is_puppet_of = PRU
									}
									WUK = {
										is_subject_of = PRU
									}
								}
							}
							PRU = {
								set_autonomy = {
									target = WUK
									autonomy_state = autonomy_puppet
									end_wars = yes
									end_civil_wars = yes
								}
							}
							WUK = {
								set_politics = { ruling_party = reactionist elections_allowed = no }
								set_popularities = {
									democratic = 13
									socialism = 2
									reactionist = 43
									authoritarian = 42
								}
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							BYZ = {
								is_in_faction_with = PRU
							}
							BYZ = {
								has_war_with = RUS
							}
						}
					}
					BCH = {
						transfer_state = 137
						add_state_core = 137
						transfer_state = 196
						add_state_core = 196
						transfer_state = 200
						add_state_core = 200
						transfer_state = 218
						add_state_core = 218
						transfer_state = 227
						add_state_core = 227
						transfer_state = 234
						add_state_core = 234
					}
					hidden_effect = {
						BYZ = {
							set_autonomy = {
								target = BCH
								autonomy_state = autonomy_aotsm_province
								end_wars = yes
								end_civil_wars = yes
							}
						}
						BCH = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 3
								socialism = 1
								reactionist = 77
								authoritarian = 19
							}
						}
						BCH = {
							load_oob = BCH_army
						}
						BCH = {
							inherit_technology = BYZ
						}
					}
					KUK = {
						transfer_state = 217
						add_state_core = 217
						transfer_state = 235
						add_state_core = 235
						transfer_state = 236
						add_state_core = 236
						transfer_state = 237
						add_state_core = 237
						transfer_state = 238
						add_state_core = 238
						transfer_state = 245
						add_state_core = 245
						transfer_state = 858
						add_state_core = 858
					}
					hidden_effect = {
						BYZ = {
							set_autonomy = {
								target = KUK
								autonomy_state = autonomy_aotsm_protectorat
								end_wars = yes
								end_civil_wars = yes
							}
						}
						KUK = {
							set_politics = { ruling_party = reactionist elections_allowed = no }
							set_popularities = {
								democratic = 18
								socialism = 1
								reactionist = 62
								authoritarian = 19
							}
						}
						KUK = {
							load_oob = KUK_army
						}
						KUK = {
							inherit_technology = BYZ
						}
					}
				}
				RUS = {
					remove_state_core = 10
					remove_state_core = 11
					remove_state_core = 12
					remove_state_core = 13
					remove_state_core = 87
					remove_state_core = 90
					remove_state_core = 92
					remove_state_core = 93
					remove_state_core = 94
					remove_state_core = 95
					remove_state_core = 96
					remove_state_core = 97
					remove_state_core = 98
					remove_state_core = 137
					remove_state_core = 189
					remove_state_core = 190
					remove_state_core = 191
					remove_state_core = 192
					remove_state_core = 193
					remove_state_core = 194
					remove_state_core = 196
					remove_state_core = 197
					remove_state_core = 198
					remove_state_core = 199
					remove_state_core = 200
					remove_state_core = 201
					remove_state_core = 202
					remove_state_core = 203
					remove_state_core = 204
					remove_state_core = 206
					remove_state_core = 207
					remove_state_core = 217
					remove_state_core = 218
					remove_state_core = 221
					remove_state_core = 225
					remove_state_core = 226
					remove_state_core = 227
					remove_state_core = 228
					remove_state_core = 234
					remove_state_core = 235
					remove_state_core = 236
					remove_state_core = 237
					remove_state_core = 238
					remove_state_core = 241
					remove_state_core = 245
					remove_state_core = 259
					remove_state_core = 784
					remove_state_core = 823
					remove_state_core = 858
					remove_state_core = 885
					remove_state_core = 886
					remove_state_core = 915
				}
				if = {
					limit = {
						AND = {
							SCA = {
								has_country_flag = SCA_VS_RUS_2
							}
							SCA = {
								is_in_faction_with = PRU
							}
							SCA = {
								has_war_with = RUS
							}	
						}
					}
					SCA = {
						transfer_state = 111
						transfer_state = 145
						transfer_state = 146
						transfer_state = 147
						transfer_state = 149
						transfer_state = 150
						transfer_state = 213
						transfer_state = 215
						transfer_state = 216
						transfer_state = 722
					}
					if = {
						limit = {
							RUS = {
								owns_state = 148
							}
						}
						SCA = {
							transfer_state = 148
						}
					}
					RUS = {
						remove_state_core = 213
						remove_state_core = 215
						remove_state_core = 216
						remove_state_core = 722
					}
				}
				if = { #заглушка на случай участия Казахстана в великой войне на стороне России
					limit = {
						KAZ = { 
							is_in_faction_with = RUS
						}
					}
					every_country = {
						limit = {
							has_war_with = KAZ
						}
						white_peace = KAZ
					}
				}				
				RUS = {
					leave_faction = yes
				}
				every_country = {
					limit = {
						has_war_with = RUS
					}
					white_peace = RUS
				}
				every_country = {
					limit = {
						is_in_faction_with = RUS
						has_war_with = PRU
					}
					white_peace = PRU
				}
				every_country = {
					limit = {
						is_in_faction_with = RUS
						has_war_with = BYZ
					}
					white_peace = BYZ
				}
				hidden_effect = {
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_1
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_1
						}
					}
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_2
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_2
						}
					}
					if = {
						limit = {
							BYZ = {
								has_idea = russian_history_enemy_3
							}
						}
						BYZ = {
							remove_ideas = russian_history_enemy_3
						}
					}
				}
				set_global_flag = russian_capitulation
				news_event = news.76
				if = {
					limit = {
						NOT = {
							RUS = {
								has_country_flag = second_time_of_trouble
							}
						}
					}
					RUS = {
						set_country_flag = second_time_of_trouble
						country_event = {
							id = chain.11
							days = 43
							random_days = 13
						}
					}
				}
			}
			#Sar capitulation
			if = {
				limit = {
					tag = SAR
					SAR = {
						has_country_flag = TCR
					}
					SAR = {
						has_war_with = BYZ
					}
					SAR = {
						has_country_flag = war_with_byz
					}
				}
				BYZ = {
					set_autonomy = {
						target = SAR				
						autonomy_state = autonomy_aotsm_province
						end_wars = yes
						end_civil_wars = yes
					}
				}
				SAR = {
					load_focus_tree = generic_focus
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_1
						}
					}
					SAR = {
						remove_ideas = italy_economy_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_2
						}
					}
					SAR = {
						remove_ideas = italy_economy_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_3
						}
					}
					SAR = {
						remove_ideas = italy_economy_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_economy_4
						}
					}
					SAR = {
						remove_ideas = italy_economy_4
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_1
						}
					}
					SAR = {
						remove_ideas = italy_political_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_2
						}
					}
					SAR = {
						remove_ideas = italy_political_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_3
						}
					}
					SAR = {
						remove_ideas = italy_political_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_4
						}
					}
					SAR = {
						remove_ideas = italy_political_4
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_1
						}
					}
					SAR = {
						remove_ideas = italy_army_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2
						}
					}
					SAR = {
						remove_ideas = italy_army_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2_n
						}
					}
					SAR = {
						remove_ideas = italy_army_2_n
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_2_o
						}
					}
					SAR = {
						remove_ideas = italy_army_2_o
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_3_n
						}
					}
					SAR = {
						remove_ideas = italy_army_3_n
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_army_3_o
						}
					}
					SAR = {
						remove_ideas = italy_army_3_o
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_democratic_1
						}
					}
					SAR = {
						remove_ideas = italy_democratic_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_neutrality
						}
					}
					SAR = {
						remove_ideas = italy_neutrality
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_political_rea
						}
					}
					SAR = {
						remove_ideas = italy_political_rea
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_1
						}
					}
					SAR = {
						remove_ideas = italy_legionism_1
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_2
						}
					}
					SAR = {
						remove_ideas = italy_legionism_2
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = italy_legionism_3
						}
					}
					SAR = {
						remove_ideas = italy_legionism_3
					}
				}
				if = {
					limit = {
						SAR = {
							has_idea = potential_world_power
						}
					}
					SAR = {
						swap_ideas = {
							remove_idea = potential_world_power
							add_idea = large_country
						}
					}
				}
				SAR = {
					set_cosmetic_tag = ITABYZ
				}
				SAR = {
					set_country_flag = SARBYZ
				}
				SAR = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 7
						socialism = 3
						reactionist = 33
						authoritarian = 57
					}
					retire_character = SAR_Viterio_Emannuele_II
					promote_character = SAR_Nikolaos_Petmazas
				}
			}
			#BUL capitulation
			if = {
				limit = {
					tag = BUL
					BUL = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_BUL
					}
				}
				BYZ = {
					white_peace = {
						tag = BUL
						message = BYZ_win_BUL
					}
				}
				BYZ = { 
					transfer_state = 48
					transfer_state = 106
					transfer_state = 211
					transfer_state = 212
					transfer_state = 801
					transfer_state = 803
				}
				BUL = {
					set_nationality = {
						target_country = VLH
						character = BUL_Alexandr_Battenberg
					}
				}
				VLH = {
					promote_character = BUL_Alexandr_Battenberg
					add_trait = {
						 character = BUL_Alexandr_Battenberg
						 ideology = absolute_monarchy_sub
						 trait = hate_byzantium
					}
				}
				VLH = {
					transfer_state = 46
					transfer_state = 77
					transfer_state = 81
				}
				BYZ = { clr_country_flag = BYZ_vs_BUL }
				BYZ = { set_country_flag = BYZ_vs_BUL_win }
				BUL = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#ALB capitulation
			if = {
				limit = {
					tag = ALB
					ALB = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag =  BYZ_vs_ALB
					}
				}
				BYZ = {
					white_peace = {
						tag = ALB
						message = BYZ_win_ALB
					}
				}
				BYZ = { 
					transfer_state = 44
				}
				BYZ = { clr_country_flag = BYZ_vs_ALB }
				BYZ = { set_country_flag = BYZ_vs_ALB_win }
				ALB = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#SER capitulation
			if = {
				limit = {
					tag = SER
					SER = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_SER
					}
				}
				BYZ = {
					white_peace = {
						tag = SER
						message = BYZ_win_SER
					}
				}
				BYZ = { 
					transfer_state = 105
					transfer_state = 107
					transfer_state = 108
					transfer_state = 802
				}
				BYZ = { clr_country_flag = BYZ_vs_SER }
				BYZ = { set_country_flag = BYZ_vs_SER_win }
				SER = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#BOS capitulation
			if = {
				limit = {
					tag = BOS
					BOS = {
						has_war_with = BYZ
					}
					BYZ = {
						has_country_flag = BYZ_vs_BOS
					}
				}
				BYZ = {
					white_peace = {
						tag = BOS
						message = BYZ_win_BOS
					}
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_imperia_politic
						}
					}
					BYZ = { 
						transfer_state = 104
						transfer_state = 804
					}
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_democratic_politic
						}
					}
					DAL = {
						transfer_state = 104
						transfer_state = 804
					}
					BYZ = {
						set_autonomy = {
							target = DAL
							autonomy_state = autonomy_aotsm_province
							end_wars = no
							end_civil_wars = no
						}
					}
					DAL ={
						set_cosmetic_tag = BYZ_DAL
					}
					DAL = {
						inherit_technology = BYZ
					}
				}
				BYZ = { clr_country_flag = BYZ_vs_BOS }
				BYZ = { set_country_flag = BYZ_vs_BOS_win }
				BOS = { remove_ideas = balkan_wars }
				if = {
					limit = {
						tag = BYZ
						is_ai = no
					}
					BYZ = {
						army_experience = 50
					}
				}
				if = {
					limit = {
						tag = BYZ
						is_ai = yes
					}
					BYZ = {
						army_experience = 75
					}
				}
			}
			#HOL capitulation
			if = {
				limit = {
					tag = HOL
					HOL = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = P_V_H
					}
				}
				PRU = {
					transfer_state = 308
					transfer_state = 539
					transfer_state = 660
					transfer_state = 695
				}
				PRU = {
					white_peace = {
						tag = HOL
						message = PRU_win_HOL
					}
				}
				HOL = { puppet = IND }
				PRU = {
					clr_country_flag = P_V_H
					add_to_faction = HOL
					add_to_faction = IND
				}
				set_global_flag = hol_was_in_faction_with_pru
			}
			#BEL capitulation
			if = {
				limit = {
					tag = BEL
					BEL = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = P_V_B
					}
				}
				HOL = {
					transfer_state = 6
				}
				BEL = { set_cosmetic_tag = BELVAL }
				PRU = { puppet = BEL }
				BEL = { 
					remove_state_core = 8
					remove_state_core = 863
				}
				PRU = { 
					add_state_core = 8
					transfer_state = 8
					add_state_core = 863
					transfer_state = 863
				}
				BEL = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 20
						socialism = 4
						reactionist = 23
						authoritarian = 53
					}
					retire_character = BEL_Leopold_I
					add_country_leader_role = {
						character = BEL_Edwin_von_Manteuffel
						promote_leader = yes
						country_leader = {
							ideology = monarchist
							expire = "1900.1.1.1"
							traits = { walduke }
						}
					}
					swap_ideas = {
						remove_idea = medium_country
						add_idea = little_country
					}
				}
				8 = {
					add_dynamic_modifier = {
						modifier = PRU_part_of_german_confederacy_state_modifier
					}
				}
				863 = {
					add_dynamic_modifier = {
						modifier = PRU_part_of_german_confederacy_state_modifier
					}
				}
			}
			#PAR capitulation 
			if = {
				limit = {
					tag = PAR
					OR = {
						PAR = {
							has_war_with = PER
						}
						PAR = {
							has_war_with = IRA
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PER = {
							controls_province = 2065
						}
					}
					PER = {
						annex_country = {
							target = PAR
							transfer_troops = no
						}
					}
					PAR = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = IRA
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.47
				}
				if = {
					limit = {
						IRA = {
							controls_province = 2065
						}
					}
					IRA = {
						annex_country = {
							target = PAR
							transfer_troops = no
						}
					}
					PAR = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.46
				}
			}
			#PER capitulation
			if = {
				limit = {
					tag = PER
					OR = {
						PER = {
							has_war_with = PAR
						}
						PER = {
							has_war_with = IRA
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PAR = {
							controls_province = 10837
						}
					}
					PAR = {
						annex_country = {
							target = PER
							transfer_troops = no
						}
					}
					PER = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = IRA
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
				if = {
					limit = {
						IRA = {
							controls_province = 10837
						}
					}
					IRA = {
						annex_country = {
							target = PER
							transfer_troops = no
						}
					}
					PER = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
			}
			#IRA capitulation 
			if = {
				limit = {
					tag = IRA
					OR = {
						IRA = {
							has_war_with = PAR
						}
						IRA = {
							has_war_with = PER
						}
					}
					has_global_flag = persia_civil_war_flag
				}
				if = {
					limit = {
						PAR = {
							controls_province = 12832
						}
					}
					PAR = {
						annex_country = {
							target = IRA
							transfer_troops = no
						}
					}
					IRA = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PER
							country_exists = IRA
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.48
				}
				if = {
					limit = {
						PER = {
							controls_province = 12832
						}
					}
					PER = {
						annex_country = {
							target = IRA
							transfer_troops = no
						}
					}
					IRA = {
						remove_state_core = 266
						remove_state_core = 411
						remove_state_core = 412
						remove_state_core = 414
						remove_state_core = 416
						remove_state_core = 417
						remove_state_core = 418	
						remove_state_core = 420
						remove_state_core = 852
						remove_state_core = 872
						remove_state_core = 876
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = IRA
							country_exists = PAR
						}
					}
					clr_global_flag = persia_civil_war_flag
					PER = {
						remove_ideas = persian_civil_war_idea
					}
					PAR = {
						remove_ideas = persian_civil_war_idea
					}
					IRA = {
						remove_ideas = persian_civil_war_idea
					}
					news_event = news.47
				}
			}
			#SEL capitulation - RUS expand alaska
			if = {
				limit = {
					tag = SEL
					RUS = {
						has_war_with = SEL
						has_country_flag = RUS_salish_war_plan
					}
					NOT = {
						has_global_flag = SEL_capitulation
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = SEL
						}
						white_peace = SEL
					}
				}
				RUS = {
					white_peace = {
						tag = SEL
						message = RUS_win_SEL
					}
					annex_country = {
						target = SEL
						transfer_troops = no
					}
					clr_country_flag = RUS_salish_war_plan
					set_country_flag = RUS_salish_war_plan_end
				}
				add_threat = 1
				set_global_flag = SEL_capitulation
			}
			#INU capitulation - RUS expand alaska
			if = {
				limit = {
					tag = INU
					RUS = {
						has_war_with = INU
						has_country_flag = RUS_inuit_war_plan
					}
				}				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = INU
						}
						white_peace = INU
					}
				}
				RUS = {
					white_peace = {
						tag = INU
						message = RUS_win_INU
					}
					annex_country = {
						target = INU
						transfer_troops = no
					}
					clr_country_flag = RUS_inuit_war_plan
					set_country_flag = RUS_inuit_war_plan_end
				}
				add_threat = 1
			}
			#SKS capitulation - RUS expand alaska
			if = {
				limit = {
					tag = SKS
					RUS = {
						has_war_with = SKS
						has_country_flag = RUS_inuit_war_plan
					}
				}				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = SKS
						}
						white_peace = SKA
					}
				}
				RUS = {
					white_peace = {
						tag = SKS
						message = RUS_win_SKS
					}
					annex_country = {
						target = SKS
						transfer_troops = no
					}
					clr_country_flag = RUS_sks_war_plan
					set_country_flag = RUS_sks_war_plan_end
				}
				add_threat = 1
			}
		#Afganistan company
			#AFG capitulation
			if = {
				limit = {
					tag = AFG
					RUS = { has_country_flag = RUS_invasion_in_afg_flag }
				}
				RUS = {
					white_peace = AFG
					transfer_state = 918
					clr_country_flag = RUS_invasion_in_afg_flag
					set_country_flag = RUS_invasion_in_afg_flag_end
				}
				add_threat = 1
			}
			if = {
				limit = {
					tag = AFG
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = AFG_capitulation_ac
					}
				}
				RIT = {
					transfer_state = 410
					add_state_core = 410
					transfer_state = 444
					add_state_core = 444
				}
				if = {
					limit = {
						AFG = {
							owns_state = 443
						}
					}
					RIT = {
						transfer_state = 443
						add_state_core = 443
					}
				}
				if = {
					limit = {
						AFG = {
							owns_state = 837
						}
					}
					RIT = {
						transfer_state = 837
						add_state_core = 837
					}
				}
				if = {
					limit = {
						country_exists = PNJ
					}
					PNJ = {
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
					}
					RIT = {
						hidden_effect = {
							if = {
								limit = {
									PNJ = {
										has_government = democratic
									}
								}
								set_variable = {
									var = PNJ.PNJ_rulling_party
									value = 1
								}
							}
							if = {
								limit = {
									PNJ = {
										has_government = socialism
									}
								}
								set_variable = {
									var = PNJ.PNJ_rulling_party
									value = 2
								}
							}
							if = {
								limit = {
									PNJ = {
										has_government = reactionist
									}
								}
								set_variable = {
									var = PNJ.PNJ_rulling_party
									value = 3
								}
							}
							if = {
								limit = {
									PNJ = {
										has_government = authoritarian
									}
								}
								set_variable = {
									var = PNJ.PNJ_rulling_party
									value = 4
								}
							}
							PNJ = {
								set_variable = {
									var = PNJ.PNJ_democraty_number
									value = party_popularity@democratic
								}
								set_variable = {
									var = PNJ.PNJ_socialism_number
									value = party_popularity@socialism
								}
								set_variable = {
									var = PNJ.PNJ_reactionist_number
									value = party_popularity@reactionist
								}
								set_variable = {
									var = PNJ.PNJ_authoritarian_number
									value = party_popularity@authoritarian
								}
							}
						}
						set_autonomy = {
							target = PNJ
							autonomy_state = autonomy_puppet
							end_wars = no
							end_civil_wars = no
						}
						hidden_effect = {
							PNJ = {
								multiply_variable = {
									var = PNJ.PNJ_democraty_number
									value = 100
								}
								multiply_variable = {
									var = PNJ.PNJ_socialism_number
									value = 100
								}
								multiply_variable = {
									var = PNJ.PNJ_reactionist_number
									value = 100
								}
								multiply_variable = {
									var = PNJ.PNJ_authoritarian_number
									value = 100
								}
							}
							if = {
								limit = {
									check_variable = {
										var = PNJ.PNJ_rulling_party
										value = 1
									}
								}
								PNJ = {
									set_politics = {
										ruling_party = democratic
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										var = PNJ.PNJ_rulling_party
										value = 2
									}
								}
								PNJ = {
									set_politics = {
										ruling_party = socialism
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										var = PNJ.PNJ_rulling_party
										value = 3
									}
								}
								PNJ = {
									set_politics = {
										ruling_party = reactionist
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										var = PNJ.PNJ_rulling_party
										value = 4
									}
								}
								PNJ = {
									set_politics = {
										ruling_party = authoritarian
									}
								}
							}
							PNJ = {
								set_popularities = {
									democratic = PNJ.PNJ_democraty_number
									socialism = PNJ.PNJ_socialism_number
									reactionist = PNJ.PNJ_reactionist_number
									authoritarian = PNJ.PNJ_authoritarian_number
								}
							}
						}
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PNJ
						}
						has_global_flag = PNJ_capitulation_ac
					}
					RIT = {
						transfer_state = 440
						add_state_core = 440
						transfer_state = 441
						add_state_core = 441
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
						transfer_state = 787
						add_state_core = 787
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = PNJ
						}
						NOT = {
							has_global_flag = PNJ_capitulation_ac
						}
					}
					RIT = {
						transfer_state = 442
						add_state_core = 442
						transfer_state = 445
						add_state_core = 445
						if = {
							limit = {
								AFG = {
									owns_state = 440
								}
							}
							transfer_state = 440
							add_state_core = 440
						}
						if = {
							limit = {
								AFG = {
									owns_state = 441
								}
							}
							transfer_state = 441
							add_state_core = 441
						}
						if = {
							limit = {
								AFG = {
									owns_state = 787
								}
							}
							transfer_state = 787
							add_state_core = 787
						}
					}
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						RIT = {
							has_war_with = AFG
						}
					}
					RIT = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_RIT
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						PAR = {
							has_war_with = AFG
						}
					}
					PAR = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_PAR
				}
				if = {
					limit = {
						NOT = {
							has_global_flag = AFG_peace_by_RIT
							has_global_flag = AFG_peace_by_PAR
							has_global_flag = AFG_peace_by_PNJ
						}
						PNJ = {
							has_war_with = AFG
						}
					}
					PNJ = {
						white_peace = {
							tag = AFG
							message = AFG_lose_company
						}
					}
					set_global_flag = AFG_peace_by_PNJ
				}
				PAR = {
					annex_country = {
						target = AFG
						transfer_troops = no
					}
				}
				RIT = {
					remove_ideas = afganistan_company
				}
				PNJ = {
					remove_ideas = afganistan_company
				}
				PAR = {
					remove_ideas = afganistan_company
				}
				clr_global_flag = afganistan_company_global_flag
				set_global_flag = AFG_capitulation_ac
				news_event = news.91
			}
			#RIT capitulation
			if = {
				limit = {
					tag = RIT
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = RIT_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = RIT
						message = RIT_lose_company
					}
				}
				RIT = {
					remove_ideas = afganistan_company
				}
				AFG = {
					transfer_state = 443
					transfer_state = 837
				}
				set_global_flag = RIT_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
			#PNJ capitulation
			if = {
				limit = {
					tag = PNJ
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = PNJ_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = PNJ
						message = PNJ_lose_company
					}
				}
				PNJ = {
					remove_ideas = afganistan_company
				}
				AFG = {
					annex_country = {
						target = PNJ
						transfer_troops = no
					}
					add_state_core = 440
					add_state_core = 441
					add_state_core = 787
				}
				set_global_flag = PNJ_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
			#PAR capitulation
			if = {
				limit = {
					tag = PAR
					has_global_flag = afganistan_company_global_flag
					NOT = {
						has_global_flag = PAR_capitulation_ac
					}
				}
				AFG = {
					white_peace = {
						tag = PAR
						message = PAR_lose_company
					}
				}
				PAR = {
					remove_ideas = afganistan_company
				}
				AFG = {
					transfer_state = 412
					add_state_core = 412
					transfer_state = 414
					add_state_core = 414
					transfer_state = 852
					add_state_core = 852
				}
				BYZ = {
					set_autonomy = {
						target = PAR
						autonomy_state = autonomy_aotsm_protectorat
						end_wars = yes
						end_civil_wars = yes
					}
				}
				PAR = {
					set_politics = {
						ruling_party = authoritarian
						elections_allowed = no
						last_election = "1848.1.1"
						election_frequency = 48
					}
					set_popularities = {
						democratic = 1
						authoritarian = 93
						reactionist = 5
						socialism = 1
					}
				}
				set_global_flag = PAR_capitulation_ac
				if = {
					limit = {
						has_global_flag = RIT_capitulation_ac
						has_global_flag = PNJ_capitulation_ac
						has_global_flag = PAR_capitulation_ac
					}
					clr_global_flag = afganistan_company_global_flag
					AFG = {
						set_cosmetic_tag = AFG_MUG
					}
					every_country = {
						limit = {
							has_war_with = AFG
							OR = {
								tag = BYZ
								is_in_faction_with = BYZ
							}
						}
						white_peace = AFG
					}
					news_event = news.92
				}
			}
		#Mittleafrika company
			#CON capitulation
			if = {
				limit = {
					tag = CON
					CON = {
						has_country_flag = CON_vs_MAT
					}
					CON = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = CON
						transfer_troops = no
					}
				}
				CON = {
					clr_country_flag = CON_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#LUB capitulation
			if = {
				limit = {
					tag = LUB
					LUB = {
						has_country_flag = LUB_vs_MAT
					}
					LUB = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = LUB
						transfer_troops = no
					}
				}
				LUB = {
					clr_country_flag = LUB_vs_MAT
				}
				MAT = {
					add_state_core = 295
				}
			}
			#FKU capitulation
			if = {
				limit = {
					tag = FKU
					FKU = {
						has_country_flag = FKU_vs_MAT
					}
					FKU = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = FKU
						transfer_troops = no
					}
				}
				FKU = {
					clr_country_flag = FKU_vs_MAT
				}
				MAT = {
					add_state_core = 538
					add_state_core = 718
				}
			}
			#BAN capitulation
			if = {
				limit = {
					tag = BAN
					BAN = {
						has_country_flag = BAN_vs_MAT
					}
					BAN = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BAN
						transfer_troops = no
					}
				}
				BAN = {
					clr_country_flag = BAN_vs_MAT
				}
				MAT = {
					add_state_core = 773
				}
			}
			#KIT capitulation
			if = {
				limit = {
					tag = KIT
					KIT = {
						has_country_flag = KIT_vs_MAT
					}
					KIT = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = KIT
						transfer_troops = no
					}
				}
				KIT = {
					clr_country_flag = KIT_vs_MAT
				}
				MAT = {
					add_state_core = 548
				}
			}
			#BUG capitulation
			if = {
				limit = {
					tag = BUG
					BUG = {
						has_country_flag = BUG_vs_MAT
					}
					BUG = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BUG
						transfer_troops = no
					}
				}
				BUG = {
					clr_country_flag = BUG_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#BUR capitulation
			if = {
				limit = {
					tag = BUR
					BUR = {
						has_country_flag = BUR_vs_MAT
					}
					BUR = {
						has_war_with = MAT
					}
				}
				MAT = {
					annex_country = {
						target = BUR
						transfer_troops = no
					}
				}
				BUR = {
					clr_country_flag = BUR_vs_MAT
				}
				MAT = {
					add_state_core = 772
				}
			}
			#SKZ capitulation
			if = {
				limit = {
					tag = SKZ
					PAR = {
						has_country_flag = PAR_vs_SKZ
					}
					SKZ = {
						has_war_with = PAR
					}
				}
				PAR = {
					white_peace = {
						tag = SKZ
						message = PAR_succes_SKZ
					}
				}
				PAR = {
					annex_country = {
						target = SKZ
						transfer_troops = no
					}
				}
				PAR = {
					clr_country_flag = PAR_vs_SKZ
				}
			}
			#SWI capitulation
			if = {
				limit = {
					tag = SWI
					SWI = {
						has_country_flag = SWI_end_of_neutrality
					}
					SWI = {
						has_war_with = PRU
					}
				}
				PRU = {
					transfer_state = 151
					add_state_core = 151
					transfer_state = 940
					add_state_core = 940
				}
				BRG = {
					transfer_state = 3
					add_state_core = 3
				}
				if = {
					limit = {
						country_exists = SAR
					}
					SAR = {
						transfer_state = 884
						add_state_core = 884
						transfer_state = 939
						add_state_core = 939
					}
				}
				else = {
					BYZ = {
						transfer_state = 884
						add_state_core = 884
						transfer_state = 939
						add_state_core = 939
					}
				}
			}
			#CBI capitulation
			if = {
				limit = {
					tag = CBI
					CBI = {
						has_country_flag = CBI_vs_SCA
					}
					CBI = {
						has_war_with = SCA
					}
					CBI = {
						is_in_faction_with = COR
					}
				}
				SCA = {
					create_faction = THE_NEW_ORDER
					transfer_state = 120
					transfer_state = 121
					transfer_state = 131
					transfer_state = 133
					transfer_state = 136
					transfer_state = 864
					add_state_core = 864
					transfer_state = 865
					add_state_core = 865
					transfer_state = 866
					add_state_core = 866
					white_peace = {
						tag = CBI
					}
				}
				news_event = {
					id = news.33
					days = 1
				}
				if = {
					limit = {
						country_exists = COR
					}
					COR = { 
						change_tag_from = CBI 
					}
					CBI = {
						transfer_navy = {
							target = COR
						}
					}
					COR = {
						leave_faction = yes
						annex_country = {
							target = CBI
							transfer_troops = yes
						}
						if = {
							limit = {
								NOT = {
									has_global_flag = leypoldit_bombing
								}
							}
							set_capital = {
								state = 126 
								remember_old_capital = no
							}
						}
						if = {
							limit = {
								has_global_flag = leypoldit_bombing
							}
							set_capital = {
								state = 127 
								remember_old_capital = no
							}
						}
						add_state_core = 122
						add_state_core = 125
						add_state_core = 126
						add_state_core = 127
						add_state_core = 128
						add_state_core = 129
						add_state_core = 130
						add_state_core = 338
						swap_ideas = {
							remove_idea = little_country
							add_idea = large_country
						}
					}
					CBI = {
						remove_state_core = 120
						remove_state_core = 121
						remove_state_core = 122
						remove_state_core = 125
						remove_state_core = 126
						remove_state_core = 127
						remove_state_core = 128
						remove_state_core = 129
						remove_state_core = 130
						remove_state_core = 131
						remove_state_core = 132
						remove_state_core = 133
						remove_state_core = 136
						remove_state_core = 338
						remove_state_core = 864
						remove_state_core = 865
						remove_state_core = 866
					}
					if = {
						limit = {
							NOT = {
								has_global_flag = leypoldit_bombing
							}
						}
						126 = {
							set_province_name = {
								id = 6103
								name = LONDINIUM
							}
						}
					}
					if = {
						limit = {
							has_global_flag = leypoldit_bombing
						}
						set_capital = {
							state = 127 
							remember_old_capital = no
						}
						127 = {
							set_province_name = {
								id = 3501
								name = NEW_LONDINIUM
							}
						}
					}
					BYZ = {
						add_to_faction = COR
					}
					COR = {
						set_cosmetic_tag = CORENG
					}
				}
				CBI = {
					clr_country_flag = CBI_vs_SCA
				}
			}	
			#SCA capitulation
			if = {
				limit = {
					tag = SCA
					has_global_flag = firts_world_war
					OR = {
						SCA = {
							has_war_with = RUS
						}
						SCA = {
							has_war_with = CBI
						}
					}
					NOT = {
						has_global_flag = sca_capitulation
					}
				}
				scandinavia_capitulation_all = yes
			}
			#PRU capitulation
			if = {
				limit = {
					tag = PRU
					has_global_flag = firts_world_war
					OR = {
						PRU = {
							has_war_with = RUS
						}
						PRU = {
							has_war_with = CBI
						}
						PRU = {
							has_war_with = FRR
						}
					}
					NOT = {
						has_global_flag = pru_capitulation
					}
					NOT = {
						has_global_flag = blacksun_civilwar_prepered
					}
					NOT = {
						has_global_flag = blacksun_civilwar_going
					}
				}
				prussian_capitulation_all = yes
			}
			#BYZ capitulation
			if = {
				limit = {
					tag = BYZ
					has_global_flag = firts_world_war
					OR = {
						BYZ = {
							has_war_with = RUS
						}
						BYZ = {
							has_war_with = CBI
						}
						BYZ = {
							has_war_with = FRR
						}
					}
					NOT = {
						has_global_flag = byz_capitulation
					}
				}
				if = {
					limit = {
						SAR = {
							is_subject_of = BYZ
						}
					}
					BYZ = {
						annex_country = {
							target = SAR
							transfer_troops = no
						}
						set_capital = {
							state = 2
							remember_old_capital = yes
						}
					}
				}
				byzanatium_capitulation_all = yes
			}
			#JAP/TUK/JAS capitulation = {
			if = {
				limit = {
					OR = {
						tag = JAP
						tag = JAS
						tag = TUK
					}
					has_global_flag = firts_world_war
					OR = {
						JAP = {
							has_war_with = RUS
						}
						JAP = {
							has_war_with = CBI
						}
						JAP = {
							has_war_with = FRR
						}
						JAS = {
							has_war_with = RUS
						}
						JAS = {
							has_war_with = CBI
						}
						JAS = {
							has_war_with = FRR
						}
						TUK = {
							has_war_with = RUS
						}
						TUK = {
							has_war_with = CBI
						}
						TUK = {
							has_war_with = FRR
						}
					}
					NOT = {
						has_global_flag = jap_capitulation
					}
				}
				japan_capitulation_all = yes
			}
			#HIV capitulation
			if = {
				limit = {
					tag = HIV
					HIV = {
						has_country_flag = HIV_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = HIV
							transfer_troops = no
						}
					}
				}
			}
			#BUK capitulation
			if = {
				limit = {
					tag = BUK
					BUK = {
						has_country_flag = BUK_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = BUK
							transfer_troops = no
						}
					}
				}
			}
			#KOK capitulation
			if = {
				limit = {
					tag = KOK
					KOK = {
						has_country_flag = KOK_vs_SKZ
					}
				}
				if = {
					limit = {
						SKZ = {
							controls_state = 742
						}
					}
					SKZ = {
						annex_country = {
							target = KOK
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						PAR = {
							controls_state = 742
						}
					}
					PAR = {
						annex_country = {
							target = KOK
							transfer_troops = no
						}
					}
				}
			}
			#KIR capitulation
			if = {
				limit = {
					tag = KIR
					CPT = { has_country_flag = CPT_vs_KIR }
				}
				CPT = {
					white_peace = {
						tag = KIR
						message = CPT_win_KIR
					}
				}
				CPT = {
					transfer_state = 450
					transfer_state = 451
					transfer_state = 552
					transfer_state = 663
				}
				CPT = { clr_country_flag = CPT_vs_KIR }
				CPT = { set_country_flag = CPT_vs_KIR_win }
				CPT = { remove_ideas = eqyptian_wars }
				KIR = { remove_ideas = war_for_freedom }
				CPT = { set_cosmetic_tag = CPT_NAP }
				CPT = {
					swap_ideas = {
						remove_idea = little_country
						add_idea = medium_country
					}
				}
			}
			#TRI capitulation - cpt annex region
			if = {
				limit = {
					tag = TRI
					CPT = { has_country_flag = CPT_vs_TRI }
				}
				CPT = {
					white_peace = {
						tag = TRI
						message = CPT_win_TRI
					}
				}
				CPT = {
					transfer_state = 273
					transfer_state = 448
					transfer_state = 449
					transfer_state = 661
					transfer_state = 662
				}
				CPT = { clr_country_flag = CPT_vs_TIR }
				CPT = { set_country_flag = CPT_vs_TIR_win }
				CPT = { remove_ideas = eqyptian_wars }
				TRI = { remove_ideas = war_for_freedom }
				CPT = {
					swap_ideas = {
						remove_idea = medium_country
						add_idea = large_country
					}
				}
				FRR = { country_event = { id = fren_fober_agreement.3 days = 21 } }
				NUB = { country_event = { id = trivtatos.1 days = 40 } }
			}
			#HUN capitulation
			if = {
				limit = {
					tag = HUN
					VLH = { has_country_flag = VLH_war_with_HUN }
				}
				VLH = {
					white_peace = {
						tag = HUN
						message = Hungaria_lose
					}
				}
				GLA = {
					white_peace = {
						tag = HUN
					}
				}
				VLH = {
					transfer_state = 76
					transfer_state = 82
					transfer_state = 83
					transfer_state = 84
				}
				if = {
					limit = {
						GLA = {
							has_country_flag = GLA_with_VLH
						}
					}
					SLA = {
						transfer_state = 70
						transfer_state = 71
						transfer_state = 73
						transfer_state = 664
					}
					GLA = {
						puppet = SLA
					}
					SLA = {
						set_politics = { ruling_party = democratic elections_allowed = no }
						set_popularities = {
							democratic = 47
							socialism = 23
							reactionist = 14
							authoritarian = 16
						}
						swap_ideas = {
							remove_idea = monarchy
							add_idea = republic
						}
						load_oob = SLA_force
					}
				}
				BNT = {
					add_state_core = 45
					transfer_state = 45
					add_state_core = 82
					add_state_core = 764
					transfer_state = 764
				}
				BYZ = {
					puppet = BNT
				}
				BNT = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 23
						socialism = 17
						reactionist = 23
						authoritarian = 37
					}
					load_oob = BNT_force
				}
				VLH = { clr_country_flag = VLH_war_with_HUN }
				GLA = { leave_faction = yes }
				VLH = { leave_faction = yes }
				VLH = { give_guarantee = GLA }
				GLA = { give_guarantee = VLH }
				PRU = { add_to_faction = HUN }
				if = {
					limit = {
						RUS = {
							has_country_flag = rus_send_volonter_to_vlh
						}
					}
					set_variable_to_random = {
						var = RUS.manpower_back_vlh
						min = 42912
						max = 59613
					}
					set_variable_to_random = {
						var = RUS.weapon_back_vlh
						min = 711
						max = 981
					}
					VLH = {
						delete_unit_template_and_units = {
							division_template = "Russian Volunteers"
							disband = no
						}
					}
					RUS = {
						country_event = {
							id = war_event.4
							days = 1
						}
					}
				}
				if = {
					limit = {
						RUS = {
							has_country_flag = rus_send_volonter_to_gla
						}
					}
					set_variable_to_random = {
						var = RUS.manpower_back_gla
						min = 42912
						max = 59613
					}
					set_variable_to_random = {
						var = RUS.weapon_back_gla
						min = 711
						max = 981
					}
					GLA = {
						delete_unit_template_and_units = {
							division_template = "Russian Volunteers"
							disband = no
						}
					}
					RUS = {
						country_event = {
							id = war_event.5
							days = 1
						}
					}
				}
				HUN = {
					set_politics = { ruling_party = authoritarian elections_allowed = no }
					set_popularities = {
						democratic = 23
						socialism = 7
						reactionist = 26
						authoritarian = 44
					}
					swap_ideas = {
						remove_idea = republic
						add_idea = monarchy
					}
				}
				news_event = news.75
			}
			#VLH capitulation
			if = {
				limit = {
					tag = VLH
					VLH = { has_country_flag = VLH_war_with_HUN }
				}
				if = {
					limit = {
						VLH = {
							has_idea = russian_help
						}
					}
					VLH = {
						remove_ideas = russian_help
					}
				}
				if = {
					limit = {
						GLA = {
							has_idea = russian_help
						}
					}
					GLA = {
						remove_ideas = russian_help
					}
				}
				HUN = {
					white_peace = {
						tag = VLH
						message = Hungaria_win
					}
				}
				HUN = {
					white_peace = {
						tag = GLA
					}
				}
				VLH = { clr_country_flag = VLH_war_with_HUN }
				GLA = { leave_faction = yes }
				VLH = { leave_faction = yes }
				46 = { set_demilitarized_zone = yes }
				79 = { set_demilitarized_zone = yes }
				80 = { set_demilitarized_zone = yes }
				81 = { set_demilitarized_zone = yes }
				88 = { set_demilitarized_zone = yes }
				89 = { set_demilitarized_zone = yes }
				news_event = news.74
			}
			#Punishment
			if = {
				limit = {
					has_country_flag = punished_begining
					OR = {
						has_war_with = PRU
						has_war_with = AUS
						has_war_with = FRN
					}
				}
				if = {
					limit = {
						PRU = {
							is_faction_leader = yes
						}
						NOT = {
							PRU = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = PRU
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_for_pru = ROOT }
						set_country_flag = german_union_for_prussian
						add_ideas = saint_allience_idea
					}
				}
				if = {
					limit = {
						AUS = {
							is_faction_leader = yes
						}
						NOT = {
							AUS = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = AUS
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_for_aus = ROOT }
						set_country_flag = german_union_for_austrian
						add_ideas = saint_allience_idea
					}
				}
				if = {
					limit = {
						FRN = {
							is_faction_leader = yes
						}
						NOT = {
							FRN = {
								has_country_flag = leave_german_union
							}
						}
					}
					ROOT = {
						white_peace = FRN
						add_to_array = { global.german_union_members = ROOT }
						add_to_array = { global.german_union_neutrality = ROOT }
						set_country_flag = german_union_neutrality
						add_ideas = saint_allience_idea
					}
				}
				ROOT = {
					set_country_flag = punished_succed
					clr_country_flag = punished_begining
					clr_country_flag = leave_german_union
				}
				if = {
					limit = {
						PRU = {
							is_faction_leader = yes
						}
					}
					PRU = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						AUS = {
							is_faction_leader = yes
						}
					}
					AUS = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						FRN = {
							is_faction_leader = yes
						}
					}
					FRN = {
						dismantle_faction = yes
					}
				}
				if = {
					limit = {
						PRU = {
							has_country_flag = was_leader_of_faction
						}
					}
					PRU = {
						clr_country_flag = was_leader_of_faction
						create_faction = PRU_Kontinentaleuropa_pakt
					}
					every_country = {
						limit = {
							has_country_flag = was_in_prussian_allience
						}
						PRU = { add_to_faction = PREV }
						clr_country_flag = was_in_prussian_allience
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_flag = was_leader_of_faction
						}
					}
					AUS = {
						clr_country_flag = was_leader_of_faction
					}
					every_country = {
						limit = {
							has_country_flag = was_in_austrian_allience
						}
						AUS = { add_to_faction = PREV }
						clr_country_flag = was_in_austrian_allience
					}
				}
				if = {
					limit = {
						has_country_flag = leader_of_punished_coalition
					}
					if = {
						limit = {
							PRU = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = PRU
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}
					if = {
						limit = {
							AUS = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = AUS
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}
					if = {
						limit = {
							FRN = {
								has_country_flag = leader_of_punished_coalition
							}
						}
						every_country = {
							limit = {
								has_country_flag = punished_begining
							}
							white_peace = FRN
							set_country_flag = punished_fail
							clr_country_flag = punished_begining
						}
					}		
				}
			}
			#PRU annex bad boy
			if = {
				limit = {
					has_country_flag = PRU_war_with_you
					ROOT = {
						has_war_with = PRU
					}
				}
				PRU = {
					white_peace = ROOT
				}
				PRU = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
				every_state = {
					limit = {
						owner = {
							original_tag = PRU
						}
						NOT = {
							is_core_of = PRU
						}
						NOT = {
							has_dynamic_modifier = {
								modifier = PRU_loyal_to_prussian_state_modifier
							}
						}
					}
					add_dynamic_modifier = {
						modifier = PRU_loyal_to_prussian_state_modifier
					}
				}
				every_state = {
					limit = {
						owner = {
							original_tag = PRU
						}
						NOT = {
							is_core_of = PRU
						}
						NOT = {
							has_dynamic_modifier = {
								modifier = PRU_part_of_german_confederacy_state_modifier
							}
						}
					}
					add_dynamic_modifier = {
						modifier = PRU_part_of_german_confederacy_state_modifier
					}
				}
			}
			#Last Prussian-Austrian war
			if = {
				limit = {
					tag = AUS
					AUS = {
						has_war_with = PRU
					}
					PRU = {
						has_country_flag = PRU_VS_AUS_3
					}
					NOT = {
						AUS = {
							has_country_flag = aus_reborn
						}
					}
					NOT = {
						has_global_flag = austrian_capitulation_third_brotherwar_flag
					}
				}
				austrian_capitulation_third_brotherwar = yes
				log = "[GetDateText]: austrian_capitulation_third_brotherwar = yes"
			}
			#AUS win Hungary
			if = {
				limit = {
					tag = HUN
					HUN = {
						has_country_flag = hun_has_revolution_aus
					}
					HUN = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = HUN
						transfer_troops = no
					}
				}
				HUN = {
					clr_country_flag = hun_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#AUS win Galisian
			if = {
				limit = {
					tag = GLA
					GLA = {
						has_country_flag = gla_has_revolution_aus
					}
					GLA = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = GLA
						transfer_troops = no
					}
				}
				GLA = {
					clr_country_flag = gla_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#AUS win Venetian
			if = {
				limit = {
					tag = VEN
					VEN = {
						has_country_flag = ven_has_revolution_aus
					}
					VEN = {
						has_war_with = AUS
					}
				}
				AUS = {
					annex_country = {
						target = VEN
						transfer_troops = no
					}
				}
				VEN = {
					clr_country_flag = ven_has_revolution_aus
					remove_ideas = revolution_power
				}
			}
			#German civilwar PRU win
			if = {
				limit = {
					tag = SGE
					OR = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					SGE = {
						has_war_with = PRU
					}
					has_global_flag = prussian_civilwar
				}
				prussian_win_civilianwar = yes
			}
			#German civilwar SGE win
			if = {
				limit = {
					tag = PRU
					OR = {
						PRU = {
							has_country_flag = first_civilwar_scenario
						}
						PRU = {
							has_country_flag = second_civilwar_scenario
						}
						PRU = {
							has_country_flag = third_civilwar_scenarion
						}
					}
					SGE = {
						has_war_with = PRU
					}
					has_global_flag = prussian_civilwar
				}
				sge_win_civilianwar = yes	
			}
			#Revolution Turkish capitulation
			if = {
				limit = {
					tag = RTU
					RTU = {
						has_war_with = BYZ
					}
					has_global_flag = BYZ_student_revolt_inproggres
				}
				BYZ = {
					white_peace = {
						tag = RTU
						message = BYZ_win_student_war_RTU
					}
				}
				BYZ = {
					country_event = byz_student_chain.12
				}
			}
			#Islamic revolution capitulation
			if = {
				limit = {
					tag = RKA
					RKA = {
						has_war_with = BYZ
					}
					has_global_flag = BYZ_islamic_revolt_inprogress
				}
				BYZ = {
					white_peace = {
						tag = RKA
					}
				}
				BYZ = {
					country_event = byz_caucause_revolt.5
				}
			}
			#Pol civilwar
			if = {
				limit = {
					tag = PLH
					PLH = {
						has_war_with = POL
					}
					POL = {
						has_country_flag = pol_civilwar_plh
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					PRU = {
						annex_country = {
							target = PLH
							transfer_troops = no
						}
					}
				}
				PRU = {
					annex_country = {
						target = POL
						transfer_troops = no
					}
				}
			}
			#PRT capitulation
			if = {
				limit = {
					tag = PRT
					PRT = {
						has_war_with = CAS
						has_completed_focus = PRT_The_War_with_Castile
					}
					NOT = {
						has_global_flag = PRT_capitilation_proxy
					}
					NOT = {
						PRT = {
							has_war_with = CBI
						}
					}
				}			
				CBI = {
					white_peace = PRT
					annex_country = {
						target = PRT
						transfer_troops = no
					}
				}
				PRT = {
					transfer_state = 112
					transfer_state = 179
					transfer_state = 180
					transfer_state = 181
					transfer_state = 795
				}
				CAS = {
					puppet = PRT
				}
				set_global_flag = PRT_capitilation_proxy
			}
			if = {
				limit = {
					tag = PRT
					PRT = {
						has_war_with = CBI
					}
					NOT = {
						has_global_flag = PRT_capitilation_proxy
					}
					CBI = {
						has_completed_focus = CBI_last_ultimatum
					}
				}
				CBI  = {
					white_peace = PRT
					annex_country = {
						target  = PRT
						transfer_troops = no
					}
				}
				set_global_flag = PRT_capitilation_proxy
			}
			#CAS
			if = {
				limit = {
					tag = CAS
					PRT = {
						has_war_with = CAS
						has_completed_focus = PRT_The_War_with_Castile
					}
					NOT = {
						has_global_flag = CAS_capituliation
					}
				}
				CAS = {
					white_peace = PRT
				}
				PRT = {
					annex_country = {
						target = CAS
						transfer_troops = no
					}
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = PRT
							has_war_with = CAS
						}
						white_peace = CAS
					}
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = CAS
							has_war_with = PRT
						}
						white_peace = PRT
					}
				}
				#news_event = news.1 #Тут должен быть ивент о капитуляции Кастилии
				set_global_flag = CAS_capituliation
			}
			#GRA
			if = {
				limit = {
					tag = GRA
					PRT = {
						has_war_with = GRA
						has_completed_focus = PRT_The_war_with_Granada
					}
					NOT = {
						has_global_flag = GRA_capituliation
					}
				}
				GRA = {
					white_peace = PRT
				}
				PRT = {
					annex_country = {
						target = GRA
						transfer_troops = no
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = PRT
							has_war_with = GRA
						}
						white_peace = GRA
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = GRA
							has_war_with = PRT
						}
						white_peace = PRT
					}
				}
				#news_event = news.1 #Тут должен быть ивент о капитуляции Грнады
				set_global_flag = GRA_capituliation
			}
			#ARA
			if = {
				limit = {
					tag = ARA
					PRT = {
						has_war_with = ARA
						OR = {
							has_completed_focus = PRT_Unite_with_Aragon
							has_completed_focus = PRT_To_fight_for_Aragon
						}
					}
					NOT = {
						has_global_flag = ARA_capituliation
					}
				}
				ARA = {
					white_peace = PRT
				}
				PRT = {
					annex_country = {
						target = ARA
						transfer_troops = no
					}
				}					
				every_country = {
					if = {
						limit = {
							is_in_faction_with = PRT
							has_war_with = ARA
						}
						white_peace = ARA
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = ARA
							has_war_with = PRT
						}
						white_peace = PRT
					}
				}
				#news_event = news.1 #Тут должен быть ивент о капитуляции  Арагона
				set_global_flag = ARA_capituliation
			}
			#PAP capitulation
			if = {
				limit = {
					tag = PAP
					SAR = {
						has_country_flag = claim_central_italy_flag
					}
					SAR = {
						has_war_with = PAP
					}
				}
				SAR = {
					annex_country = { target = PAP transfer_troops = yes }
				}
				PAP = {
					transfer_state = 922
					promote_character = PAP_Curia_Romana
					set_cosmetic_tag = PAP_VAT
					set_capital = {
						state = 922
						remember_old_capital = no
					}
				}
				if = {
					limit = {
						SAR = {
							has_war_with = PAP
						}
					}
					SAR = {
						white_peace = PAP
					}
				}
				SAR = {
					diplomatic_relation = {
						country = PAP
						relation = guarantee
						active = yes
					}
				}
				SAR = {
					clr_country_flag = claim_central_italy_flag
				}
				news_event = news.226
			}
			#MSK capitulation
			if = {
				limit = {
					tag = MSK
					MSK = {
						has_war_with = NOV
					}
					has_global_flag = msk_nov_civilwar
				}
				clr_global_flag = msk_nov_civilwar
				MSK = {
					remove_mission = russian_civil_war_MSK
				}
				NOV = {
					remove_mission = russian_civil_war_NOV
				}
				NOV = {
					white_peace = {
						tag = MSK
						message = NOV_WIN_MSK_FULL
					}
					annex_country = {
						target = MSK
						transfer_troops = no
					}
					set_cosmetic_tag = NOV_RUS
				}
				every_state = {
					limit = {
						is_core_of = MSK
					}
					remove_core_of = MSK
					add_core_of = NOV
				}
				news_event = news.223
				MSK = {
					remove_ideas = heart_of_russian_world_msk
				}
				NOV = {
					add_ideas = heart_of_russian_world_msk
				}
			}
			#NOV capitulation
			if = {
				limit = {
					tag = NOV
					NOV = {
						has_war_with = MSK
					}
					has_global_flag = msk_nov_civilwar
				}
				MSK = {
					remove_mission = russian_civil_war_MSK
				}
				NOV = {
					remove_mission = russian_civil_war_NOV
				}
				clr_global_flag = msk_nov_civilwar
				MSK = {
					white_peace = {
						tag = NOV
						message = MSK_WIN_NOV_FULL
					}
					annex_country = {
						target = NOV
						transfer_troops = no
					}
					set_cosmetic_tag = MSK_RUS
				}
				every_state = {
					limit = {
						is_core_of = NOV
					}
					remove_core_of = NOV
					add_core_of = MSK
				}
				news_event = news.222
			}
			#SGE capitulation
			if = {
				limit = {
					tag = SGE
					OR = {
						SGE = {
							has_war_with = PRU
						}
						SGE = {
							has_war_with = RGR
						}
						SGE = {
							has_war_with = KGR
						}
					}
					has_global_flag = blacksun_civilwar_going
				}
				if = {
					limit = {
						PRU = {
							controls_province = 6377
						}
					}
					PRU = {
						annex_country = {
							target = SGE
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						RGR = {
							controls_province = 6377
						}
					}
					RGR = {
						annex_country = {
							target = SGE
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						KGR = {
							controls_province = 6377
						}
					}
					KGR = {
						annex_country = {
							target = SGE
							transfer_troops = no
						}
					}
				}
				every_state = {
					limit = {
						is_core_of = SGE
					}
					remove_core_of = SGE
				}
				pru_blacksun_civilwar_victory = yes
			}
			#RGR capitulation
			if = {
				limit = {
					tag = RGR
					OR = {
						RGR = {
							has_war_with = PRU
						}
						RGR = {
							has_war_with = SGE
						}
						RGR = {
							has_war_with = KGR
						}
					}
					has_global_flag = blacksun_civilwar_going
				}
				if = {
					limit = {
						PRU = {
							controls_province = 692
						}
					}
					PRU = {
						annex_country = {
							target = RGR
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						SGE = {
							controls_province = 692
						}
					}
					SGE = {
						annex_country = {
							target = RGR
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						KGR = {
							controls_province = 592
						}
					}
					KGR = {
						annex_country = {
							target = RGR
							transfer_troops = no
						}
					}
				}
				every_state = {
					limit = {
						is_core_of = RGR
					}
					remove_core_of = RGR
				}
				pru_blacksun_civilwar_victory = yes
			}
			#KGR capitulation
			if = {
				limit = {
					tag = KGR
					OR = {
						KGR = {
							has_war_with = PRU
						}
						KGR = {
							has_war_with = RGR
						}
						KGR = {
							has_war_with = SGE
						}
					}
					has_global_flag = blacksun_civilwar_going
				}
				if = {
					limit = {
						PRU = {
							controls_province = 6332
						}
					}
					PRU = {
						annex_country = {
							target = KGR
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						RGR = {
							controls_province = 6332
						}
					}
					RGR = {
						annex_country = {
							target = KGR
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						SGE = {
							controls_province = 6332
						}
					}
					SGE = {
						annex_country = {
							target = KGR
							transfer_troops = no
						}
					}
				}
				every_state = {
					limit = {
						is_core_of = KGR
					}
					remove_core_of = KGR
				}
				pru_blacksun_civilwar_victory = yes
			}
			#PRU capitulation
			if = {
				limit = {
					tag = PRU
					OR = {
						PRU = {
							has_war_with = SGE
						}
						PRU = {
							has_war_with = RGR
						}
						PRU = {
							has_war_with = KGR
						}
					}
					has_global_flag = blacksun_civilwar_going
				}
				if = {
					limit = {
						SGE = {
							controls_province = 6521
						}
					}
					SGE = {
						annex_country = {
							target = PRU
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						RGR = {
							controls_province = 6521
						}
					}
					RGR = {
						annex_country = {
							target = PRU
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						KGR = {
							controls_province = 6521
						}
					}
					KGR = {
						annex_country = {
							target = PRU
							transfer_troops = no
						}
					}
				}
				every_state = {
					limit = {
						is_core_of = PRU
					}
					remove_core_of = PRU
				}
				pru_blacksun_civilwar_victory = yes
			}
			#CHE capitulation
			if = {
				limit = {
					tag = CHE
					NEN = {
						has_country_flag = NEN_vs_CHE
					}
					NOT = {
						NEN = {
							has_country_flag = NEN_win_che
						}
					}
				}			
				NEN = {
					white_peace = CHE
				}
				NEN = {
					annex_country = {
						target = CHE
						transfer_troops = no
					}
					set_country_flag = NEN_win_che
				}					
				every_country = {
					if = {
						limit = {
							is_in_faction_with = NEN
							has_war_with = CHE
						}
						white_peace = CHE
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = CHE
							has_war_with = NEN
						}
						white_peace = NEN
					}
				}
			}
			#TEK capitulation
			if = {
				limit = {
					tag = TEK
					NEN = {
						has_country_flag = NEN_vs_TEK
					}
					NOT = {
						NEN = {
							has_country_flag = NEN_win_tek
						}
					}
				}
				NEN = {
					white_peace = TEK
				}
				NEN = {
					annex_country = {
						target = TEK
						transfer_troops = no
					}
					set_country_flag = NEN_win_tek
				}							
				every_country = {
					if = {
						limit = {
							is_in_faction_with = NEN
							has_war_with = TEK
						}
						white_peace = TEK
					}
				}		
				every_country = {
					if = {
						limit = {
							is_in_faction_with = TEK
							has_war_with = NEN
						}
						white_peace = NEN
					}
				}
			}
			#KED capitulation
			if = {
				limit = {
					tag = KED
					NEN = {
						has_country_flag = NEN_vs_KED
					}
					NOT = {
						NEN = {
							has_country_flag = NEN_win_ked
						}
					}
				}
				if = {
					limit = {
						MEC = {
							has_country_flag = accept_nen_pact
						}
					}
					NEN = {
						transfer_state = 372
						set_country_flag = NEN_win_ked
					}
					MEC = {
						transfer_state = 371
						transfer_state = 374
					}
				}
				if = {
					limit = {
						NOT = {
							MEC = {
								has_country_flag = accept_nen_pact
							}
						}
					}
					NEN = {
						annex_country = {
							target = KED
							transfer_troops = no
						}
						set_country_flag = NEN_win_ked
					}
				}
			}
			#MEC capitulation 
			if = {
				limit = {
					tag = MEC
					NEN = {
						has_country_flag = NEN_vs_KED
					}
					MEC = {
						has_war_with = KED
					}
					NOT = {
						NEN = {
							has_country_flag = lose_expansion_war
						}
					}
				}
				every_country = {
					if = {
						limit = {
							has_war_with = KED
							is_in_faction_with = MEC
						}
						white_peace = KED
					}
				}
			}
			#NEN capitulation
			if = {
				limit = {
					tag = NEN
					OR = {
						AND = {
							NEN = {
								has_country_flag = NEN_vs_CHE
							}
							NEN = {
								has_war_with = CHE
							}
						}
						AND = {
							NEN = {
								has_country_flag = NEN_vs_TEK
							}
							NEN = {
								has_war_with = TEK
							}
						}
						AND = {
							NEN = {
								has_country_flag = NEN_vs_KED
							}
							NEN = {
								has_war_with = KED
							}
						}
					}
					NOT = {
						NEN = {
							has_country_flag = lose_expansion_war
						}
					}
				}
				if = {
					limit = {
						NEN = {
							has_country_flag = NEN_vs_CHE
							has_war_with = CHE
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = CHE
							}
							white_peace = CHE
						}
					}
					CHE = {
						transfer_state = 363
					}
				}
				if = {
					limit = {
						NEN = {
							has_country_flag = NEN_vs_TEK
							has_war_with = TEK
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = TEK
							}
							white_peace = TEK
						}
					}
					TEK = {
						transfer_state = 261
					}
				}
				NEN = {
					set_country_flag = lose_expansion_war
				}
				if = {
					limit = {
						NEN = {
							has_country_flag = NEN_vs_KED
							has_war_with = KED
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = KED
								is_in_faction_with = NEN
							}
							white_peace = KED
						}
					}
				}
				NEN = {
					set_country_flag = lose_expansion_war
				}
			}
			#GOT capitulation
			if = {
				limit = {
					tag = GOT
					SAB = {
						has_country_flag = SAB_vs_GOT
					}
					NOT = {
						SAB = {
							has_country_flag = SAB_win_GOT
						}
					}
				}
				SAB = {
					annex_country = {
						target = GOT
						transfer_troops = no
					}
					set_country_flag = SAB_win_GOT
				}
			}
			#GRI capitulation
			if = {
				limit = {
					tag = GRI
					SAB = {
						has_country_flag = SAB_vs_GRI
					}
					NOT = {
						SAB = {
							has_country_flag = SAB_win_GRI
						}
					}
				}

				SAB = {
					annex_country = {
						target = GRI
						transfer_troops = no
					}
					set_country_flag = SAB_win_GRI
				}
			}
			#BOT capitulation
			if = {
				limit = {
					tag = BOT
					SAB = {
						has_country_flag = SAB_vs_BOT
					}
					NOT = {
						SAB = {
							has_country_flag = SAB_win_BOT
						}
					}
				}
				SAB = {
					annex_country = {
						target = BOT
						transfer_troops = no
					}
					set_country_flag = SAB_win_BOT
				}
			}
			#LUN capitulation
			if = {
				limit = {
					tag = LUN
					SAB = {
						has_country_flag = SAB_vs_LUN
					}
					NOT = {
						SAB = {
							has_country_flag = SAB_win_LUN
						}
					}
				}
				SAB = {
					annex_country = {
						target = LUN
						transfer_troops = no
					}
					set_country_flag = SAB_win_LUN
				}
			}
			#SAB capitulation
			if = {
				limit = {
					tag = SAB
					OR = {
						SAB = {
							has_country_flag = SAB_vs_GOT
							has_war_with = GOT
						}
						SAB = {
							has_country_flag = SAB_vs_GRI
							has_war_with = GRI
						}
						SAB = {
							has_country_flag = SAB_vs_BOT
							has_war_with = BOT
						}
						SAB = {
							has_country_flag = SAB_vs_LUN
							has_war_with = LUN
						}
					}
					NOT = {
						SAB = {
							has_country_flag = lose_expansion_war
						}
					}
				}
				if = {
					limit = {
						SAB = {
							has_country_flag = SAB_vs_GOT
							has_war_with = GOT
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = GOT
							}
							white_peace = GOT
						}
					}
				}
				if = {
					limit = {
						SAB = {
							has_country_flag = SAB_vs_GRI
							has_war_with = GRI
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = GRI
							}
							white_peace = GRI
						}
					}
				}
				if = {
					limit = {
						SAB = {
							has_country_flag = SAB_vs_BOT
							has_war_with = BOT
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = BOT
							}
							white_peace = BOT
						}
					}
				}
				if = {
					limit = {
						SAB = {
							has_country_flag = SAB_vs_LUN
							has_war_with = LUN
						}
					}
					every_country = {
						if = {
							limit = {
								has_war_with = LUN
							}
							white_peace = LUN
						}
					}
				}
				SAB = {
					set_country_flag = lose_expansion_war
				}
			}
		}
	}
	on_state_control_changed = {
		effect = {
			if = { #RUS capitulation - RBL uprising success
				limit = {
					has_global_flag = rbl_uprising_started
					195 = {
						controller = {
							OR = {
								tag = RBL
								is_subject_of = RBL
								is_in_faction_with = RBL
							}
						}
					}
					219 = {
						controller = {
							OR = {
								tag = RBL
								is_subject_of = RBL
								is_in_faction_with = RBL
							}
						}
					}
				}			
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = RBL
						}
						white_peace = RBL
					}
				}
				RUS = {
					white_peace = {
						tag = RBL
						message = RBL_uprising_sucsess
					} 			
				}
				RBL = {
					remove_state_core = 220
					remove_state_core = 240
					remove_state_core = 258
					remove_state_core = 257
					remove_state_core = 260
				}
				every_unit_leader = {
					limit = {
						has_trait = RUS_black_league
					}
					set_nationality = {
						target_country = RUS
					}
				}
				every_unit_leader = {
					limit = {
						has_trait = RUS_black_league_navy
					}
					set_nationality = {
						target_country = RUS
					}
				}
				RUS = { change_tag_from = RBL }				
				RUS = {
					annex_country = {
						target = RBL
						transfer_troops = yes
					}
				}
				RUS = {
					set_cosmetic_tag = RUS_RBL
					retire_country_leader = yes
					add_country_leader_role = {
						character = RUS_Pavel_Nikolaevich_Ignatiev
						promote_leader = yes
					
						country_leader = {
							expire = "1900.1.1"
							ideology = paternalism
							traits = { leader_of_the_black_union }
						}
					}
				}
				clr_global_flag = rbl_uprising_started
				set_global_flag = rbl_uprising_eb
				news_event = news.274
				add_threat = 1
			}
			if = {#RUS capitulation - Russia fail invasion in scandinavy - SCA annex finland
				limit ={
					tag = RUS
					RUS = { has_country_flag = RUS_soc_start_intervention_in_scandinavy }
					11 = {
						controller = {
							OR = {
								tag = SCA
								is_subject_of = SCA
								is_in_faction_with = SCA
							}
						}
					}
					147 = {
						controller = {
							OR = {
								tag = SCA
								is_subject_of = SCA
								is_in_faction_with = SCA
							}
						}
					}
					149 = {
						controller = {
							OR = {
								tag = SCA
								is_subject_of = SCA
								is_in_faction_with = SCA
							}
						}
					}
					150 = {
						controller = {
							OR = {
								tag = SCA
								is_subject_of = SCA
								is_in_faction_with = SCA
							}
						}
					}
				}
				if = {
					limit = {
						111 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 111
					}
				}
				if = {
					limit = {
						145 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 145
					}
				}
				if = {
					limit = {
						147 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 147
					}
				}
				if = {
					limit = {
						149 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 147
					}
				}
				if = {
					limit = {
						150 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 150
					}
				}
				SCA = {
					transfer_state = 111
					transfer_state = 145
					transfer_state = 147
					transfer_state = 149
					transfer_state = 150
					add_state_core = 111
					add_state_core = 145
					add_state_core = 147
					add_state_core = 149
					add_state_core = 150
				}
				RUS = { 
					clr_country_flag = RUS_soc_start_intervention_in_scandinavy
					set_country_flag = RUS_soc_fail_intervention_in_scandinavy
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_unlock_fight_witch_finland_separatism }
					}
					clr_country_flag = RUS_unlock_fight_witch_finland_separatism
				}
				RUS = {
					white_peace = SCA
				}
				news_event = { id = news.267 days = 3}
			}
			if = {#RUS capitulation - Russia fail invasion in scandinavy - SWE annex finland
				limit ={
					tag = RUS
					RUS = { has_country_flag = RUS_soc_start_intervention_in_scandinavy }
					11 = {
						controller = {
							OR = {
								tag = SWE
								is_subject_of = SWE
								is_in_faction_with = SWE
							}
						}
					}
					147 = {
						controller = {
							OR = {
								tag = SWE
								is_subject_of = SWE
								is_in_faction_with = SWE
							}
						}
					}
					149 = {
						controller = {
							OR = {
								tag = SWE
								is_subject_of = SWE
								is_in_faction_with = SWE
							}
						}
					}
					150 = {
						controller = {
							OR = {
								tag = SWE
								is_subject_of = SWE
								is_in_faction_with = SWE
							}
						}
					}
				}
				if = {
					limit = {
						111 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 111
					}
				}
				if = {
					limit = {
						145 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 145
					}
				}
				if = {
					limit = {
						147 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 147
					}
				}
				if = {
					limit = {
						149 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 147
					}
				}
				if = {
					limit = {
						150 = { is_core_of = RUS }
					}
					RUS = {
						remove_state_core = 150
					}
				}
				SWE = {
					transfer_state = 111
					transfer_state = 145
					transfer_state = 147
					transfer_state = 149
					transfer_state = 150
					add_state_core = 111
					add_state_core = 145
					add_state_core = 147
					add_state_core = 149
					add_state_core = 150
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_unlock_fight_witch_finland_separatism }
					}
					clr_country_flag = RUS_unlock_fight_witch_finland_separatism
				}
				RUS = {
					white_peace = SWE
				}
				news_event = { id = news.267 days = 3}
			}
			if = {#SCA capitulation - Russia annex 148 state
				limit ={
					tag = SCA
					RUS = { has_country_flag = RUS_soc_start_intervention_in_scandinavy }
					148 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
					666 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
				}
				SCA = {
					remove_state_core = 148
				}
				RUS = {
					transfer_state = 148
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_integrate_finland }
					}
					148 = { add_dynamic_modifier = { modifier = RUS_integrated_finland_dynamic_modifier } }
				}
				if = {
					limit = {
						RUS = {
							NOT = {
								OR = {
									has_country_flag = RUS_give_autonomy_finland
									has_country_flag = RUS_integrate_finland
								}
							}
						}
					}
					148 = { add_dynamic_modifier = { modifier = FIN_separatism_dynamic_modifier } }
				}
				RUS = { 
					white_peace = SCA
					clr_country_flag = RUS_soc_start_intervention_in_scandinavy
					set_country_flag = RUS_soc_end_intervention_in_scandinavy
				}
				set_global_flag = finland_is_russian
				news_event = { id = news.266 days = 3}
			}
			if = {#SWE capitulation - Russia annex 148 state
				limit ={
					tag = SWE
					RUS = { has_country_flag = RUS_soc_start_intervention_in_scandinavy }
					148 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
					666 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
				}
				SWE = {
					remove_state_core = 148
				}
				RUS = {
					transfer_state = 148
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_integrate_finland }
					}
					148 = { add_dynamic_modifier = { modifier = RUS_integrated_finland_dynamic_modifier } }
				}
				if = {
					limit = {
						RUS = {
							NOT = {
								OR = {
									has_country_flag = RUS_give_autonomy_finland
									has_country_flag = RUS_integrate_finland
								}
							}
						}
					}
					148 = { add_dynamic_modifier = { modifier = FIN_separatism_dynamic_modifier } }
				}
				RUS = { 
					white_peace = SWE
					clr_country_flag = RUS_soc_start_intervention_in_scandinavy
					set_country_flag = RUS_soc_end_intervention_in_scandinavy
				}
				set_global_flag = finland_is_russian 	
				news_event = { id = news.266 days = 3}
			}	
			#QIN capitulation - soc russia annex north_manguria
			if = {
				limit = {
					RUS = { 
						has_country_flag = RUS_soc_invade_in_north_manchguria 
						has_war_with = QIN
					}
					657 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
					560 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}				

				}
				RUS = {
					white_peace = QIN
					clr_country_flag = RUS_soc_invade_in_north_manchguria
					set_country_flag = RUS_soc_invade_in_north_manchguria_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
					}
				}
				if = {
					limit = {
						QIN = {
							owns_state = 408
							owns_state = 409
							owns_state = 560
							owns_state = 657
						}
					}
					RUS = {
						transfer_state = 408
						transfer_state = 409
						transfer_state = 560
						transfer_state = 657
					}
				}
				if = {
					limit = {
						MAN = {
							owns_state = 408
							owns_state = 409
							owns_state = 560
							owns_state = 657
						}
					}
					RUS = {
						transfer_state = 408
						transfer_state = 409
						transfer_state = 560
						transfer_state = 657
					}
				}
				RUS = { country_event = { id  = russian_socialist_sphere_event.29 days = 14 } }
				#news_event = { id = news.262 days = 3 }
				add_threat = 3
			}
			
			#RUS capitulation - RUS fail invasion in china
			if = {
				limit = {
					RUS = { 
						has_country_flag = RUS_invasion_in_qin_flag 
						has_war_with = QIN
					}
					561 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}				
					563 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}
					564 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}
					565 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}
					566 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}				
					654 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}
					916 = {
						controller = {
							OR = {
								tag = QIN
								is_subject_of = QIN
								is_in_faction_with = QIN
							}
						}
					}
				}
				RUS = {
					white_peace = QIN
					clr_country_flag = RUS_invasion_in_qin_flag
					set_country_flag = RUS_invasion_in_qin_flag_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = QIN
							has_war_with = RUS
						}
						white_peace = RUS
					}
				}
				if = {
					limit = {
						RUS = {
							owns_state = 714
							owns_state = 717
							owns_state = 761
						}
					}
					QIN = {
						transfer_state = 714
						transfer_state = 717
						transfer_state = 761
						add_state_core = 714
						add_state_core = 717
						add_state_core = 761
					}
				}
				QIN = {
					transfer_state = 564
					transfer_state = 566
					add_state_core = 564					
					add_state_core = 566									
				}
				if = {
					limit = {
						RUS = { owns_state = 329 }
					}
					QIN = { 
						transfer_state = 329 
						add_state_core = 329 
					}
				}
				if = {
					limit = {
						RUS = {
							owns_state = 408
							owns_state = 409
						}
					}
					QIN = { 
						transfer_state = 408 
						transfer_state = 409 
						add_state_core = 408 
						add_state_core = 409 
					}
				}
				if = {
					limit = {
						RUS = {
							owns_state = 560
							owns_state = 657
						}
					}
					QIN = { 
						transfer_state = 560 
						transfer_state = 657 
						add_state_core = 560 
						add_state_core = 657 
					}
				}
				if = {
					limit = {
						RUS = {
							owns_state = 561
							owns_state = 563
						}
					}
					QIN = { 
						transfer_state = 561
						transfer_state = 563
						add_state_core = 561 
						add_state_core = 563 
					}
				}
				news_event = { id = news.229 days = 3 }
				add_threat = 7
			}
			#QIN capitulation - RUS create jeltorossia
			if = {
				limit = {
					RUS = { 
						has_country_flag = RUS_invasion_in_qin_flag 
						has_war_with = QIN
					}
					328 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}	
					330 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}				
					612 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
					715 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
					916 = {
						controller = {
							OR = {
								tag = RUS
								is_subject_of = RUS
								is_in_faction_with = RUS
							}
						}
					}
				}
				JRU = {
					transfer_state = 328
					transfer_state = 330
					transfer_state = 612
					transfer_state = 715
					transfer_state = 916
					add_state_core = 328
					add_state_core = 330
					add_state_core = 612
					add_state_core = 715
					add_state_core = 916
				}
				RUS = {
					set_autonomy = {
						target = JRU
						autonomous_state = autonomy_colony
					}
					white_peace = QIN
					clr_country_flag = RUS_invasion_in_qin_flag
					set_country_flag = RUS_invasion_in_qin_flag_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
					}
				}
				if = {
					limit = {
						OR = {
							RUS = {
								owns_state = 714
								owns_state = 717
								owns_state = 761
							}
							QIN = {
								owns_state = 714
								owns_state = 717
								owns_state = 761
							}
							MAN = {
								owns_state = 714
								owns_state = 717
								owns_state = 761
							}
						}
					}
					JRU = {
						transfer_state = 714
						transfer_state = 717
						transfer_state = 761
						add_state_core = 714
						add_state_core = 717
						add_state_core = 761
					}
					QIN = {
						remove_state_core = 714
						remove_state_core = 717
						remove_state_core = 761
					}
					MAN = {
						remove_state_core = 714
						remove_state_core = 717
						remove_state_core = 761
					}
				}
				if = {
					limit = {
						OR = {
							QIN = { owns_state = 329 }
							MON = { owns_state = 329 }
						}
					}
					JRU = {
						transfer_state = 329
						add_state_core = 329
					}
				}	
				QIN = {
					remove_state_core = 328
					remove_state_core = 330
					remove_state_core = 612
					remove_state_core = 715
					remove_state_core = 916					
				}		
				news_event = { id = news.228 days = 3 }
				add_threat = 7
			}
			#RUS capitulation - RUS fail invasion in steppe
			if = {
				limit = {
					RUS = { 
						has_country_flag = RUS_invasion_in_kaz_flag 
						has_war_with = KAZ
					}
					406 = {
						controller = {
							OR = {
								tag = KAZ
								is_subject_of = KAZ
								is_in_faction_with = KAZ
								tag = BUK
								is_subject_of = BUK
								is_in_faction_with = BUK
								tag = HIV
								is_subject_of = HIV
								is_in_faction_with = HIV
							}
						}
					}
					407 = {
						controller = {
							OR = {
								tag = KAZ
								is_subject_of = KAZ
								is_in_faction_with = KAZ
								tag = BUK
								is_subject_of = BUK
								is_in_faction_with = BUK
								tag = HIV
								is_subject_of = HIV
								is_in_faction_with = HIV
							}
						}
					}
					582 = {
						controller = {
							OR = {
								tag = KAZ
								is_subject_of = KAZ
								is_in_faction_with = KAZ
								tag = BUK
								is_subject_of = BUK
								is_in_faction_with = BUK
								tag = HIV
								is_subject_of = HIV
								is_in_faction_with = HIV
							}
						}
					}
					652 = {
						controller = {
							OR = {
								tag = KAZ
								is_subject_of = KAZ
								is_in_faction_with = KAZ
								tag = BUK
								is_subject_of = BUK
								is_in_faction_with = BUK
								tag = HIV
								is_subject_of = HIV
								is_in_faction_with = HIV
							}
						}
					}
				}
				KAZ = {
					white_peace = RUS
					transfer_state = 406
					transfer_state = 407
					add_state_core = 406
					add_state_core = 407
				}
				BUK = {
					white_peace = RUS
				}
				HIV = {
					white_peace = RUS
				}	
				RUS = {
					remove_state_core = 406
					remove_state_core = 407
					clr_country_flag = RUS_invasion_in_kaz_flag
					set_country_flag = RUS_invasion_in_kaz_flag_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = KAZ
						}
						white_peace = KAZ
					}
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = BUK
						}
						white_peace = BUK
					}
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = HIV
						}
						white_peace = HIV
					}
				}
				
				add_threat = 3
			}
			#RUS capitulation - RUS fail annex sakhalin - JAP win
			if = {
				limit = {
					JAP = { has_country_flag = JAPFULLJAP }					
					RUS = { 
						has_country_flag = RUS_sakhalin_war_plan 
						has_war_with = JAP
					}
					561 = {
						controller = {
							OR = {
								tag = JAP
								is_subject_of = JAP
								is_in_faction_with = JAP
							}
						}
					}
					562 = {
						controller = {
							OR = {
								tag = JAP
								is_subject_of = JAP
								is_in_faction_with = JAP
							}
						}
					}
					574 = {
						controller = {
							OR = {
								tag = JAP
								is_subject_of = JAP
								is_in_faction_with = JAP
							}
						}
					}
				}
				RUS = {
					white_peace = JAP				
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = JAP
						}
						white_peace = JAP
					}
				}
				add_threat = 2
			}
			#RUS capitulation - RUS fail annex sakhalin - JAS win
			if = {
				limit = {
					JAS = { has_country_flag = JASFULLJAP }
					RUS = { 
						has_country_flag = RUS_sakhalin_war_plan 
						has_war_with = JAS
					}
					561 = {
						controller = {
							OR = {
								tag = JAS
								is_subject_of = JAS
								is_in_faction_with = JAS
							}
						}
					}
					562 = {
						controller = {
							OR = {
								tag = JAS
								is_subject_of = JAS
								is_in_faction_with = JAS
							}
						}
					}
					574 = {
						controller = {
							OR = {
								tag = JAS
								is_subject_of = JAS
								is_in_faction_with = JAS
							}
						}
					}
				}
				RUS = {
					white_peace = JAS				
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = JAS
						}
						white_peace = JAS
					}
				}
				add_threat = 2
			}
			#RUS capitulation - RUS fail annex sakhalin - TUK win
			if = {
				limit = {
					tag = RUS
					TUK = { has_country_flag = TUKFULLJAP }
					RUS = { 
						has_country_flag = RUS_sakhalin_war_plan 
						has_war_with = JAS
					}
					561 = {
						controller = {
							OR = {
								tag = TUK
								is_subject_of = TUK
								is_in_faction_with = TUK
							}
						}
					}
					562 = {
						controller = {
							OR = {
								tag = TUK
								is_subject_of = TUK
								is_in_faction_with = TUK
							}
						}
					}
					574 = {
						controller = {
							OR = {
								tag = TUK
								is_subject_of = TUK
								is_in_faction_with = TUK
							}
						}
					}
				}
				RUS = {
					white_peace = TUK				
			
					clr_country_flag = RUS_sakhalin_war_plan
					set_country_flag = RUS_sakhalin_war_plan_end
				}
				
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = TUK
						}
						white_peace = TUK
					}
				}
				add_threat = 2
			}
			#SEL win - RUS fail expand alaska
			if = {
				limit = {
					#tag = SEL
					RUS = {
						has_war_with = SEL
						has_country_flag = RUS_salish_war_plan
					}
					463 = {
						controller = {
							OR = {
								tag = SEL
								is_subject_of = SEL
								is_in_faction_with = SEL
							}
						}
					}
					471 = {
						controller = {
							OR = {
								tag = SEL
								is_subject_of = SEL
								is_in_faction_with = SEL
							}
						}
					}
				}			
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = SEL
						}
						white_peace = SEL
					}
				}
				SEL = {
					white_peace = {
						tag = RUS
						message = RUS_fail_SEL
					}
				}
				RUS = {
					clr_country_flag = RUS_salish_war_plan
					set_country_flag = RUS_salish_war_plan_end
				}
				add_threat = 1
			}
			#SKS win - RUS fail expand alaska
			if = {
				limit = {
					#tag = SKS
					RUS = {
						has_war_with = SKS
						has_country_flag = RUS_sks_war_plan
					}
					463 = {
						controller = {
							OR = {
								tag = SKS
								is_subject_of = SKS
								is_in_faction_with = SKS
							}
						}
					}
					471 = {
						controller = {
							OR = {
								tag = SKS
								is_subject_of = SKS
								is_in_faction_with = SKS
							}
						}
					}
				}			
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = SKS
						}
						white_peace = SKS
					}
				}
				SKS = {
					white_peace = {
						tag = RUS
						message = RUS_fail_SKS
					}
				}
				RUS = {
					clr_country_flag = RUS_sks_war_plan
					set_country_flag = RUS_sks_war_plan_end
				}
				add_threat = 1
			}
			#INU win - RUS fail expand alaska
			if = {
				limit = {
					#tag = RUS
					RUS = {
						has_war_with = INU
						has_country_flag = RUS_inuit_war_plan
					}
					463 = {
						controller = {
							OR = {
								tag = INU
								is_subject_of = INU
								is_in_faction_with = INU
							}
						}
					}
					471 = {
						controller = {
							OR = {
								tag = INU
								is_subject_of = INU
								is_in_faction_with = INU
							}
						}
					}
				}			
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = INU
						}
						white_peace = INU
					}
				}
				INU = {
					white_peace = {
						tag = RUS
						message = RUS_fail_INU
					}
				}
				RUS = {
					clr_country_flag = RUS_inuit_war_plan
					set_country_flag = RUS_inuit_war_plan_end
				}
				add_threat = 1
			}
			#QIN capitulation - RUS annex tuva
			if = {
				limit = {
					RUS = {
						has_country_flag = RUS_tuva_war_plan
						has_war_with = QIN
					}
					OR = {
						MON = {
							surrender_progress > 0.30
						}
						329 = {
							controller = {
								OR = {
									tag = RUS
									is_subject_of = RUS
									is_in_faction_with = RUS
								}
							}
						}
					}
				}
				RUS = {
					white_peace = {
						tag = QIN
						message = QIN_lost_tuva
					} 							
					clr_country_flag = RUS_tuva_war_plan
					set_country_flag = RUS_tuva_war_plan_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
					}
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = QIN
							has_war_with = RUS
						}
						white_peace = RUS
					}
				}
				QIN = {
					remove_state_core = 329
				}
				if = {
					limit = {
						MAN = { country_exists = yes } 
					}
					MON = {
						remove_state_core = 329
					}
				}				
				RUS = {
					transfer_state = 329
				}
				add_threat = 1
			}
			#QIN capitulation - RUS war on far east - small
			if = {
				limit = {
					RUS = {
						has_country_flag = RUS_china_far_east_small_plan
						has_war_with = QIN
					}
					OR = {
						QIN = {
							surrender_progress > 0.50
						}
						MAN = {
							surrender_progress > 0.30
						}
						AND = {
							560 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							657 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
						}
					}
				}
				RUS = {
					white_peace = {
						tag = QIN
						message = QIN_lost_north_man
					} 					
					transfer_state = 560
					transfer_state = 657
					add_state_core = 560
					add_state_core = 657
			
					clr_country_flag = RUS_china_far_east_small_plan
					set_country_flag = RUS_china_far_east_small_plan_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
						if = {
							limit = {
								MAN = { country_exists = yes }
							}
							white_peace = MAN
						}
					}
				}
				QIN = {
					remove_state_core = 560
					remove_state_core = 657
				}
				if = {
					limit = {
						MAN = { country_exists = yes } 
					}
					MAN = {
						remove_state_core = 560
						remove_state_core = 657
					}
				}
				add_threat = 5
			}
			#QIN capitulation - RUS war on far east - medium
			if = {
				limit = {
					RUS = {
						has_country_flag = RUS_china_far_east_medium_plan
						has_war_with = QIN
					}					
					OR = {
						QIN = {
							surrender_progress > 0.50
						}
						MAN = {
							surrender_progress > 0.30
						}
						AND = {
							408 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							409 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							560 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							657 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
						}
					}
				}
				RUS = {
					white_peace = {
						tag = QIN
						message = QIN_lost_north_man
					} 
					transfer_state = 408
					transfer_state = 409
					transfer_state = 560
					transfer_state = 657

			
					clr_country_flag = RUS_china_far_east_medium_plan
					set_country_flag = RUS_china_far_east_medium_plan_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
						if = {
							limit = {
								MAN = { country_exists = yes }
							}
							white_peace = MAN
						}
					}
				}
				QIN = {
					remove_state_core = 408
					remove_state_core = 409
					remove_state_core = 560
					remove_state_core = 657
				}
				if = {
					limit = {
						MAN = { country_exists = yes } 
					}
					MAN = {
						remove_state_core = 408
						remove_state_core = 409
						remove_state_core = 560
						remove_state_core = 657
					}
				}
				add_threat = 5
			}
			#QIN capitulation - RUS war on far east - big
			if = {
				limit = {
					RUS = {
						has_country_flag = RUS_china_far_east_big_plan
						has_war_with = QIN
					}
					OR = {
						QIN = {
							surrender_progress > 0.50
						}
						MAN = {
							surrender_progress > 0.30
						}
						AND = {
							408 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							409 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							560 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							657 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							714 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							717 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
							761 = {
								controller = {
									OR = {
										tag = RUS
										is_subject_of = RUS
										is_in_faction_with = RUS
									}
								}
							}
						}
					}
				}
				RUS = {
					white_peace = {
						tag = QIN
						message = QIN_lost_north_man
					} 
					transfer_state = 408
					transfer_state = 409
					transfer_state = 560
					transfer_state = 657
					transfer_state = 714
					transfer_state = 717
					transfer_state = 761
			
					clr_country_flag = RUS_china_far_east_big_plan
					set_country_flag = RUS_china_far_east_big_plan_end
				}
				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
						if = {
							limit = {
								MAN = { country_exists = yes }
							}
							white_peace = MAN
						}
					}
				}
				QIN = {
					remove_state_core = 408
					remove_state_core = 409
					remove_state_core = 560
					remove_state_core = 657
				}
				if = {
					limit = {
						MAN = { country_exists = yes } 
					}
					MAN = {
						remove_state_core = 408
						remove_state_core = 409
						remove_state_core = 560
						remove_state_core = 657
					}
				}
				add_threat = 5
			}
			#RUS capitulation - RUS war on far east - RUS fail invasion on far east
			if = {
				limit = {
					RUS = {
						OR = {
							has_country_flag = RUS_china_far_east_small_plan
							has_country_flag = RUS_china_far_east_medium_plan
							has_country_flag = RUS_china_far_east_big_plan
							has_country_flag = RUS_tuva_war_plan
						}
						has_war_with = QIN
					}
					OR = {
						RUS = {
							surrender_progress > 0.30
						}
						AND = {
							561 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
							563 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
							564 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
							565 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
							566 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
							574 = {
								controller = {
									OR = {
										tag = QIN
										is_subject_of = QIN
										is_in_faction_with = QIN
									}
								}
							}
						}
					}
				}
				QIN = {
					white_peace = RUS
					transfer_state = 561
					transfer_state = 563
					transfer_state = 564
					add_state_core = 561
					add_state_core = 563
					add_state_core = 564
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_china_far_east_big_plan } 
					}
					RUS = {
						clr_country_flag = RUS_china_far_east_big_plan
						set_country_flag = RUS_china_far_east_big_plan_end
					}
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_china_far_east_big_plan } 
					}
					RUS = {
						clr_country_flag = RUS_china_far_east_medium_plan
						set_country_flag = RUS_china_far_east_medium_plan_end
					}
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_china_far_east_small_plan } 
					}
					RUS = {
						clr_country_flag = RUS_china_far_east_small_plan
						set_country_flag = RUS_china_far_east_small_plan_end
					}
				}
				if = {
					limit = {
						RUS = { has_country_flag = RUS_tuva_war_plan_plan } 
					}
					RUS = {
						clr_country_flag = RUS_tuva_war_plan
						set_country_flag = RUS_tuva_war_plan_end
					}
				}

				every_country = {
					if = {
						limit = {
							is_in_faction_with = RUS
							has_war_with = QIN
						}
						white_peace = QIN
					}
				}
				add_threat = 3
			}
			#First Prussian-Austrian war
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_1
					}
					PRU = {
						has_war_with = AUS
					}
					AUS = {
						surrender_progress > 0.249
					}
					OR = {
						9 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
						4 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
					}
					NOT = {
						has_global_flag = austrian_capitulation_first_brotherwar_flag
					}
				}
				austrian_capitulation_first_brotherwar = yes
				log = "[GetDateText]: austrian_capitulation_first_brotherwar = yes"
			}
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_1
					}
					PRU = {
						has_war_with = AUS
					}
					OR = {
						PRU = {
							surrender_progress > 0.499
						}
						64 = {
							controller = {
								OR = {
									tag = AUS
									is_subject_of = AUS
									is_in_faction_with = AUS
								}
							}
						}
					}
					NOT = {
						has_global_flag = prussian_capitulation_first_brotherwar_flag
					}
				}
				prussian_capitulation_first_brotherwar = yes
				log = "[GetDateText]: prussian_capitulation_first_brotherwar = yes"
			}
			#Second Prussian-Austrian war
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_2
					}
					PRU = {
						has_war_with = AUS
					}
					AUS = {
						surrender_progress > 0.499
					}
					OR = {
						9 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
						4 = {
							controller = {
								OR = {
									tag = PRU
									is_subject_of = PRU
									is_in_faction_with = PRU
								}
							}
						}
					}
					NOT = {
						has_global_flag = austrian_capitulation_second_brotherwar_flag
					}
				}
				austrian_capitulation_second_brotherwar = yes
				log = "[GetDateText]: austrian_capitulation_second_brotherwar = yes"
			}
			if = {
				limit = {
					PRU = {
						has_country_flag = PRU_VS_AUS_2
					}
					PRU = {
						has_war_with = AUS
					}
					PRU = {
						surrender_progress > 0.749
					}
					64 = {
						controller = {
							OR = {
								tag = AUS
								is_subject_of = AUS
								is_in_faction_with = AUS
							}
						}
					}
					NOT = {
						has_global_flag = prussian_capitulation_second_brotherwar_flag
					}
				}
				prussian_capitulation_second_brotherwar = yes
				log = "[GetDateText]: prussian_capitulation_second_brotherwar = yes"
			}
			#Balkan war BYZ win
			if = {
				limit = {
					BYZ = {
						has_war_with = AUS
					}
					has_global_flag = balkan_war_aus_vs_byz
					4 = {
						controller = {
							OR = {
								tag = BYZ
								is_subject_of = BYZ
								is_in_faction_with = BYZ
							}
						}
					}
				}
				BYZ = {
					white_peace = {
						tag = AUS
						message = viena_peace_tt
					}
				}
				clr_global_flag = balkan_war_aus_vs_byz
				BYZ = {
					set_country_flag = BYZ_vs_AUS_win
				}
				if = {
					limit = {
						BYZ = {
							has_country_flag = byz_democratic_politic
						}
					}
					DAL = {
						transfer_state = 102
						transfer_state = 103
						transfer_state = 109
						transfer_state = 163
						transfer_state = 736
					}
				}
				if = {
					limit = {
						BYZ = {
							NOT = {
								has_country_flag = byz_democratic_politic
							}
						}
					}
					BYZ = {
						transfer_state = 102
						transfer_state = 103
						transfer_state = 109
						transfer_state = 163
						transfer_state = 736
					}
				}
				if = {
					limit = {
						NOT = {
							country_exists = VEN
						}
					}
					VEN = {
						transfer_state = 159
						transfer_state = 160
						add_state_core = 159
						add_state_core = 160
						inherit_technology = AUS
						load_oob = VEN_oob
					}
				}
				AUS = {
					remove_state_core = 102
					remove_state_core = 103
					remove_state_core = 159
					remove_state_core = 160
					remove_state_core = 163
					remove_state_core = 736
				}
				AUS = {
					remove_ideas = war_for_the_balkan_idea
				}
				BYZ = {
					remove_ideas = war_for_the_balkan_idea
				}
				news_event = news.129
			}
			#Balkan war AUS win
			if = {
				limit = {
					AUS = {
						has_war_with = BYZ
					}
					has_global_flag = balkan_war_aus_vs_byz
					47 = {
						controller = {
							OR = {
								tag = AUS
								is_subject_of = AUS
								is_in_faction_with = AUS
							}
						}
					}
				}
				AUS = {
					white_peace = {
						tag = BYZ
						message = athens_peace_tt
					}
				}
				clr_global_flag = balkan_war_aus_vs_byz
				BYZ = {
					set_country_flag = lose_balkan_war
				}	
				AUS = {
					transfer_state = 104
					transfer_state = 105
					transfer_state = 107
					transfer_state = 108
					transfer_state = 802
					transfer_state = 804
				}
				AUS = {
					remove_ideas = war_for_the_balkan_idea
				}
				BYZ = {
					remove_ideas = war_for_the_balkan_idea
				}
				news_event = news.130
			}
		}
	}
}