####################
# Triger war event #
#   by Derkyster   #
####################

add_namespace = twe

country_event = {
	id = twe.1
	title = twe.1.t
	desc = twe.1.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = BYZ
		if = {
			limit = {
				is_ai = yes 
			}
			BUL = {
				surrender_progress > 0.10
			}
		}
		if = {
			limit = {
				is_ai = no
			}
			BUL = {
				surrender_progress > 0.35
			}
		}
		BYZ = { has_country_flag = BYZ_vs_BUL }
	}
	
	option = {
		name = twe.1.a
		BYZ = { 
			transfer_state = 48
			transfer_state = 106
			transfer_state = 211
			transfer_state = 212
			transfer_state = 801
			transfer_state = 803
		}
		VLH = {
			transfer_state = 46
			transfer_state = 77
			transfer_state = 81
		}
		BYZ = { clr_country_flag = BYZ_vs_BUL }
		BYZ = {
			white_peace = {
				tag = BUL
				message = BYZ_win_BUL
			}
		}
		BYZ = { set_country_flag = BYZ_vs_BUL_win }
	}
}

country_event = {
	id = twe.3
	title = twe.3.t
	desc = twe.3.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = PRU
		AUS = {
			surrender_progress > 0.40
		}
		PRU = { has_country_flag = PRU_vs_AUS_1 }
	}
	option = {
		name = twe.3.a
		hidden_effect = {
			PRU = { set_country_flag = victory_R_V_A_1 }
			PRU = { clr_country_flag = PRU_vs_AUS_1 }
			PRU = { remove_ideas = pru_blitzkrieg }
			PRU = {
				annex_country = { target = MCL transfer_troops = yes }
				annex_country = { target = SLG transfer_troops = yes }
				annex_country = { target = HAN transfer_troops = yes }
				annex_country = { target = VES transfer_troops = yes }
				annex_country = { target = FRN transfer_troops = yes }
				annex_country = { target = TYR transfer_troops = yes }
				annex_country = { target = SAK transfer_troops = yes }
			}
			MCL = {
				remove_state_core = 62
				remove_state_core = 61
			}
			SLG = {
				remove_state_core = 58
				remove_state_core = 829
			}
			HAN = {
				remove_state_core = 59
			}
			VES = {
				remove_state_core = 56
			}
			TYR = {
				remove_state_core = 60
			}
			SAK = { 
				remove_state_core = 65
			}
			FRN = {
				remove_state_core = 57
				remove_state_core = 51
				remove_state_core = 55
				remove_state_core = 42
				remove_state_core = 28
			}
			PRU = { set_cosmetic_tag = PRUNGU }
			remove_from_faction = PRU
			remove_from_faction = AUS
			remove_from_faction = BAD
			remove_from_faction = VUR
			remove_from_faction = BAV
			remove_from_faction = MCL
			remove_from_faction = SLG
			remove_from_faction = HAN
			remove_from_faction = VES
			remove_from_faction = FRN
			remove_from_faction = TYR
			remove_from_faction = SAK
			PRU = { white_peace = AUS }
			PRU = { white_peace = BAD }
			PRU = { white_peace = BAV }
			PRU = { white_peace = VUR }
		}
	}
}

country_event = {
	id = twe.4
	title = twe.4.t
	desc = twe.4.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = PRU
		BEL = {
			surrender_progress > 0.20
		}
		PRU = { has_country_flag = P_V_B }
	}
	option = {
		name = twe.4.a
		hidden_effect = {
			PRU = { clr_country_flag = P_V_B }
			PRU = { white_peace = BEL }
			PRU = { puppet = BEL }
			BEL = { remove_state_core = 8 }
			PRU = { add_state_core = 8 }
			PRU = { transfer_state = 8 }
		}
	}
}

country_event = {
	id = twe.5
	title = twe.5.t
	desc = twe.5.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = PRU
		HOL = {
			surrender_progress > 0.20
		}
		PRU = { has_country_flag = P_V_H }
	}
	option = {
		name = twe.5.a
		hidden_effect = {
			PRU = { clr_country_flag = P_V_H }
			PRU = { white_peace = HOL }
			PRU = { white_peace = IND }
			PRU = { puppet = HOL }
			HOL = { puppet = IND }
		}
	}
}

country_event = {
	id = twe.6
	title = twe.6.t
	desc = twe.6.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = PRU
		AUS = {
			surrender_progress > 0.40
		}
		PRU = { has_country_flag = PRU_vs_AUS_2 }
	}
	option = {
		name = twe.6.a
		hidden_effect = {
			PRU = { set_country_flag = victory_R_V_A_2 }
			PRU = { clr_country_flag = PRU_vs_AUS_2 }
			PRU = {
				annex_country = { target = BAD transfer_troops = yes }
				annex_country = { target = BAV transfer_troops = yes }
				annex_country = { target = VUR transfer_troops = yes }
			}
			BAD = {
				remove_state_core = 828
				remove_state_core = 50
			}
			VUR = {
				remove_state_core = 808
			}
			BAV = {
				remove_state_core = 54
				remove_state_core = 53
				remove_state_core = 52
			}
			remove_from_faction = AUS
			remove_from_faction = BAD
			remove_from_faction = VUR
			remove_from_faction = BAV
			PRU = { white_peace = AUS }
		}
	}
}

country_event = {
	id = twe.7
	title = twe.7.t
	desc = twe.7.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		tag = PRU
		AUS = {
			surrender_progress > 0.35
		}
		PRU = { has_country_flag = PRU_vs_AUS_3 }
	}
	option = {
		name = twe.7.a
		hidden_effect = {
			PRU = { set_country_flag = victory_R_V_A_3 }
			PRU = { clr_country_flag = PRU_vs_AUS_3 }
			PRU = { white_peace = AUS }
			BYZ = { white_peace = AUS }
			HUN = {
				transfer_state = 43
				transfer_state = 45
				transfer_state = 70
				transfer_state = 71
				transfer_state = 73
				transfer_state = 76
				transfer_state = 82
				transfer_state = 83
				transfer_state = 84
				transfer_state = 154
				transfer_state = 155
				transfer_state = 662
				transfer_state = 664
				transfer_state = 764
				add_state_core = 43
				add_state_core = 45
				add_state_core = 70
				add_state_core = 71
				add_state_core = 73
				add_state_core = 76
				add_state_core = 82
				add_state_core = 83
				add_state_core = 84
				add_state_core = 154
				add_state_core = 155
				add_state_core = 662
				add_state_core = 664
				add_state_core = 764
			}
			BOH = {
				transfer_state = 9
				transfer_state = 69
				transfer_state = 72
				transfer_state = 74
				transfer_state = 75
				transfer_state = 810
				add_state_core = 9
				add_state_core = 69
				add_state_core = 72
				add_state_core = 74
				add_state_core = 75
				add_state_core = 810
			}
			GLA = {
				transfer_state = 80
				transfer_state = 88
				transfer_state = 89
				transfer_state = 91
				add_state_core = 80
				add_state_core = 88
				add_state_core = 89
				add_state_core = 91
			}
			VEN = {
				transfer_state = 39
				transfer_state = 159
				transfer_state = 160
				add_state_core = 39
				add_state_core = 159
				add_state_core = 160
			}
			AUS = {
				remove_state_core = 4
				remove_state_core = 9
				remove_state_core = 39
				remove_state_core = 43
				remove_state_core = 45
				remove_state_core = 69
				remove_state_core = 70
				remove_state_core = 71
				remove_state_core = 72
				remove_state_core = 73
				remove_state_core = 74
				remove_state_core = 75
				remove_state_core = 76
				remove_state_core = 80
				remove_state_core = 83
				remove_state_core = 84
				remove_state_core = 88
				remove_state_core = 89
				remove_state_core = 91
				remove_state_core = 102
				remove_state_core = 103
				remove_state_core = 109
				remove_state_core = 152
				remove_state_core = 153
				remove_state_core = 154
				remove_state_core = 155
				remove_state_core = 159
				remove_state_core = 160
				remove_state_core = 163
				remove_state_core = 662
				remove_state_core = 664
				remove_state_core = 736
				remove_state_core = 764
				remove_state_core = 810
			}
			PRU = {
				transfer_state = 4
				transfer_state = 152
				transfer_state = 153
			}
			BYZ = {
				transfer_state = 102
				transfer_state = 103
				transfer_state = 109
				transfer_state = 163
				transfer_state = 736
			}
			if = {
				limit = {
					PRU = { is_faction_leader = yes }
				}
				PRU = { add_to_faction = BOH }
				PRU = { add_to_faction = HUN }
				PRU = { add_to_faction = GLA }
			}
			PRU = { puppet = VEN }
			PRU = { puppet = BOH }
		}
	}
}

country_event = {
	id = twe.8
	title = twe.8.t
	desc = twe.8.d
	picture = GFX_report_event_molotov_signing_pact
	
	fire_only_once = yes
	
	hidden =  yes
	
	trigger = {
		OR = {
			SAR = {
				surrender_progress > 0.35
				has_country_flag = ITA_WAR
			}
			PAP = {
				surrender_progress > 0.35
				has_country_flag = ITA_WAR
			}
			SYC = {
				surrender_progress > 0.35
				has_country_flag = ITA_WAR
			}
		}
	}
	
	option = {
		name = twe.8.a
		hidden_effect = {
			if = {
				limit = {
					AND = {
						country_exists = VEN
						is_puppet_of = PRU
					}
				}
				if = { 
					limit = {
						FRA = { is_in_faction_with = PRU }
					}
					FRA = {
						transfer_state = 735
					}
				}
				if = {
					limit = {
						NOT = {
							FRA = { is_in_faction_with = PRU }
						}
					}
					VEN = {
						transfer_state = 735 
					}
				}
			}
			VEN = {
				transfer_state = 158
				transfer_state = 161
				transfer_state = 162
			}
			BYZ = {
				transfer_state = 2
				transfer_state = 114
				transfer_state = 115
				transfer_state = 116
				transfer_state = 117
				transfer_state = 156
				transfer_state = 157
			}
			SAR = {
				remove_state_core = 2
				remove_state_core = 114
				remove_state_core = 115
				remove_state_core = 116
				remove_state_core = 117
				remove_state_core = 156
				remove_state_core = 157
				remove_state_core = 158
				remove_state_core = 161
				remove_state_core = 162
				remove_state_core = 735
			}
			PRM = {
				remove_state_core = 161
			}
			TUS = {
				remove_state_core = 162
			}
			PAP = {
				remove_state_core = 2
				remove_state_core = 114
				remove_state_core = 115
				remove_state_core = 116
				remove_state_core = 117
				remove_state_core = 156
				remove_state_core = 157
				remove_state_core = 158
				remove_state_core = 161
				remove_state_core = 162
				remove_state_core = 735
			}	
			SYC = {
				remove_state_core = 2
				remove_state_core = 114
				remove_state_core = 115
				remove_state_core = 116
				remove_state_core = 117
				remove_state_core = 156
				remove_state_core = 157
				remove_state_core = 158
				remove_state_core = 161
				remove_state_core = 162
				remove_state_core = 735
			}
		}
	}
	
}